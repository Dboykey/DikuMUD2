/*
filename    skaven
password    loser95
changedby   Skay
EmailAdd     Palio <palio@blinksoft.com>
request     compile
version     38
END HEADER*/

#include "composed.h"
#include "values.h"
#include "wmacros.h"
#define M_BITE_DISEASE dilcopy bitedisease@skaven();
#define RACE_SKAVEN 120

%zone skaven
title "Skaven Caves"
lifespan 20
reset RESET_ANYHOW
creators {"skay"}

notes
"The skavens are the rat people and plaguebearers of chaos, living in 
subterran camps. This particular one was discovered near the hidden 
valley, in the mountains. The camp is evolving rapidly as the skaven dig 
new tunnels continously and try to make a connection to their main 
temple. The area is designed for level 50 or groups of slightly lower 
levels. Cheers to Questor for his DIL, Volk for starting me on this 
project and to Palio for sponsoring and supporting it.&n
Email me at &c+wotap@dorit.ihi.ku.dk &cw&n
22.4.96 - Added Boozer Quest.&n
14.5.96 - Added diseased bite instead of poisonous one.&n
23.5.96 - Added Alake and her minor majics.&n
18.6.96 - Got that Goddamn Quest to work proper.&n
18.6.96 - Minor rent updates.&n
13.7.96 - Added Scyld Quest.&n"

help
"&l
     --------------------------------------------------------------
&c+r		Welcome among the skaven bearers of chaos.
   		  May your blood fertilise our lands
		and your screams bring joy to our ears.

				Enjoy
			
			     - Sk(r)ay -&cw
   ------------------------------------------------------------------
	
	The skavens are a race of rat-descendants, mutated by
     exposure to the warping forces of chaos. They embrace plague
 and disease, it pervades their body and soul. In their worship of the  
   Horned Rat, the Plague God, they seek to bring the purification
        to the rest of the world, an unholy cleansing of chaos.
	  
  	      Skavens are quick, sneaky and highly social,
	           highly skilled in working bronze 
			and brewing dark ale.

				Beware.

&f
&n"

%dil

#define SKAVEN_ON "Searching for skaven booze"
#define SKAVEN_DONE "Fooled by a skaven"
#define SCYLD_ON "Questing for the weapon of Scyldings"
#define SCYLD_DONE "Proved worthy of the waraxe of Scyldings"
#define FLUTE_ON "Aiding the elven minstrel"
#define FLUTE_QUEST "Aided the elven minstrel"

/* waraxe of Scyld quest restrict dil				*/

dilbegin no_scyld ();
code
{
act("You gasp as pain shoots through your hands!",
A_ALWAYS, self.outside,self,null,TO_CHAR);
act("You are not worthy of $2n! Prove yourself, then wield it!",
A_ALWAYS, self.outside,self,null,TO_CHAR);
act("$1n drops $2n with a hissing curse, sucking on $1s burned fingers!"
,A_SOMEONE,self.outside,self,null,TO_REST);
return;
}
dilend

/* ------------- Item Restrict Acts ---------------- */

dilbegin lvl_rest (amount:integer);
code
{
act("You need $3t more levels to use $2n.",
A_ALWAYS,self.outside,self,itoa(amount),TO_CHAR);
act("You drop it back on the ground in dismay.",
A_ALWAYS,self.outside,self,null,TO_CHAR);
act ("$1n frowns and removes $1s $2n, dropping it on the ground in dismay.",
A_SOMEONE,self.outside,self,null,TO_REST);
return;
}
dilend
 
dilbegin str_rest (min_abi:integer);
var
amount:integer;
code
{
amount:=min_abi-activator.abilities[ABIL_STR];
act("You are not strong enough to use $2n! Practice $3t pts more and try "+
"again!",A_ALWAYS,self.outside,self,itoa(amount),TO_CHAR);
act("You remove $2n and drop it with dismay.",
A_ALWAYS,self.outside,self,null,TO_CHAR);
act("$1n sweats under the weight of $2n and $1e drops it with dismay.",
A_SOMEONE,self.outside,self,null,TO_REST);
return ;
}
dilend
 
dilbegin con_rest (min_abi:integer);
var
amount:integer;
code
{
amount:=min_abi-activator.abilities[ABIL_CON];
act("You don't have enough stamina to effectivelly use $2n!&n"+
"Practice $3t more pts of Constitution and try again!",
A_ALWAYS,self.outside,self,itoa(amount),TO_CHAR);
act("You chuck $2n from you, blasted thing.",
A_ALWAYS,self.outside,self,null,TO_CHAR);
act("$1n sighs and drops $2n in dismay.",
A_SOMEONE,self.outside,self,null,TO_REST);
return ;
}
dilend
 
dilbegin dex_rest (min_abi:integer);
var
amount:integer;
code
{
amount:=min_abi-activator.abilities[ABIL_DEX];
act("You are obviously not agile enough to use $2n. Train $3t more Dex and"+
" try again!",A_ALWAYS,self.outside,self,itoa(amount),TO_CHAR);
act("You throw $2n away in anger.",
A_ALWAYS,self.outside,self,null,TO_CHAR);
act("$1n curses and drops $2n in anger.",
A_SOMEONE,self.outside,self,null,TO_REST);
return ;
}
dilend
 
dilbegin axe_rest (min_abi:integer);
var
amount:integer;
code
{
amount:=min_abi-activator.weapons[WPN_BATTLE_AXE];
act ("You are not skilled enough in the use of $2n! $3t pts of weapon "+
"skill needed for effective use!"
,A_ALWAYS,self.outside,self,itoa(amount),TO_CHAR);
act("You sigh and drop it to the ground."
,A_ALWAYS,self.outside,self,null,TO_CHAR);
act("$1n sighs and drops $2n to the ground.",
A_SOMEONE,self.outside,self,null,TO_REST);
return;
}
dilend

dilbegin cha_rest (min_abi:integer);
var
amount:integer;
code
{
amount:=min_abi-activator.abilities[ABIL_CHA];
act("This item requies a higher Charisma! Train $3t more and "+
"try again!",A_ALWAYS,self.outside,self,itoa(amount),TO_CHAR);
act("You sigh and drop $2n.",
A_ALWAYS,self.outside,self,null,TO_CHAR);
act("$1n sighs and drops $2n.",
A_SOMEONE,self.outside,self,null,TO_REST);
return ;
}
dilend 

dilbegin bra_rest (min_abi:integer);
var
amount:integer;
code
{
amount:=min_abi-activator.abilities[ABIL_BRA];
act("$2n requires a smarter user! You lack $3t pts of Brain!"
,A_ALWAYS,self.outside,self,itoa(amount),TO_CHAR);
act("You drop $2n, shocked over your own stupidity.",
A_ALWAYS,self.outside,self,null,TO_CHAR);
act("$1n's jaw falls open and $1e drops $2n, drooling slightly.",
A_SOMEONE,self.outside,self,null,TO_REST);
return ;
}
dilend

dilbegin mag_rest (min_abi:integer);
var
amount:integer;
code
{
amount:=min_abi-activator.abilities[ABIL_MAG];
act("Your magic is not potent enough to use $2n!&n"+
"Practice $3t points of Mag and try again!"
,A_ALWAYS,self.outside,self,itoa(amount),TO_CHAR);
act("With a heartfelt sigh you drop $2n.",
A_ALWAYS,self.outside,self,null,TO_CHAR);
act("$1n sighs and drops $2n.",
A_SOMEONE,self.outside,self,null,TO_REST);
return ;
}
dilend

dilbegin div_rest (min_abi:integer);
var
amount:integer;
code
{
amount:=min_abi-activator.abilities[ABIL_DIV];
act("You are not pious enough to use this item, disbeliever!&n"+
"Develop your Div by $3t pts and try again!",
A_ALWAYS,self.outside,self,itoa(amount),TO_CHAR);
act("With a sigh you drop $2n.",
A_ALWAYS,self.outside,self,null,TO_CHAR);
act("$1n sighs and drops $2n.",
A_SOMEONE,self.outside,self,null,TO_REST);
return ;
}
dilend

dilbegin bad_rest (max_ali:integer,min_ali:integer);
code
{
act("You drop $2n with a hiss of pain, smell of burned flesh spreads in "+
"the air.",A_ALWAYS,self.outside,self,null,TO_CHAR);
act("$1n drops $2n with a hiss of pain, smell of burned flesh spreads "+
"through the air.",A_SOMEONE,self.outside,self,null,TO_REST);

if (self.outside.alignment>MAX_ALI)
act ("$2n is an item of evil!",
A_ALWAYS,self.outside,self,null,TO_CHAR);
else
act ("$2n is an item of good!",
A_ALWAYS,self.outside,self,null,TO_CHAR);
return;
}
dilend

/* rats and skaven disease bite	and madness bite */

dilbegin bitedisease();
var
	enemy : unitptr;
	vict : unitptr;
	n : integer;
	flux : integer;
code
{
   :init:
   heartbeat := PULSE_SEC * 7;
   on_activation(self.position != POSITION_FIGHTING,skip);
   
   :start:
enemy := self.fighting;
vict := enemy;
flux := rnd(20,130);
if (flux > enemy.abilities[ABIL_CON])
{
act("&c+r$1n buries $1s teeth in your flesh, smelly saliva drips on the 
ground!&cw", A_SOMEONE,self,null,enemy, TO_VICT);
act("&c+y$1n buries $1s teeth in $3n's flesh!&cw", 
A_SOMEONE,self,null,enemy, TO_NOTVICT); 
n:=cast_spell(SPL_DISEASE_2,self,self,enemy,"");
enemy.hp := enemy.hp-(rnd(1,5));
pause;
goto start;
}
act("&c+wYou slap away $1n's head as $1e tries to bite you!&cw",
A_SOMEONE,self,null,enemy, TO_VICT);
act("&c+w$3n slaps away $1n's head as $1e tries to bite $3m!&cw",
A_SOMEONE,self,null,enemy, TO_NOTVICT); 
pause;
goto start;
}
dilend

dilbegin bitemadness();
var
	vict : unitptr;
	n : integer;
code
{
   	:init:
heartbeat := PULSE_SEC * 7;
on_activation(self.position != POSITION_FIGHTING,skip);
   
   	:start:
vict := self.fighting;
if (rnd(20,130) > vict.abilities[ABIL_CON])
{
act("&c+r$1n buries $1s teeth in your leg, the wound burns with poison!"
,A_SOMEONE,self,null,vict, TO_VICT);
act("&c+y$1n buries $1s teeth in $3n's leg, $3e vinces with pain!&cw", 
A_SOMEONE,self,null,vict, TO_NOTVICT); 
n:=cast_spell(SPL_DISEASE_1,self,self,vict,"");
vict.hp := vict.hp-(rnd(1,5));
pause;
goto start;
}
act("&c+w$1n aims a bite at your ankle but you kick $1m away!&cw",
A_SOMEONE,self,null,vict,TO_VICT);
act("&c+w$3n kicks $1n away, avoiding a particularly vicious bite!&cw",
A_SOMEONE,self,null,vict,TO_NOTVICT); 
pause;
goto start;
}
dilend

/* random burns and flames */

dilbegin brazier_burn();
var
     i : integer; 
     pc : unitptr;

code
{
   	:start:
heartbeat:=PULSE_SEC*3;
wait(SFB_CMD,(activator.type == UNIT_ST_PC)and
(activator.position!=POSITION_FIGHTING));
i := rnd(1,5);
pc := activator;
secure(pc,start);
if (pc.level>IMMORTAL_LEVEL) goto start;
pause;
if (i==1)
act("The flames dance softly in the brazier.",A_ALWAYS, pc, null, null, TO_ALL);
if (i==2)
act("A flame in the brazier sparks and blazes before fading again.",
A_ALWAYS, pc, null, null, TO_ALL);
if (i==3)
{
act("The smoke from the brazier makes your eyes water.",
A_ALWAYS, pc, null, null, TO_ALL);
exec("cough", pc);
}
if (i==4)
act("The heat of the burning brazier makes you feel hot and sweaty.",
A_ALWAYS, pc, null, null, TO_ALL);

heartbeat:=PULSE_SEC*10;
pause;
goto start;
}
dilend


dilbegin bonefire();
var
     i : integer; 
     pc : unitptr;
code
{

     :start:
     wait(SFB_DONE,(activator.type == UNIT_ST_PC));
     pc := activator;
     i := rnd (1,8);
if (pc.level>IMMORTAL_LEVEL)
{goto start;}
if (i == 1)
{
        act("The fire crackles and spits sparks.",
          A_ALWAYS, activator, null, null, TO_ALL);
}
if (i == 2)
{
        act("Smoke from the fire bites into your lungs!",      
          A_ALWAYS, activator, null, null, TO_CHAR); 
        act("You cough violently.",
          A_ALWAYS, activator, null, null, TO_CHAR);
        act("$1n coughs loudly in the thick smoke.",
         A_ALWAYS, activator, null, null, TO_REST);
}
if (i == 3)
{
        act("The flames blaze suddenly and then diminish again.",
          A_ALWAYS, activator, null, null, TO_ALL); 
}
if (i == 4)
{       
        act("The fire crackles loudly, a log breaks apart.",
          A_ALWAYS, activator, null, null, TO_ALL); 
}
	pause;
     	pause;
	pause;
	pause;
	pause;
	pause;
	goto start;
 
}
dilend
    

dilbegin spooky();
var
     i : integer;
     pc : unitptr;

code
{
     heartbeat := PULSE_SEC*5;
     	:start:
     wait(SFB_DONE,(activator.type == UNIT_ST_PC));
     pc := activator;
     i := rnd (1,30);
     if (pc.level >IMMORTAL_LEVEL)
     {
     goto start;
     }
pause;
if (i < 5)
{
     	act("A strange feeling creeps up your spine...",
          A_ALWAYS, pc, null, null, TO_CHAR);
	exec("shiver",pc);    
  	act("You feel a strange presence nearby!",
          A_ALWAYS, pc, null, null, TO_CHAR);
goto start;
}
if (i < 10)
{
        act("An eerie whisper startles you!",
          A_ALWAYS, pc, null, null, TO_CHAR);
        act("You search for the source of it, yet there is none!",  
          A_ALWAYS, pc, null, null, TO_CHAR);
     act("$1n looks up suddenly, as if startled by something...",
         A_ALWAYS, pc, null, null, TO_REST);
goto start;
}
if (i < 15)
{
        act("You hear soft sniggering somewhere in the shadows...",           
          A_ALWAYS, pc, null, null, TO_CHAR);
        act("You look around you, but only darkness can be seen...",
          A_ALWAYS, pc, null, null, TO_CHAR);
     act("$1n looks around with a paranoid look on $1s face.",
         A_ALWAYS, pc, null, null, TO_REST);
 
goto start;
}
if (i < 20)
{
        act("You hear the sound of water dripping in the distance...",
          A_ALWAYS, pc, null, null, TO_ALL);
goto start;
}


     goto start;

}
dilend

dilbegin ambush ();
var
   pc : unitptr;
code
{
   heartbeat := PULSE_SEC * 5;

   :start:
   nopriority;
   wait(SFB_CMD, activator.type == UNIT_ST_PC);

   pc := activator;
   secure(pc, start);   priority;
	if (pc.level >IMMORTAL_LEVEL)
{
 	goto start;
}

        exec("emote charges from the shadows!", self);
	exec("backstab "+pc.name, self);
	pause;
	exec("trip "+pc.name, self);
	pause;
	exec("trip "+pc.name, self);
	pause;
	pause;
	exec("trip "+pc.name, self);
	pause;pause;pause;
	exec("kick "+pc.name, self);
	pause;pause;pause;pause;pause;pause;pause;

}
dilend


dilbegin twohand (one : integer, two : integer);
code
{
   :init:
   self.value[0] := one ;

   :start:
   wait(SFB_CMD,((command(CMD_WIELD))or(command(CMD_REMOVE))));
   if ((("two" in argument)or("twohand" in argument)or
         ("twohanded" in argument)or("twohandedly" in argument))and
            (self.equip == 0)){
      block;
      self.value[0]:= two ;
      exec("wield "+self.name, activator);
   }
   else goto init;
   goto start;
}
dilend

%rooms

	skray_room
names {"beach","dreambeach"}
title "At the jewelled beach"
descr
"The crystal-clear waves of the warm, tropical sea gently caress the soft
sand under your feet. Light of the rising moon illuminates a ridiculously
beautiful beach and tall palm trees murmur softly in the background. A
fragnant, cooling breeze wanders in from the sea, takes a short stroll
around you, ruffling your hair, and lacking any better things to do,
returns to the sea again. A mindsurfer skims lazily a few feet over the
waves out in the water. Life is good."
extra {"sea","waves","water"}
"The water is a transparent sort of green-blue, the kind that makes a
grown man cry and wake up from his dreams... This is the kind of water
usually only seen dripping of a girl's naked body in a coloured magazines
of suspicious nature."
extra {"rising moon","moon","skies"}
"The moon is full. Staring at it makes your head spin. This kind of moon
puts odd thoughts in the minds of people. It surely puts odd thoughts in
your mind."
extra {"mindsurfer","surfer"}
"He leans back on his surfboard, held up by the sheer force of relaxation 
and happines. A large, slender fin at the rear of the slim mindboard rips 
the waves, creating the desired effect of large, foaming ripple, used to 
impress other people. You gotta admit, he's good at it."
extra {"palm trees","palm","trees","tree"}
"Slim, tall, containing coconuts and incredably relaxed. You think one of
them may also contains a small monkey but that may be just your wishful
thinking. In any case, the monkey is incredably relaxed too."
extra {"relaxed monkey","monkey"}
"Wow. You wish you could be THAT relaxed."
extra {"life"}
"Good. Never been better. Don't even suck. Not even the tiniest bit."
movement SECT_INSIDE
ALWAYS_LIGHT
flags {UNIT_FL_NO_WEATHER, UNIT_FL_INDOORS}
south to camp1 descr "The cruel and unforgiving world awaits there, no 
way back once you leave the dream!&n";
end
 
	camp1
names {"camp","entrance","canyon"}
title "A small canyon"
descr
"Your footsteps echo hollowly from the steep walls around you as you
walk through the deep canyon in the mountains. As you progress forth, you
realise that you actually walk a small path through the canyon and
caution your steps. Who knows what kind of monsters lurk at the next turn?&n
An old sign lies on the ground, smashed into pieces."
extra {"smashed sign","sign","pieces"}
"Scratching your head, you assemble the smashed wooden pieces into a 
barely readable sign reading:&n
'Warning! You are now entering the domain of chaos! Adventurers proceed 
on own responsibility ONLY!'&n
The signature on one of the smashed boards reads: 'Al Kazeem'. You recon,
denizens of those parts take a dislike to the law.&n"
extra {"$get","sign","pieces"}
"Yeah, sure, take off with a smashed sign. Ever considered how difficult 
it is to fence one of those? Thought not.&n"
extra {"path"}
"The path seems small and barely visible, yet it is there. Someone - or
something made this."
movement SECT_HILLS
north to camp2 descr "Certain death awaits there. Don't go.";
south to skaven_1@mount descr "Certain death awaits there.";
end

        camp2
names {"camp","entrance","canyon"}
title "A small canyon"
descr
"The walls of the canyon tower over you, leaving you in deep shadow. The
only visible way out of here seems be to the north or to the south, it
would be sheer folly to climb the vertical walls of the canyon,
especially in the heavy armour you seem to cherish so much."
extra {"walls","wall"}
"The walls are steep. Wanna climb it? Guess not.&n"
movement SECT_HILLS
romflags {UNIT_FL_NO_MOB}
north to camp3 descr "Certain death awaits there.";
south to camp1 descr "Almost-certain death awaits there.";
end

        camp3
names {"camp","entrance","canyon"}
title "Northern end of a canyon"
descr
"The canyon ends here rapidly, vertical walls surrounding you on all
sides. However, you spot a small opening high up on the north side. The
silence here is ringing in your ears, almost supernatural... You feel
watched."
extra {"opening","cave"}
"The opening seem to lead into a cave inside the cliff. Perhaps there is
something worth investigating (treasures, hoards of gold, priceless
weapons and of course an excessive amount of violent monsters)."
movement SECT_HILLS
up to camp4 descr "Cave. Dark. Forbidding. Go forth. Perfectly safe.";
north to camp4 descr "Cave. Dark. Forbidding. Go forth. Perfectly safe.";
south to camp2 descr "A canyon, narrow and windy.";
end

        camp4
names {"camp","entrance","cave"}
title "A cave opening"
descr
"You stand in the opening of a small cave, trying to adjust your eyes to
the light around you. The opening continues deeper into the mountainside
and you can hear faint noises ahead in the dark. Strange smell assaults
your nostrils... what is this place?"
extra {"opening","tunnel","cave"}
"The dark cave continues farther to the north.&n"
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp5 descr "As much as you stare in that direction, only darkness
greets you";
south to camp3 descr "Living on the edge. Of a mountainside.";
down to camp3 descr "Living on the edge. Of a mountainside.";
end

        camp5
names {"camp","cave","tunnel"}
title "A dark cave"
descr
"The cave leads north and south from here, becoming a narrow tunnel to
the north and a wide opening to the south. You can see the lights from
the outside to the south, but only darkness greets you from the north."
extra {"lights"}
"Looks like outside lights. You can tell by the quality of lightning.&n"
movement SECT_INSIDE
flags {UNIT_FL_INDOORS,UNIT_FL_NO_MOB}
north to camp6 descr "Certain death awaits there. Don't go.";
south to camp4 descr "Certain death awaits there. Don't go.";
end

        camp6
names {"camp","cave","tunnel"}
title "A split in the tunnel"
descr
"The narrow tunnel seems to split into several directions here. A fresh
breeze can be felt from the southbound corridor. Two different corridors
lead respectivelly east and west. On the north wall a large painted skull
catches your attention."
extra {"wall","skull"}
"A large, yellowing human skull grins at you. It has been elaborately
carved and painted in intricate designs. You marvel for a while at the
necro-art.&n"
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
east to camp7 descr "Certain death awaits there. Don't go.";
west to camp17;
south to camp5 descr "Certain death awaits there. Don't go.";
dilcopy spooky@skaven();
end

        camp7
names {"camp","cave","tunnel"}
title "A turn in a tunnel"
descr
"The narrow tunnel seems to take a turn here. A strange smell hangs in
the air... kind of like wet fur. Vague noises come from the north
direction as well as weak flickering of light. To the west the air feels
a bit more fresh."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp8 descr "Certain death awaits there. Don't go.";
west to camp6 descr "Certain death awaits there. Don't go.";
end

        camp8
names {"camp","cave","tunnel"}
title "A small cave"
descr
"A small cave opens in front of you. The formations here appear natural
but adapted to more comfortable living by someone. You spot several
beddings of moss and dried grass. Piles of dirt and bones litter the
ground and the stench is revolting. Several openings lead out of the
cave; one to the north, one to the west and a small one to the south."
extra {"bedding","bed","beddings","moss","grass"}
"The beddings seem to be old and stinky, yet apparently they serve their
purpose. Makes you feel sleepy.&n"
extra {"dirt","bones"}
"The dirt and bones cover the better part of the floor.&n"
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
west to camp9 descr "Certain death awaits there. Don't go.";
south to camp7 descr "Certain death awaits there. Don't go.";
north to camp10 descr "Certain death awaits there. Go! Now!";
dilcopy brazier_burn@skaven();
end

        camp9
names {"camp","cave","tunnel"}
title "A cave-in"
descr
"The tunnel continues for several yards until you approach a cave-in
ahead. The rocks completely block further progress. You notice a
half-rotten hand sticking out of the rubble... apparently someone got
caught in the collapse. The only way out appears to be the back east."
extra {"hand","rubble","rocks"}
"The hand sticking out of the rocks seem to be a skaven hand,
half-rotten and, as you notice upon closer investigation, gnawed upon.&n"
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
east to camp8 descr "Certain death awaits there. Don't go.";
dilcopy spooky@skaven();
end

        camp10
names {"camp","cave","tunnel"}
title "A wide tunnel"
descr
"The tunnel here is quite wide and comfortable but not very high. You
notice light at the south end of the corridor. To the north the tunnel
turn westwards and disappear in darkness."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp11 descr "Certain death awaits there. Don't go.";
south to camp8 descr "Certain death awaits there. Don't go.";
end

        camp11
names {"camp","cave","tunnel"}
title "A turn in a tunnel"
descr
"The tunnel turns softly here. You maneuver around the piles of garbage
covering the floor and back from the stench as insects scurry away at
your approach. To the south you spot a point of light at the end of the
tunnel, while to the west the way is covered in darkness."
extra {"pile","piles","garbage","floor"}
"The garbage is rotting slowly. On closer inspection it turns out to be
moulded clothes, bones and rotting flesh.&n"
extra {"insects","insect"}
"They scurry away as your light hits them. You stomp one of them with a
loud *CRACK* and for a second your boot is stuck to the slime under your
sole. Urgh.&n"
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
west to camp12 descr "Certain death awaits there. Don't go.";
south to camp10 descr "Certain death awaits there. Don't go.";
dilcopy spooky@skaven();
end

        camp12
names {"camp","cave","tunnel"}
title "A dark tunnel"
descr
"You walk the dark tunnel, fighting the nausea from the stench all around
you. The air is heavy and your footsteps sound hollow on the stone floor.
The corridor continues east and west."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
east to camp11 descr "Certain death awaits there. Don't go.";
west to camp13 descr "Certain death awaits there. Don't go.";
dilcopy spooky@skaven();  
end

        camp13
names {"camp","cave","tunnel"}
title "A dark intersection"
descr
"The tunnels here divide, one path leading east, another south and yet
another one upwards to the north. From the southern direction weak noises
can be heard and flickering of light betrays skaven presence."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp29 descr "Nothing there. Nevermore.";
up to camp29 descr "Certain death awaits there. Don't go.";
south to camp14 descr "Certain death awaits there. Don't go.";
east to camp12 descr "Nothing can be seen there.";
dilcopy spooky@skaven();
end

        camp14
names {"camp","cave","tunnel"}
title "A low tunnel"
descr
"The tunnel here is extremely low. Your stomach revolts as you close your
face to the floor - the stench of decay is overpowering. To the south you
can see the tunnel widening and becoming a large cave. Flickering light
casts shadows on the wall of the tunnel - fire is burning inside the cave."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp13 descr "Certain death awaits there. Don't go.";
south to camp15 descr "Certain death awaits there. Don't go.";
end

        camp15
names {"camp","cave"}
title "A large cave"
descr
"The tunnel widens rapidly and becomes a large cave. As you strech your
muscles and stand upright, you notice several bunks and fires lit around
in the cave. Some of the smoke disappears through cracks in the rocks but
most of it drifts away through the tunnels, filling the cave with
stinking gray haze. Many openings lead away from the cave."
extra {"bunks","bunk","bed"}
"The beddings seem to be some dried moss and grass tossed together under
piles of rags. They stink consideably. When did you last take a bath?&n"
extra {"fires","fire"}
"You poke some of the hot coals around and yelp as you suck on your burnt
fingers. Yep, it is fire allright.&n"
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp14 descr "Certain death awaits there. Don't go.";
south to camp17 descr "Certain death awaits there. Don't go.";
east to camp16 descr "Only darkness greets you there.";
west to camp18 descr "Only darkness greets you there.";
dilcopy bonefire@skaven();
end

        camp16
names {"camp","cave-in","tunnel"}
title "A collapsed tunnel"
descr
"The tunnels seem to have collapsed a few yards into the mountain. Large
rocks block your way - it seems that the only way out is to return back
west. A single clawed foot sticks out of the rabble - apparently someone
got caught under the collapse."
extra {"foot","rubble","rocks","collapse"}
"The foot is little more than bone with half-rotted flesh on it. As well
as rottened it has apparently also been gnawed upon."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
west to camp15 descr "Certain death awaits there. Don't go.";
dilcopy spooky@skaven();
end

        camp17
names {"camp","cave","tunnel"}
title "A dark and narrow tunnel"
descr
"The tunnel here turns sharply north-east. You can spot light comming
from thr north. Eastwards a slight breeze carries a bit of fresh air, a
relief from the fetid stench in these caves."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp15 descr "Certain death awaits there. Don't go.";
east to camp6 descr "Certain death awaits there. Don't go.";
end

        camp18
names {"camp","cave","tunnel"}
title "A broad tunnel"
descr
"The tunnel leads east and west, light can be seen in the eastern
direction, unfortunately accompagnied by a foul stench. To the west, the
corridor fades into darkness."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
east to camp15 descr "Light can be seen from that direction.";
west to camp19 descr "Certain death awaits there. Don't go.";
end

        camp19
names {"camp","cave","tunnel"}
title "Turn in a tunnel"
descr
"The tunnel turns sharply here, leading north and east. You can spot a
slight flickering of light in both ends of the corridor. Smell fills the
corridor, making you wonder how long you'll be able to explore this place
without serious damage to your health."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
east to camp18 descr "Certain death awaits there. Don't go.";
north to camp20 descr "Not-so-certain death awaits there. Go! Now!";
dilcopy spooky@skaven();
end

        camp20
names {"camp","tunnel"}
title "A wide tunnel"
descr
"The tunnel here is suprisingly wide. To the south you can vaguely spot a
turn in the tunnel, while to the north light streams into the corridor
from a larger cave. Stench of raw meat and blood hangs in the air."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp21 descr "You think you can see a large circus along with a
120' tall giant but that may just be the fumes doing their stuff.";
south to camp19 descr "Certain death awaits there. Don't go.";
dilcopy spooky@skaven(); 
end

        camp21
names {"camp","cave"}
title "A large cave"
descr
"You stand in a large cave, the celling disappearing in darkness far
above you. Light from several fires fall on scores of animal carcasses
and meatsides hanging above them, being smoked. A few hides of various
animals are streched on the floor, apparently waiting for being prepared.
The smoke from the fires seem to disappear into the darkness high above
you. Two exits lead away from the cave - north and south."
extra {"carcasses","carcass","animal","meatside","meatsides","sides","side"}
"The animal carcasses are still raw and bloodied. Besides, they stink
suspicously... you are not sure you want to touch that.&n"
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp22 descr "Certain death awaits there. Don't go.";
south to camp20 descr "A large tunnel opening is covered in darkness to the
south.";
dilcopy bonefire@skaven();
end

        camp22
names {"camp","cave","tunnel"}
title "A tunnel in the rock"
descr
"The tunnel snakes its way through the damp rock. A strong smell of raw
meat and blood assaults your nostrils from the south direction, while to
the north the tunnel disappears in darkness."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp23 descr "Darkness there and nothing more.";
south to camp21 descr "Certain death awaits there. Don't go.";
dilcopy spooky@skaven();
end

        camp23
names {"camp","cave","tunnel"}
title "A turn in the tunnel"
descr
"The dark corridor gently curves south and east where it descents into the
bowels of earth. Vague light can be seen in both directions. The tunnel
becomes wider to the south."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
east to camp24 descr "Nothing there... nothing at all.";
south to camp22 descr "Certain death awaits there. Don't go.";
dilcopy spooky@skaven();
end

        camp24
names {"camp","tunnel"}
title "A descending tunnel"
descr
"The tunnel descends from west to the eastwards direction. You also spot
another corridor connecting to it, a wide opening in the stone wall
leading northwards. From the east you can hear noises of several people."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp41 descr "More tunnels. Will this ever end? Oh god, will this
ever END??";
west to camp23 descr "Certain death awaits there. Don't go.";
east to camp25 descr "Sounds of several people as well as light come from
that direction.";
end

        camp25
names {"camp","tunnel"}
title "A tunnel"
descr
"The tunnel here continues to the west, while to the east it ends in a
large opening. You can see a large cave behind, light of several fires
playing on the corridor walls. You make a few shadow figures (including
'Deformed Rabbit') and move on."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
west to camp24 descr "More exciting tunnels! Yay!";
east to camp25a descr "Certain death awaits there. Don't go.";
end

        camp25a
names {"camp","cave","tunnel"}
title "Northwest end of a huge cave"
descr
"You stand at the northwest end of a huge cave. You can see several fires
sending their light through the opressive darkness and many shapes move
in the shadows. The floor of the cave is littered with broken bones,
excrements and other things, better left unidentified. There is a large
opening in the west wall and the cave continues to the east and south."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
west to camp25 descr "A large opening leads to a certain death.";
south to camp26 descr "Certain death awaits there. Don't go.";
east to camp28 descr "Cave all around you.";
dilcopy brazier_burn@skaven();
end

        camp26
names {"camp","tunnel"}
title "The southern end of a huge cave"
descr
"You stand in a huge cave, the celling above you disappearing in the
darkness. Several fires flicker in the opressive darkness and foul stench
fills the air. Shapes move in the murk and sounds can be heard all around
you. The cave continues to the north and east, while a large opening
leads south."
extra {"shapes"}
"The small shapes are but smeared-out phantoms in the oppressive darkness."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp25a descr "You think you can see a large circus along with a
120' tall giant but that may just be the fumes doing their stuff.";
south to camp29 descr "Certain death awaits there. Don't go.";
east to camp27 descr "The cave continues in that direction.";
dilcopy bonefire@skaven();
end

        camp27
names {"camp","cave","tunnel"}
title "Eastern end of a huge cave"
descr
"You stand in a huge cave, the celling disappearing in the gloom high
above you. Several fires lit the cave, dispersing smoke and flickering
light, more thickening the shadows than actually banishing them. The cave
continues to the west and north, while a tunnel opening is visible to the
east."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp28 descr "Gloom. Darkness.";
west to camp26 descr "Certain death awaits there. Don't go.";
east to camp30 descr "Death peers at you from around the corner. Join...";
end

        camp28
names {"camp","tunnel"}
title "North end of a huge cave"
descr
"You stand in a huge cave, foul smell of several fires hangs in the air.
In the deep shadows you can see shapes moving around. The celling of the
cave disappears in the gloom above you and all of sudden you feel
hunted... You can see a large opening to the north and the cave continues
to the south and west."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp46 descr "Darkness there and nothing more.";
south to camp27 descr "Certain death awaits there. Don't go.";
west to camp25a descr "Death and decay marks the way.";
dilcopy bonefire@skaven();
end

        camp29
names {"camp","tunnel"}
title "A north-south tunnel"
descr
"The tunnel is quite wide and comfortable. Light bounces on the walls,
casting strange shadows. You can see a large cave to the north and a
small pinpoint of light long away to the south. The foul stench assaults
your nostrils, a trusty companion on the journey."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp26 descr "Huge cave. Quick death.";
south to camp13 descr "Certain death awaits there. Don't go.";
down to camp13 descr "Certain death awaits there. Don't go.";
end

        camp31
names {"camp","tunnel"}
title "Intersection in a narrow tunnel"
descr
"The tunnels collide here, with one of them branching off to the north,
another one to the east and yet another to the west. Sounds of combat
come to you from the eastern direction and light falls in from the west.
The northern corridor is silent and dark."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
east to camp32 descr "The tunnel continues.";
west to camp30 descr "Certain death awaits there. Don't go.";
north to camp34 descr "Darkness, only darkness before you.";
dilcopy spooky@skaven();
end

        camp30
names {"camp","tunnel"}
title "A narrow tunnel"
descr
"The narrow tunnel continues in the east direction, while to the west it
enters a huge cave. Stench and noises meet you from that place. You
scratch your head and try to make up your mind."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
east to camp31 descr "An intersection in the tunnels is there.";
west to camp27 descr "Certain death awaits there. Don't go.";
end

        camp32
names {"camp","tunnel"}
title "A narrow tunnel"
descr
"You traverse the narrow tunnel, bumping your head into the rock and
scratching your body on sharp edges of the stone. Cursing your luck, you
take a quick look around you - the tunnel enters a large cave to the east
and disappears in darkness to the west."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
east to camp33 descr "A large cave, noises of fighting can be heard there.";
west to camp31 descr "Certain death awaits there. Don't go.";
dilcopy spooky@skaven(); 
end

        camp33
names {"camp","cave","tunnel"}
title "A large cave"
descr
"You enter a large cave with a single visible exit to the west. Trash
litters the ground and the cave is filled with thick smoke from the fire
in the middle of it."
extra {"trash"}
"The smell of the litter revolts you and discourages you from further
investigations."
extra {"smoke"}
"The thick smoke makes you cough and causes your eyes to water. Smells
like excrements burning."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
west to camp32 descr "Certain death awaits there. Don't go.";
dilcopy brazier_burn@skaven();
end

        camp34
names {"camp","corridor"}
title "A long corridor"
descr
"You are walking along a long corridor covered in darkness. To the south
you spot another corridor meeting yours and to the north darkness covers
the tunnel."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
south to camp31 descr "Certain death awaits there. Don't go.";
north to camp35 descr "Darkness reaches out to you.";
dilcopy spooky@skaven();
end

        camp35
names {"camp","corridor","tunnel"}
title "A long corridor"
descr
"You walk the long corridor for quite a while, seemingly without end.
Darkness covers the tunnel and silence is the only companion on your
journey. You proceed in the murk."
extra {"murk","darkness"}
"Impenetrable. Surely it holds a multitude of beastly hordes of
flesh-eating monsters and mind-boggling devourers. On the other hand, you
might just be lucky."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp36 descr "Certain death awaits there. Don't go.";
south to camp34 descr "Certain death awaits there. Don't go.";
dilcopy spooky@skaven(); 
end

        camp36
names {"camp","corridor","tunnel"}
title "A long corridor"
descr
"You walk the long corridor for quite a while, seemingly without end.
Darkness covers the tunnel and silence is the only companion on your
journey. You proceed in the murk."
extra {"murk","darkness"}
"Impenetrable. Surely it holds a multitude of beastly hordes of
flesh-eating monsters and mind-boggling devourers. On the other hand, you
might just be lucky."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp37 descr "Certain death awaits there. Don't go.";
south to camp35 descr "Certain death awaits there. Don't go.";
dilcopy spooky@skaven();
end

        camp37
names {"camp","corridor","tunnel"}
title "A long corridor"
descr
"You walk the long corridor for quite a while, seemingly without end.
Darkness covers the tunnel and silence is the only companion on your
journey. You proceed in the murk."
extra {"murk","darkness"}
"Impenetrable. Surely it holds a multitude of beastly hordes of
flesh-eating monsters and mind-boggling devourers. On the other hand, you
might just be lucky."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp38 descr "Certain death awaits there. Don't go.";
south to camp36 descr "Certain death awaits there. Don't go.";
dilcopy spooky@skaven();
end

        camp38
names {"camp","corridor","tunnel"}
title "A long corridor"
descr
"You walk the long corridor for quite a while, seemingly without end.
Darkness covers the tunnel and silence is the only companion on your
journey. You proceed in the murk."
extra {"murk","darkness"}
"Impenetrable. Surely it holds a multitude of beastly hordes of
flesh-eating monsters and mind-boggling devourers. On the other
hand, you might just be lucky."
movement SECT_INSIDE flags {UNIT_FL_INDOORS}
north to camp39 descr "Certain death awaits there. Don't go.";
south to camp37 descr "Certain death awaits there. Don't go.";
dilcopy spooky@skaven();
end

        camp39
names {"camp","corridor","tunnel"}
title "A long corridor"
descr
"You walk the long corridor for quite a while, seemingly without end.
Darkness covers the tunnel and silence is the only companion on your
journey. You proceed in the murk."
extra {"murk","darkness"}
"Impenetrable. Surely it holds a multitude of beastly hordes of
flesh-eating monsters and mind-boggling devourers. On the other
hand, you might just be lucky."
movement SECT_INSIDE flags {UNIT_FL_INDOORS}
north to camp40 descr "Certain death awaits there. Don't go.";
south to camp38 descr "Certain death awaits there. Don't go.";
dilcopy spooky@skaven();
end

        camp40
names {"camp","cave","lake"}
title "Near a subterran lake"
descr
"You enter a huge cave, the celling of the grotto fading into darkness
high above you. Scent of fresh water greets you - a huge lake opens in
front of you, the black waters calm and cold. In the firelight you notice
no other exits from the cave but the tunnel entrance to the south,
fortunately above water level."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
south to camp39 descr "Certain death awaits there. Don't go.";
dilcopy bonefire@skaven();
end

        camp41
names {"camp","corridor","tunnel"}
title "A dark tunnel"
descr
"The tunnel becomes taller as you walk. You can see light to the north  -
the tunnels seems to enter a large open area there. To the south another
corridor crosses the tunnel."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp42 descr "Certain death awaits there. Don't go.";
south to camp24 descr "Certain death awaits there. Don't go.";
end

        camp42
names {"camp","cave","tunnel"}
title "A hot cave"
descr
"Wave of heat greets you as you enter this cave. The red light in the
cave seems to originate from a large furnace in the middle of it. The
smell is intensified by the heat and almost makes you faint. Two apparent
exits lead away from the cave, one to the east and one to the south."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
east to camp43 descr "Certain death awaits there. Don't go.";
south to camp41 descr "Certain death awaits there. Don't go.";
west to camp52 descr "A curious cave opens to the west of here.";
end

        camp43
names {"camp","corridor","tunnel"}
title "A narrow corridor"
descr
"The narrow corridor leads east and west, while another opening is
visible in the north wall. To the west the corridor widens and becomes a
large cave. Heat emanates from this direction. To the north and east only
darkness greets you."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp51 descr "Certain death awaits there. Don't go.";
east to camp44 descr "Certain death awaits there. Don't go.";
west to camp42 descr "Heat emanates from this direction.";
end

        camp44
names {"camp","corridor","tunnel"}
title "A tunnel in the rock"
descr
"The dark tunnel is a hard place to traverse and you experience
repeatedly the joy of head-bumping, stumbling, toe-thumping and being
stuck. On the bright side, you alse seriously expand your vocabulary as
swearwords and curses are concerned."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
west to camp43 descr "Very much like your mother-in-law, dark and
forbidding.";
east to camp45 descr "Certain death awaits there. Don't go.";
end

        camp45
names {"camp","corridor","tunnel"}
title "An intersection in the dark tunnel"
descr
"Choices, choices. Once again you find yourself at a three-way
intersection in this smelly place. You can spot light both to the north
and south and feel warm breeze from the west. The stench is the same in all
directions."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
west to camp44 descr "Very much like your mother-in-law, dark and
forbidding.";
south to camp46 descr "Certain death awaits there. Don't go.";
north to camp47 descr "A wear pinpoint of light can be seen in the
distance.";
dilcopy spooky@skaven();
end

        camp46
names {"camp","corridor","tunnel"}
title "A tunnel in the rock"
descr
"The dark tunnel is a hard place to traverse and you experience
repeatedly the joy of head-bumping, stumbling, toe-thumping and being
stuck. On the bright side, you alse seriously expand your vocabulary as
swearwords and curses are concerned. Joyously, you can see a large cavern
to the south."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
south to camp28 descr "Very much like your mother-in-law, dark and
forbidding.";
north to camp45 descr "Certain death awaits there. Don't go.";
end

        camp47
names {"camp","corridor","tunnel"}
title "A tunnel in the rock"
descr
"You walk through the tunnel, meandering its way through the mountain.
To the north the smell intensifies, you can almost cut through it. To the
south the tunnel is submerged in darkness."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
south to camp45 descr "Very much like your mother-in-law, dark and
forbidding.";
north to camp48 descr "Certain death awaits there. Don't go.";
end

        camp48
names {"camp","cave","tunnel","cairn"}
title "A cairn cave"
descr
"You enter a large cave, well-lit by the fires. In the middle of the cave
a large cairn has been erected, a large banner of the Plague God raised
from the middle of it. Bowls with various offerings, one more disgusting
than another, have been placed in front of the cairn. Two openings lead
away from this unholy place, one to the south and one to the west."
extra {"blood"}
"The blood seem to have coangulated some time ago."
extra {"cairn","stones"}
"The cairn is a simple mound of stones. Upon closer examination you
discover that they are covered with blood."
extra {"banner"}
"&lThis huge holed and rotting banner bears the twisted sigil of 
the Plague God along with an old skaven proverb:
 
          /\                           /\     
         /  \___/\______  _______/\___/  \   
         \     /  \     \/      /  \     /      
  Only the insane have strength enough to prosper.
           \ /Only those that prosper\ /
           can truly judge what is sane.
             \____   __\   /__   ____/
                  \  \  \_/  /  /
                   \__\     /__/
                       \   /
                        \_/

&f&n"
extra {"bowls","offerings"}
"The bowls are filled with flesh, blood, bones, excrements, vomit and
spit. Feel like offering some as well?&n"
movement SECT_INSIDE
flags {UNIT_FL_INDOORS,UNIT_FL_NO_TELEPORT}
west to camp49 descr "Very much like your mother-in-law, dark and
forbidding.";
south to camp47 descr "Certain death awaits there. Don't go.";
dilcopy brazier_burn@skaven();
end

        camp49
names {"camp","corridor","tunnel"}
title "A tunnel in the rock"
descr
"You stand in a short tunnel, connecting two caves, one to the east and
one to the west. Light is seen from both directions and the stench is
foul either way."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
west to camp50 descr "Very much like your mother-in-law, dark and
forbidding.";
east to camp48 descr "Certain death awaits there. Don't go.";
end

        camp50
names {"camp","cave","tunnel"}
title "A small cave"
descr
"You enter a small cave, filled with litter and bones. A small area seems
to have been cleared to make place for a small bedding. A small cairn of
stones was raised in one end of the cave. Two openings lead away from the
cave, one to the east and one to the south."
extra {"cairn","stones"}
"A small cairn of stones, you notice several stones are wet with blood
and vomit."
extra {"blood","vomit"}
"Yummie."
extra {"litter","bones"}
"Various dirt cover the floor, along with human and animal bones."
extra {"bedding"}
"The bedding is a simple matter of dried moss and animal hide."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS,UNIT_FL_NO_TELEPORT}
south to camp51 descr "Very much like your mother-in-law, dark and
forbidding.";
east to camp49 descr "Certain death awaits there. Don't go.";
end

        camp51
names {"camp","corridor","tunnel"}
title "A tunnel in the rock"
descr
"You walk a tunnel in the rock. To the north you can see firelight
through an opening. To the south the tunnel runs into another corridor."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
north to camp50 descr "Very much like your mother-in-law, dark and
forbidding.";
south to camp43 descr "Certain death awaits there. Don't go.";
end

        camp52
names {"camp","cave","lair"}
title "A small cave"
descr
"This cave is rather small and almost completely filled with garbage. 
Rags, bones, bottles and other litter covers the floor, some of it 
decaying and all of it smelling. Stench of half-digested alcohol fills 
the room. There is a hole in the east wall, seemingly leading to a larger 
cave."
movement SECT_INSIDE
flags {UNIT_FL_INDOORS}
east to camp42 descr "Large and hot cave.";
end

%mobiles

	alake
names {"Alake","girl","Woodoo girl"}
title "Alake the Woodoo girl"
descr "Alake the Woodoo girl stands here, selling mystic items."
extra {}
"A slender human girl with dark ebony skin. Her raven-black hair have 
been braided in countless tiny braids hanging down her back. Each braid 
ends in brass beads of blue and orange colours. Her graceful, almost 
dancelike movements cause the beads to clash musically, sounding like 
hundreds of tiny bells."
M_SHOP_KEEPER(30, SEX_FEMALE, RACE_HUMAN)
MSET_ABILITY(10,20,10,10,15,25,5,5)
money 3 GOLD_PIECE
exp -300
alignment 750
special SFUN_RANDOM_ZONE_MOVE time 160 bits SFB_RANTIME

dilbegin alake_wodoo();
var
	room : unitptr;
	vict : unitptr;
code
{
   :start:
   heartbeat := PULSE_SEC*5;
   wait(SFB_COM, ((activator.type == UNIT_ST_PC) and
       (activator.name $= self.fighting.name)));
	vict := activator;
{
self.hp := self.max_hp;
exec("emote takes a few dance steps, avoiding your savage blows gracefully."
, self); 
act("Alake chants in a sing-song voice, you gasp as the world collapses "+
"around you!", A_ALWAYS,self.fighting,null,null,TO_CHAR);
act("Alake chants in a sing-song voice, $3n gasps as $3e fades from "+
"reality!", A_ALWAYS,self,null,activator,TO_NOTVICT);
room := findroom("dump@udgaard");
link(self.fighting, room);
exec("look",self.fighting);
pause;
exec("emote laughs merrily.", self);
nopriority;
goto start;
}
}
dilend

dilbegin alake_nosteal();
var
	room : unitptr;
	vict : unitptr;
code
{
   	:init:
	heartbeat := PULSE_SEC*1;

	:start:
wait (SFB_CMD,(command(CMD_STEAL))and(("alake" in argument)or	
("girl" in argument)or("Woodoo girl" in argument)));

block;
vict := activator;
secure(vict,damnleft);
self.hp := self.max_hp;
act("As you try to steal from Alake, she notices it and her eyes narrow!",
A_ALWAYS,self,null,vict,TO_VICT);
act("Alake notices $3n's pathetic attempt of thievery and her eyes narrow!",
A_ALWAYS,self,null,vict,TO_NOTVICT);
act("Alake whispers a few words under her breath and suddenly the scenery "+
"around you changes!",A_ALWAYS,self,null,vict,TO_VICT);
act("Alake whispers a few words under her breath, $3n screams wordlessly "+ 
"and disappears!",A_ALWAYS,self,null,vict,TO_NOTVICT);
room := findroom("square@udgaard");
link(vict,room);
exec("look",vict);
unsecure(vict);
pause;pause;
exec("giggle",self); 
goto start;

	:damnleft:
exec("giggle", self);
unsecure(vict);
goto start;
}
dilend

dilcopy shopkeeper@function(
{"beads_necklace@skaven 5 10","fire_charm@skaven 6 12", 
"ear_jangles@skaven 6 12","gold_bangle@skaven 5 10",
"silver_bangle@skaven 5 10","silver_ringlets@skaven 6 12", 
"cat_amulet@skaven 5 10","rune_bones@skaven 8 16"}, 
{
 "$1n shakes her head, braids jiggling 'Not 'ere, mon!'",
 "$1n raises her eyebrow sceptically, 'And where is such thing, $3n?'",
 "$1n smiles 'Not fer me, mon!'",
 "$1n chuckles 'Get wealthy, then we can talk, mon.'",
 "$1n grins, 'Here you are, genuine woodoo majic!'",
 "$1n says, 'Ye go a deal there, mon.'",
 "$1n sighs, 'Low on warez, mon... try later.'",
 "$1n says, 'Gimme a break, mon. I can't work all the time...'"
  },{"3","23"}, "2 3 4 8 10", 100, 50,2*PLATINUM_MULT,"", "" );

end

        plaguebearer
names {"skaven","bearer","plaguebearer","ratling"}
title "skaven plaguebearer"
descr "A dirty skaven stands here, preaching strange gospel."
extra {}
"A strange humanoid creature with a rat's head and tail. The gaunt body 
is covered in mottled, gray-brown fur and the hands and feet are topped 
with sharp claws. The stench of vomit, sweat and dirt hangs around the 
ratling like a thick curtain." 
race RACE_SKAVEN  
sex SEX_MALE
level 55
exp 120
money 5 COPPER_PIECE
NATURAL_DEF(WPN_CLAW,ARM_LEATHER)
height 150
weight 120
alignment -900
MSET_ABILITY(13,25,17,20,15,4,1,5)
MSET_WEAPON(15,15,15,15,10,10)       /* 80/20 */
MSET_SPELL(2,0,0,2,1,2,2,2,2,5,2)
M_BITE_DISEASE
special SFUN_RANDOM_GLOBAL_MOVE time PULSE_SEC*100
romflags {CHAR_SNEAK}
special SFUN_TEAMWORK"skaven"
   
dilbegin plaguebearer ();
var
   pc : unitptr;
code
{
   heartbeat := PULSE_SEC * 4;

   :start:
   on_activation(self.position == POSITION_FIGHTING,skip);
   nopriority;
   wait(SFB_CMD, activator.type == UNIT_ST_PC);
        
   pc := activator;
   secure(pc, start);
   priority;  
    if (pc.level >IMMORTAL_LEVEL)
     {
      goto start;
      }

	exec("cough", self);
        pause;
        exec("point "+pc.name, self);
        pause;
	exec("emote spits out a huge blob of blood and vomit.", self);
	pause;
	exec("whisper "+pc.name+" Hasth Thou the Faith to face Thee True "+
	"God?!?", self);
	exec("say He is watching Thee, will burn out Thy Sins in the fire "+
	"of the Plague!!", self);
	pause;
	exec("cackle", self);
	pause;
	exec("emote shouts 'Thou knowesth not the Day, nor the Hour of Thy "+
	"Judgement!'", self);
	pause;
	pause;
	exec("emote tries to speak but colapses as violent cough spasms "+
	"shake his body.", self);
	pause;
	exec("emote coughs violently, you back up from the spit.", self);
	pause;
	exec("emote shrieks 'Accept Thy Renewal "+pc.name+", be reborn in "+
	"the Name of Thy God!", self);
	exec("emote drools a thin line of bloody mucus.", self);
	pause;
	pause;
	exec("emote whispers in a weak voice 'Spread the Word... The Lord "+
	"of Plague is near...", self);
	pause;
	exec("emote grabs your arm and pulls you close, you recoil from "+
	"the massive stench!", self);
	pause;
	exec("whisper "+pc.name+" Accept the Cleansing... and live beyond "+
	"the grasp of Death...", self);
	pause;
	pause;
	exec("nod "+pc.name, self);
	pause;
	pause;
	pause;
	exec("cackle", self);
	pause;
	goto start;
}

dilend

end


        skboozer
names {"boozer","skaven","old"}
title "a skaven boozer"
descr "An old skaven boozer sits here staring into space."
extra {}
"A strange creature with a rat's head and tail. The body is covered in 
gray-brown fur and the hands and feet end in strong, sharp claws. The 
stench of ale is heavy in the air. Apparently this one enjoys a sniff of 
booze now and then." 
race RACE_SKAVEN
sex SEX_MALE
level 65
exp 115
money 8 SILVER_PIECE
NATURAL_DEF(WPN_CLAW,ARM_LEATHER)
height 148
weight 125
alignment -600
MSET_ABILITY(15,35,10,20,10,4,1,5)
MSET_WEAPON(25,10,10,10,10,10)       /* 80/20 */
MSET_SPELL(2,0,0,2,1,2,2,2,2,10,2)
romflags {CHAR_SNEAK}
M_BITE_DISEASE
special SFUN_TEAMWORK"skaven"


dilbegin queststarter ();
var
	pc : unitptr;
	item : unitptr;
code 
{
   	:init:
	on_activation(self.position == POSITION_FIGHTING,skip);
	heartbeat := PULSE_SEC * 4;
 
	:start:
   wait(SFB_DONE,(not(command(CMD_GIVE)))and(activator.type == UNIT_ST_PC));
   pc := activator;
   secure(pc,gone);

if((SKAVEN_DONE in pc.quests)or(SKAVEN_ON in pc.quests))
{
      unsecure(pc);
      goto start;
}

else
{
exec("emote smirks &c+w'Heh, a homid!? In here..?&cw",self);pause;
exec("say "+pc.name+", isn't it? I've heard aboutcha.",self);pause;
exec("nudge "+pc.name,self);
exec("say Ya dawg ya...",self);pause;
exec("peer",self);pause;
exec("say Ya ain't got any funky booze on ya, have ya?",self);pause;
exec("emote shakes a jug of skaven ale, some of it splashes on "+
"the ground and starts to eat away the stone.",self);pause;     
exec("say This stuff lost its potence...",self);pause;
exec("sigh "+pc.name, self);pause;
exec("say See for yeself...",self);pause;
exec("emote gives you a jug of skaven ale.",self);
   item := load("skale@skaven");
   link(item,pc);pause;
exec("say What I really need, "+pc.name+", is a heavy-hitter!",self);
exec("wink "+pc.name, self);pause;
exec("say Say, why dontcha get me some booze and we'll mix sum "
+"stuff people'll kill to get?!? ", self);pause;
exec("think", self);
exec("say I'll need sum of the green stuff. Best beer there is.",self);
pause;
exec("say And some good, ole, rotten wine... yeah...",self);pause;      
exec("say Hmm...some vodka'd do good. Make it a barrel, for the "
+"hangover.", self);pause;
exec("emote looks at you thoughtfully.",self);
exec("say And a flagon of ale to make the taste lighter...",self);pause;
exec("say A tropical drink would finish it off perfectly..."+
" how about a Mai-Ti?",self);pause;
exec("say Ah, not to forget: I need a worthy drinking goblet..!",self);
exec("grin "+pc.name, self);pause; 
exec("say Silver one should do the trick, no "+pc.name+"?",self);
exec("wink "+pc.name, self);pause;
exec("say Whatcha say, wanna do it?",self);
exec("say Just shake or nod yer head, me hearing is not as it was!",self);

      	:nod:
      wait(SFB_CMD,(activator == pc));
      if(command(CMD_SHAKE) == TRUE)
      	{
         pause;
         exec("say Ya sad git... whatcha expect from a homid...",self);pause;
         exec("spit ",self);pause;
         exec("say If ya change yer mind, lemme know.",self);pause;
         unsecure(pc);
         goto start;
      	}
      if(command(CMD_NOD) == TRUE)
      	{
         addextra(pc.quests,{SKAVEN_ON},"");
         pause;
	 exec("say Allright, "+pc.name+", ye dawg!",self);pause;
	exec("emote gives you a shiny penny for the road.",self);
   		item := load("penny@skaven");
   		link(item,pc);pause;
	exec("emote winks &c+w'Get me the stuff and there will be another "+
"of those waiting for you!'&cw", self);pause;         
         exec("say Now beat it and bring me the booze!",self);pause;
         unsecure(pc);goto start;
        }
	else
	{
	goto nod;
	} 
}
	:gone:
exec("shrug ",self);
exec("say Damn homid bastards.",self);
unsecure(pc);
goto start;
}
dilend

dilbegin receivestuff();
var
	pc : unitptr;
	item : unitptr;
	inve : extraptr;
code 
{
	:init:	
   heartbeat := PULSE_SEC* 4;
	
	:start:
wait(SFB_DONE,(activator.type == UNIT_ST_PC)and
(SKAVEN_ON in activator.quests));
   pc := activator;
   secure(pc,gone);
   inve := SKAVEN_ON in pc.quests;   
 
if (command(CMD_GIVE)and(target==self))
{
item := medium;
secure(item,gone);
inve := SKAVEN_ON in pc.quests;

if ("green tuborg" in item.name)
  {
      	if ("green tuborg" in inve.names)
	{goto already;}
	else
	{
	addstring(inve.names,"green tuborg");
  	exec("say Aaah, yes!", self);
      	pause;
      	exec("say Perfect!",self);
      	destroy(item);
      	goto allstuff;
	}
   }
if ("rotten wine" in item.name)
{
      	if ("rotten wine" in inve.names)
	{ goto already;}
	else
	{
	addstring(inve.names,"rotten wine");
      	exec("emote sniffs the mug suspiciously.",self);pause;
      	exec("cackle",self);pause;
      	exec("nudge "+pc.name,self);
      	destroy(item);
      	goto allstuff;
	}
   }
if ("hikas' vodka barrel" in item.name)
{
	if ("hikas' vodka barrel" in inve.names)        
        { goto already;}
        else
        {
    	addstring(inve.names,"hikas' vodka barrel");
      	exec("emote peers into the barrel.",self);
      	pause;
      	exec("emote dips his head in the barrel and pulls it out, dripping "+
"with vodka.",self);pause;
      	exec("burp", self);pause;
      	exec("grin "+pc.name, self);
      	destroy(item);
      	goto allstuff;
	}
   } 
if ("zagyg's flowing flagon" in item.name)
{
	if ("zagyg's flowing flagon" in inve.names)
	{ goto already; }
	else
	{
      	addstring(inve.names,"zagyg's flowing flagon");
      	exec("emote shakes the flagon, peering in it..",self);
      	pause;
      	exec("say Eternal drink... oooh, I'm in heaven...",self);
      	pause;
      	exec("dance self", self);
      	destroy(item);
      	goto allstuff;
	}
  }
if ("mai-ti" in item.name)
{
      	if ("mai-ti" in inve.names)
	{ goto already;}
	else
	{
	addstring(inve.names,"mai-ti");
      	exec("emote examines the tropical drink carefully.",self);
      	pause;
      	exec("say Yeah, that will do.",self);pause;
      	destroy(item);
      	goto allstuff;
	}
}  
if ("wine goblet" in item.name)
   {
	if ("wine goblet" in inve.names)
	{ goto already; }
	else
	{
       	addstring(inve.names,"wine goblet");
      	exec("whistle",self);
      	pause;
      	exec("emote admires the silver goblet in the firelight.",self);
      	pause;
      	exec("say Worth a buck or two... nice job, "+pc.name, self);
      	goto allstuff;
	}
   }
else
   {
	unsecure (pc);
	goto start;
   }
}
goto allstuff;

	:already:
exec("say Heh, you already gave me that.",self);pause;
exec("emote mumbles something about drunken sods.",self);
unsecure(pc);
goto start;

	:allstuff:

if (("green tuborg" in inve.names)and("rotten wine" in inve.names)and
("hikas' vodka barrel" in inve.names)and
("zagyg's flowing flagon" in inve.names)and("wine goblet" in inve.names)
and("mai-ti" in inve.names)) 
goto complete;

else 
{ 
unsecure (pc);
goto start; 
}

	:complete:
   subextra(pc.quests, SKAVEN_ON);
   addextra(pc.quests,{SKAVEN_DONE},"");
   experience(5000,pc);
   exec("say "+pc.name+", ye dawg!",self);
   exec("cackle ",self);pause;
   exec("say Now... what comes first..?", self);pause;
   exec("think", self);pause;
   exec("puke "+pc.name, self);pause;
   exec("say Sorry about that, ol' mate.",self);
   exec("emote dries his muzzle with his sleeve.", self);pause;
   exec("emote pours some Tuborg into the silver goblet.",self);pause;
   exec("emote takes a huge swing from the barrel.",self);
   exec("burp ",self);pause;
   exec("emote carefully adds some vodka to the mixture. ",self);pause;
   exec("emote pours a solid measure of the ale into the goblet.",self);pause;
   exec("emote sniffs the drink and tastes it carefully.",self);pause;
   exec("emote shrugs and pours more vodka into the goblet.",self);pause;
   exec("emote tastes the Mai-Ti carefully and adds it to the"+
"mixture." ,self);pause;
   exec("emote pours the contents of the rotten mug into the goblet, "+
"cackling.", self);
   exec("emote sniffs the finished drink and examines it in the firelight."
,self);pause;
   exec("emote swallows the drink in one go!",self);
   exec("burp",self);pause;
   exec("say Ooohh... thashs the shhtufff.... good sh*HIC*ff...",self);pause;
   exec("emote tosses you a shiny penny.",self);
   item := load("penny@skaven");
   link(item,pc);pause;
   exec("say Don'th shpend it all in one plache, "+pc.name+".",self);pause;
   exec("burp ",self);pause;
   unsecure(pc);
   goto start;
 
   :gone:
   unsecure(pc);
   goto start;
}
dilend
end

        skdrunk
names {"skaven drunk","skaven","drunk"}
title "a drunk skaven"
descr "A skaven stumbles around, belching and reeking of ale."
extra {}
"A strange creature, with a rat's head and tail and strong claws at the 
end of his hands and feet. The body is covered in gray-brown fur. The 
stench of ale is heavy in the air, as well as stench of old vomit and 
urine." 
race RACE_SKAVEN
sex SEX_MALE
level 55
exp 110
money 2 COPPER_PIECE
NATURAL_DEF(WPN_CLAW,ARM_LEATHER)
height 153
weight 132
alignment -679
MSET_ABILITY(20,25,15,20,10,4,1,5)
MSET_WEAPON(25,10,10,15,10,10)       /* 80/20 */
MSET_SPELL(2,0,0,2,1,2,2,2,2,5,2)
romflags {CHAR_SNEAK}
M_BITE_DISEASE
special SFUN_TEAMWORK"skaven"
special SFUN_RANDOM_ZONE_MOVE time PULSE_SEC*120
special SFUN_SCAVENGER

dilbegin drunk_skaven();
var
        pc : unitptr;
        song : integer;
        move : integer;
code
{
   heartbeat := PULSE_SEC * 6;

   :start:
   on_activation(self.position == POSITION_FIGHTING,skip);
   unsecure(pc);
   nopriority;
   wait(SFB_CMD, activator.type == UNIT_ST_PC);

   song := rnd(1,100);
   move := rnd(1,100);
   pc := activator;
   secure(pc, start);
   priority;
    if (pc.level >IMMORTAL_LEVEL)
     {
      goto start;
      }
if (song < 30)
{
        exec("emote staggers around drunkenly.", self);
        pause;
        exec("emote screeches 'Itsh sho QUIET..!'", self);
        exec("emote stumbles and falls.", self);
        pause;
        exec("emote screeches 'Itsh OOOOH! sho ... STHIIIIIILL!!!!'", self);
        pause;
        exec("emote screeches 'Youshe all a-bleeding-LONE!!!", self);
        exec("emote scrambles to his feet.", self);
        pause;
        exec("emote screeches 'And sho PEEAAAACEFCHULL UNTCHILLLL!!!!!", 
self);
        exec("emote projectile-vomits straight on your clothes!", self);
        pause;
        exec("emote takes a solid swing from the jug.", self);
        goto wander;
}
else if (song < 60)
{
    exec("emote burps and dries his mouth.", self);
    pause;
    exec("emote whines 'Darshling, SHTOP confhushing MEEEEE...!! '",self);
    pause;
    exec("emote pours some ale into his mouth.", self);
    pause;
    exec("emote screeches '...withs youse whishfchull 
thEEEnkiiiiiiing!!'",self);
    exec("emote loses his balance and bumps into you, leaving a huge "+
    "print of vomit and ale on your clothes.", self);
    pause;
    exec("emote yells 'Hopeshfull embrashceeees...!!!'", self);
    exec("burp", self);
    pause;
    exec("emote mumbles '..shomething lalalala... shtupid git..'", self);
    exec("puke "+pc.name, self);
    pause;
    exec("emote drinks deeply and bonks into the wall.", self);
    goto wander;
}
else if (song < 90)
{
    exec("emote shakes the jug, then takes a huge gulp.", self);
    exec("burp", self);
    pause;
    exec("emote screams 'I neeeeeeeed perfchectchiOOOOOON!!'",self);
    exec("drool self", self);
    pause;
    exec("emote screeches '..schome thwisted schelecthiOOOOOOON...!'",self);
    pause;
    exec("emote yells '...that tchanglesh MEEEEEEEE!'", self);
    exec("emote bumps hard into the wall and rebounds back.", self);
    pause;
    exec("emote shrieks 'And keep me alivEEEEEEEEEEEEEEEEEE!!'", self);
    pause;
    exec("emote mumbles 'Yeah... schuck you, homid... whatcha "+
    "lookin' at..?",self);
    pause;
    goto wander;
}
else
{
   exec("emote takes a huge gulp from the jug, ale drips down his chin.", 
self);
   exec("peer", self);
   pause;
   exec("emote mumbles 'Whatcha lookin' at, ye schtinkin' schorry "+
   "schon offa ape..?'", self);
   pause;
   exec("emote belches 'Schtand still while I shmash ye into a "+ 
   "bloody pulp, ye friggin' apeshlover...'", self);
   pause;
   exec("emote bumps into a wall and scratches his head confused", self);
   goto wander;
}
    
   :wander:
if (move < 25)
{
        exec("emote stumbles away.", self);
        exec("north", self);
        pause;
        goto start;
}
else if (move < 50)
{   
        exec("emote stumbles away.", self);
        exec("south", self);
        pause;
        goto start;
}
else if (move < 75)
{
        exec("emote stumbles away.", self);
        exec("east", self);
        pause;
        goto start;
}
else
{
        exec("emote stumbles away.", self);
        exec("west", self);
        pause;
        goto start;
}  
}       
dilend

end


	sksleeper
names {"skaven","sleeper"}
title "a skaven"
descr "A skaven sits here, yawning and streching."
extra {}
"A strange humanoid creature with a rat's head and tail. The body is 
covered in gray-brown fur. Strong claws end his hands and feet. The 
stench is unbearable." 
race RACE_SKAVEN
sex SEX_MALE
level 58
exp 115
money 6 COPPER_PIECE
NATURAL_DEF(WPN_BITE,ARM_LEATHER)
height 154
weight 115
alignment -743
MSET_ABILITY(15,30,10,20,15,4,1,5)
MSET_WEAPON(15,10,10,20,15,10)       /* 80/20 */
MSET_SPELL(2,0,0,2,1,2,2,2,2,5,2)
M_BITE_DISEASE
romflags {CHAR_SNEAK}
position POSITION_SLEEPING
special SFUN_TEAMWORK"skaven"

dilbegin skaven_snore();
code
{
on_activation(self.position!=POSITION_SLEEPING,skip);
heartbeat:=PULSE_SEC*10;
	:start:
wait(SFB_TICK,TRUE);
wait(SFB_TICK,TRUE);

if (rnd(1,3)==1)
{
exec("emote snores gently.",self);
goto start;
}
if (rnd(1,2)==1)
{
exec("emote snores loudly.",self);
goto start;
}
if (rnd(1,2)==1)
{
exec("emote drools in his sleep.",self);
goto start;
}
else
{
exec("emote turns over in his sleep.",self);
goto start;
}
goto start;
}
dilend
end

        skfighter
names {"skaven fighter","fighter","skaven"}
title "a skaven fighter"
descr "A skaven practices his combat here."
extra {}
"A strange creature with a rat's head and tail. The body is covered in 
gray fur. Sharp claws top the hands and feet of the creature. The skaven 
seems quite muscular for its frame and moves with animal-like 
agility." 
race RACE_SKAVEN  
sex SEX_MALE
level 63
exp 125
money 4 COPPER_PIECE
NATURAL_DEF(WPN_BITE,ARM_LEATHER)
height 158
weight 142
alignment -821
MSET_ABILITY(17,30,10,20,13,4,1,5)
MSET_WEAPON(12,13,10,25,10,10)       /* 80/20 */
MSET_SPELL(2,0,0,2,1,2,2,2,2,5,2)
M_BITE_DISEASE
romflags {CHAR_SNEAK}
special SFUN_SCAVENGER
special SFUN_TEAMWORK"skaven"
special SFUN_AGGRES_REVERSE_ALIGN "$1n howls in rage and attacks!" time
180 bits SFB_RANTIME

dilbegin skfighter ();
var
	flux	: integer;
	u	: unitptr;
	pc	: unitptr;
code
{
on_activation(self.position == POSITION_FIGHTING,skip);

   	:start: 
heartbeat := PULSE_SEC*3;
wait(SFB_CMD,activator.type==UNIT_ST_PC); 
pc:=activator;
secure(pc,start);
	:loop:
pause; 
flux := rnd(1,10); 
u:=findunit(self,"dummy",FIND_UNIT_SURRO,null);
if (not(u)) goto start;

if (flux==1) 
 exec("emote slashes at the dummy!", self); 
if (flux==2) 
 exec("emote rolls forth and takes a bite at the dummy.", self);
if (flux==3)
 exec("emote kicks the dummy, your eyes water in sympathy!", self);
if (flux==4)
 exec("emote takes a fast backhand blow with his claws at the dummy, hay "+
 "pours out of the slash!", self);
if (flux==5)
 exec("emote charges the dummy screaming and drooling.", self);
if (flux==6)
{
 exec("emote loops the head of the dummy off with a single slash!", self);
 destroy(u);
 pause;
 exec("emote pauses for a second, breathing heavily.", self);
 pause;
 exec("emote puts another dummy up in place of the molested one.", self);
 link(load("dummy@skaven"),self.outside);
}
if (flux==7)
 exec("emote jumps up and takes a flying kick at the dummy!",self);
if (flux==8)
 exec("emote takes a low sweep at the dummy.",self);
if (flux==9)
 exec("emote sends his fist into the stomach of the dummy!",self);
else
 exec("emote pauses for a moment, breathing heavily.",self);

heartbeat:=PULSE_SEC*5;
goto loop;
}
dilend

dilbegin slashfight();
var
        enemy : unitptr;
        flux : integer;
code
{
   :init:
   heartbeat := PULSE_SEC * 7;
   wait(SFB_COM,(self.position == POSITION_FIGHTING));
   enemy := self.fighting;
   secure(enemy,damnleft);

   :start:
flux := rnd(0,100);
pause;

if (flux < 10)
{
act("$1n rakes you across the cheek with $1s claws!",
A_ALWAYS,self,null,enemy,TO_VICT);
act("$1n rakes $3n across the cheek with $1s claws!",
A_ALWAYS,self,null,enemy,TO_NOTVICT);
enemy.hp := enemy.hp - rnd(1,3);
position_update(enemy);
goto start;
}
if (flux < 20)
{
act("A slash from $1n's prehensile tail sends you backwards!",
A_ALWAYS,self,null,enemy,TO_VICT);        
act("A slash from $1n's prehensile tail sends $3n backwards!",
A_ALWAYS,self,null,enemy,TO_NOTVICT);        
enemy.hp := enemy.hp - rnd(0,2);                
position_update(enemy);
goto start;
}
if (flux < 30)
{
act("With a wild howl, $1n charges at you!",
A_ALWAYS,self,null,enemy,TO_VICT);        
act("With a wild howl, $1n charges $3n!",
A_ALWAYS,self,null,enemy,TO_NOTVICT);        
enemy.hp := enemy.hp - rnd(1,2);                
position_update(enemy);
goto start;
}
if (flux < 40)
{
act("A fast kick from $1n sends waves of pain into your groin!",
A_ALWAYS,self,null,enemy,TO_VICT);        
act("You cringe as a kick from $1n hits $3n in the groin!",
A_ALWAYS,self,null,enemy,TO_NOTVICT);        
enemy.hp := enemy.hp - rnd(3,5);                
position_update(enemy);
goto start;
}
if (flux < 50)
{
act("$1n's fist smashes into your face, you can hear the crunch from your "+
"nose!", A_ALWAYS,self,null,enemy,TO_VICT);        
act("$1n's clenched fist hits $3n straight in the nose!",
A_ALWAYS,self,null,enemy,TO_NOTVICT);        
enemy.hp := enemy.hp - rnd(0,3);                
position_update(enemy);
goto start;
}
if (flux < 60)
{
act("&c+r$1n screams in rage and insanity flickers in $1s eyes!&cw",
A_ALWAYS,self,null,enemy,TO_ALL);        
act("$1n's muscles bulge!",
A_ALWAYS,self,null,enemy,TO_ALL);        
self.abilities[ABIL_STR] := (self.abilities[ABIL_STR])+rnd(1,2); 
position_update(self);
goto start;
}
if (flux < 70)
{
act("$1n rolls under your slash and rakes $1s claws along your side!",
A_ALWAYS,self,null,enemy,TO_VICT);        
act("$1n rolls under $3n's slash and rakes $1s claws along $3s side!",
A_ALWAYS,self,null,enemy,TO_NOTVICT);        
enemy.hp := enemy.hp - rnd(0,5);                
position_update(enemy);
goto start;
}
else goto start;

	:damnleft:
exec("emote spits on the floor in disgust.",self);
unsecure(enemy);
goto init;
}
dilend

end

        skeater
names {"skaven","eater"}
title "a skaven"
descr "A skaven sits here, chewing on a piece of meat."
extra {}
"A strange humanoid creature, with a rat's head and tail. The body is 
covered in gray fur. Pieces of flesh and dried blood
covers the muzzle of the creature and foul stench emits from it."
race RACE_SKAVEN  
sex SEX_MALE
level 60
exp 125
money 1 COPPER_PIECE
NATURAL_DEF(WPN_BITE,ARM_LEATHER)
height 155
weight 132
alignment -821
MSET_ABILITY(15,30,10,20,15,4,1,5)
MSET_WEAPON(12,13,10,25,10,10)       /* 80/20 */
MSET_SPELL(2,0,0,2,1,2,2,2,2,5,2)
M_BITE_DISEASE
romflags {CHAR_SNEAK}
special SFUN_SCAVENGER
special SFUN_TEAMWORK"skaven"

dilbegin skeater ();
var
   	pc 	: unitptr;
	i	: integer;
code
{
on_activation(self.position == POSITION_FIGHTING,skip);

   	:start:
heartbeat := PULSE_SEC * 3;
wait(SFB_CMD, activator.type == UNIT_ST_PC);
pc := activator;
secure(pc, start);
	:loop:
i := rnd(1,6);
pause;
if(i==1)
 exec("peer "+pc.name, self);
if(i==2)
 exec("emote takes a large bite of the meat.", self);
if(i==3)
 exec("emote chews with energy worth better case.", self);
if(i==4)
 exec("emote belches loudly, several flies fall out of the air.", self);
if(i==5)
 exec("drool", self);
if(i==6)
 exec("snicker "+pc.name, self);

heartbeat:=PULSE_SEC*7;
goto loop;
}
dilend
end

        skpiercer
names {"skaven piercer","skaven","piercer"}
title "a skaven piercer"
descr "A skaven wanders the lair, apparently without any aim."
extra {}
"A strange creature with a rat's head and tail and with otherwise 
humanoid body. The body is coverered in dark gray fur. The smell of 
plague comming from the creature makes you sick."
race RACE_SKAVEN  
sex SEX_MALE
level 62
exp 125
money 2 COPPER_PIECE
NATURAL_DEF(WPN_BITE,ARM_LEATHER)
height 157
weight 124
alignment -801
MSET_ABILITY(15,28,10,22,15,4,1,5)
MSET_WEAPON(15,13,12,20,10,10)       /* 80/20 */
MSET_SPELL(2,0,0,2,1,2,2,2,2,5,2)
M_BITE_DISEASE
romflags {CHAR_SNEAK}
special
SFUN_TEAMWORK"skaven"
special SFUN_RANDOM_ZONE_MOVE time PULSE_SEC*80
end


        skscout
names {"skaven scout","skaven","scout"}
title "a skaven scout"
descr "You get a strange feeling of being watched..."
extra {}
"A strange creature with a rat's head and tail. The body is covered in 
motted gray fur and you recline at the foul smell - the breath smells 
like a plague pit. The small eyes glow red - it can easily see 
into the infrared range of light." 
race RACE_SKAVEN  
sex SEX_MALE
level 60
exp 130
money 2 COPPER_PIECE
NATURAL_DEF(WPN_BITE,ARM_LEATHER)
height 146
weight 110
alignment -710
MSET_ABILITY(15,35,10,20,15,2,1,2)
MSET_WEAPON(20,15,15,10,10,10)       /* 80/20 */
MSET_SPELL(2,0,0,2,1,1,1,2,2,7,2)
special SFUN_SCAVENGER
M_BITE_DISEASE
romflags {CHAR_SNEAK,CHAR_DETECT_INVISIBLE}
special SFUN_TEAMWORK"skaven"
dilcopy ambush@skaven();
end

        skgutter
names {"skaven gutter","skaven","gutter"}
title "a skaven gutter"
descr "A sturdy skaven stands here, picking his teeth with a sharp bone."
extra {}
"A strange humanoid creature with a rat's head and tail.
The body is covered in motted gray fur and you recline at the foul smell
- the breath smells like a plague pit. Strong claws appear sharp enough
to easily disembowel you."
race RACE_SKAVEN  
sex SEX_MALE
level 63
exp 125
money 3 COPPER_PIECE
NATURAL_DEF(WPN_CLAW,ARM_LEATHER)
height 159
weight 121
alignment -720
MSET_ABILITY(15,30,10,20,15,4,3,3)
MSET_WEAPON(20,15,15,10,8,10)       /* 80/20 */
MSET_SPELL(2,0,0,2,1,2,2,2,2,7,2)
M_BITE_DISEASE
romflags {CHAR_SNEAK}
special SFUN_TEAMWORK"skaven"
special SFUN_RANDOM_ZONE_MOVE time PULSE_SEC*60
end

        skmonk
names {"skaven monk","monk","skaven"}
title "a skaven monk of plague"
descr "A dirty skaven plague monk drools and spits in the fire."
extra {}
"This skaven seem to be even more dirty than most. His muzzle and arms
are covered in red paint and several bones, skulls, feathers and pouches
hang at his sides and belt. He mumbles something incoherently and hisses
madly as you look at him. A tiny pool of drool is forming near his feet.
The stench comming from the monk is nearly suffocating and makes you want
to vomit."
race RACE_SKAVEN  
sex SEX_MALE
level 65
exp 125
money 1 COPPER_PIECE
NATURAL_DEF(WPN_CLAW,ARM_CHAIN)
height 152
weight 102
alignment -700
MSET_ABILITY(10,22,5,15,20,10,3,15)
MSET_WEAPON(5,5,5,10,5,5) 	/* 35/65 */
MSET_SPELL(5,5,5,5,5,5,5,5,10,10,5)
M_BITE_DISEASE
romflags {CHAR_SNEAK,CHAR_DETECT_INVISIBLE}
special SFUN_TEAMWORK"skaven"
special SFUN_AGGRES_REVERSE_ALIGN "$1n howls in rage and attacks!" time
100 bits SFB_RANTIME
dilcopy combat_mag@function("plague","heal",30,2);

dilbegin skmonk ();
var
   	i	: integer;
	pc	: unitptr;
code
{
on_activation(self.position == POSITION_FIGHTING,skip);

   	:start:
wait(SFB_CMD,activator.type==UNIT_ST_PC);
heartbeat := PULSE_SEC * 3;
pc:=activator;
secure(pc,start);
	:loop:
i:=rnd(1,10);
pause;
if (i==1)
 exec("emote drools down his chest.", self);
if (i==2)
 exec("emote spits into the brazier, the fire crackles.", self);
if (i==3)
{ exec("cackle", self); exec("drool skaven", self); }
if (i==4)
 exec("grin "+pc.name, self);
if (i==5)
 exec("spit "+pc.name, self);
if (i==6)
 exec("emote drools a bit of blood and vomit.", self);
if (i==7)
 exec("emote eyes you hatefully.",self);
if (i==8)
 exec("emote growls angrily.",self);
if (i==9)
 exec("emote spits out a gob of slime.",self);
if (i==10)
 exec("emote mumbles some vile words under his breath...",self);

heartbeat:=PULSE_SEC*8;
goto loop;
}
dilend

end

        skchamp
names {"skaven champion","champion","skaven","champ"}
title "a skaven champion"
descr "A skaven champion of Plague stares coldly at you."
extra {}
"A very muscular and large skaven, his body bearing several deep scars
witnessing of great combat experience. Blood forms sigils on his fur and
several burned tatoos cover his head. The saliva dripping from his fangs
is extremely foul-smelling."
race RACE_SKAVEN  
sex SEX_MALE
level 90
exp 150
money 4 GOLD_PIECE
NATURAL_DEF(WPN_CLAW,ARM_HLEATHER)
height 168
weight 159
alignment -900
MSET_ABILITY(20,26,10,20,14,4,1,5)
MSET_WEAPON(15,18,10,8,5,10)
MSET_SPELL(3,1,2,2,2,2,2,4,4,8,4)
M_BITE_DISEASE
romflags {CHAR_SNEAK,CHAR_DETECT_INVISIBLE}
special SFUN_TEAMWORK"skaven"
special SFUN_AGGRES_REVERSE_ALIGN "$1n howls in rage and attacks!" time
100 bits SFB_RANTIME
dilcopy combat_mag@function("","cure light",30,0);

dilbegin champfight();
var
        enemy : unitptr;
        flux : integer;
        vict : unitptr;
	resi : integer;
code
{
   	:init:
heartbeat := PULSE_VIOLENCE * 3;
wait(SFB_COM,(self.position == POSITION_FIGHTING));
enemy := self.fighting;
vict := enemy;
resi := ((enemy.abilities[ABIL_DEX]+enemy.weapons[WPN_FIST])/2);
secure(enemy,damnleft);
 
   :start:
flux := rnd(0,100);
pause;
if (flux < 10)
{
act("$1n rakes you across the cheek with $1s claws!",
A_ALWAYS,self,null,enemy,TO_VICT);
act("$1n rakes $3n across the cheek with $1s claws!",
A_ALWAYS,self,null,enemy,TO_NOTVICT);
enemy.hp := enemy.hp - rnd(0,2);
position_update(enemy);
goto start;
}
if (flux < 20)
{
act("$1n sends $1s clawed foot into your belly!",
A_ALWAYS,self,null,enemy,TO_VICT);
act("$1n sends $1s clawed foot into $3n's belly!",
A_ALWAYS,self,null,enemy,TO_NOTVICT);
enemy.hp := enemy.hp - rnd(1,4);
position_update(enemy);
goto start;
}
if (flux < 30)
{
act("$1n's eyes narrow dangerously...",
A_ALWAYS,self,null,enemy,TO_ALL);
exec("cast plague "+enemy.name,self);
goto start;
}
if (flux < 40)
{
act("$1n spits in your face!",A_ALWAYS,self,null,enemy,TO_ALL);
goto start;
}
if (flux < 50)
{
act("$1n laughs madly!", A_ALWAYS,self,null,enemy,TO_ALL);
exec("cast blind "+enemy.name,self);
goto start;
}
if (flux < 60)
{
act("$1n rolls under your slash and slams $1s Screaming Maiden into your "+
"back!", A_ALWAYS,self,null,enemy,TO_VICT);
act("$1n rolls under $3n's slash and slams $1s Screaming Maiden into $3n's"+
" back!",A_ALWAYS,self,null,enemy,TO_NOTVICT);
enemy.hp := enemy.hp - rnd(1,5);
position_update(enemy);
goto start;
}
if (flux < 70)
{
exec("emote raises his fist in the air!",self);
exec("cast fart "+enemy.name,self);
goto start;
}
else goto start;

        :damnleft:
exec("emote spits on the floor in disgust.",self);
unsecure(enemy);
goto init;
}
dilend
 
end

        skguard
names {"skaven guard","guard","skaven"}
title "a skaven guard"
descr "A skaven is busy with the offerings at the stone cairn."
extra {}
"Quite a large specimen of the race, the skaven seems to be well-in
shape. The light gray fur is covered with coangulated blood and
evil-smelling liquid."
race RACE_SKAVEN  
sex SEX_MALE
level 60
exp 125
money 1 GOLD_PIECE
NATURAL_DEF(WPN_CLAW,ARM_HLEATHER)
height 163
weight 138
alignment -750
MSET_ABILITY(15,30,10,20,15,4,1,5)
MSET_WEAPON(13,15,10,7,5,10)
MSET_SPELL(3,1,2,2,4,4,4,4,4,8,4)
M_BITE_DISEASE
romflags {CHAR_SNEAK}
special SFUN_SCAVENGER
special SFUN_TEAMWORK"skaven"
end

	skchief
names {"skaven chief","chief","warchief","skaven"}
title "a skaven warchief"
descr "A skaven warchief glares at you as you enter."
extra {}
"This skaven is larger than most skaven around here and apparently in better 
condition. His gray fur shows several silver streaks and one of his ears 
seems to have been halved by a lucky slash. Several large tatoos seem to 
have been burned into the fur on his arms and a few bronze rings are 
embedded in his tail." 
race RACE_SKAVEN  
sex SEX_MALE
level 70
exp 130
money 2 GOLD_PIECE
NATURAL_DEF(WPN_CLAW,ARM_HLEATHER)
height 166
weight 149
alignment -850
MSET_ABILITY(20,25,10,20,15,4,1,5)
MSET_WEAPON(10,18,12,5,5,10)
MSET_SPELL(3,1,2,2,4,4,4,4,4,8,4)
M_BITE_DISEASE
romflags {CHAR_SNEAK,CHAR_DETECT_INVISIBLE}
special SFUN_TEAMWORK"skaven"
special SFUN_AGGRES_REVERSE_ALIGN "$1n howls in rage and attacks!" time
100 bits SFB_RANTIME
end

	skcrafter
names {"skaven warcrafter","crafter","warcrafter","skaven"}
title "a skaven warcrafter"
descr "A skaven warcrafter sits here, engrossed in his work."
extra {}
"A large and lean skaven, most of his fur turning white. His body is
covered in strange sigils, burned into the fur and flesh. His red-glowing
eyes are half-closed as he concentrates on his work with the weapons."
race RACE_SKAVEN  
sex SEX_MALE
level 64
exp 125
money 1 GOLD_PIECE
NATURAL_DEF(WPN_CLAW,ARM_HLEATHER)
height 160
weight 118
alignment -650
MSET_ABILITY(20,23,10,20,20,1,5,1)
MSET_WEAPON(15,10,10,10,5,10)
MSET_SPELL(3,1,1,1,3,3,8,4,4,8,4)
M_BITE_DISEASE
romflags {CHAR_SNEAK,CHAR_DETECT_INVISIBLE}
special SFUN_TEAMWORK"skaven"
dilcopy combat_mag@function("fireball","",0,2);


dilbegin skcrafter ();
var
   	pc 	: unitptr;
	i 	: integer;
code
{
on_activation(self.position == POSITION_FIGHTING,skip);

   	:start:
wait(SFB_CMD, activator.type == UNIT_ST_PC);
heartbeat := PULSE_SEC * 3;
pc := activator;
secure(pc, start);
	:loop:
pause;
i := rnd(1,6);
if (i==1)
 exec("emote polishes the blade of the weapon.", self);
if (i==2)
 exec("emote heats the metal in the furnace.", self);
if (i==3)
 exec("emote beats the metal, forming the blade.", self);
if (i==4)
 exec("emote submerges the blade in the pool of water, clouds of "+
 "steam raise to the celling!", self);
if (i==5)
 exec("emote ponders the matters for a moment.", self);
if (i==6)
{
 exec("emote examines the blade.", self);
 exec("shake", self);
}
heartbeat:=PULSE_SEC*10;
goto loop;
}
dilend
end

        skhunter
names {"skaven hunter","hunter","skaven"}
title "a skaven hunter"
descr "A skaven hunter sits here, working on a hide."
extra {}
"Smaller than most of the rat-people, this skaven is nontheless one of
the more muscular ones. His fur is colored dark gray with occasional
patches of black. He seems to do the work fast and efficiently."
race RACE_SKAVEN  
sex SEX_MALE
level 61
exp 125
money 1 SILVER_PIECE
NATURAL_DEF(WPN_CLAW,ARM_HLEATHER)
height 145
weight 133
alignment -600
MSET_ABILITY(15,30,10,20,15,4,1,5)
MSET_WEAPON(10,15,10,15,5,10)
MSET_SPELL(3,1,2,2,3,3,3,3,3,8,4)
M_BITE_DISEASE
romflags {CHAR_SNEAK,CHAR_DETECT_INVISIBLE}
special SFUN_TEAMWORK"skaven"

dilbegin skhunter ();
var
   	pc 	: unitptr;
	i 	: integer;
code
{
on_activation(self.position == POSITION_FIGHTING,skip);

	:start:
heartbeat := PULSE_SEC * 10;
wait(SFB_CMD, activator.type == UNIT_ST_PC);
pc := activator;
secure(pc, start);
	:loop:
pause;
i:=rnd(1,5);
if(i==1)
 exec("emote scratches at the hide with his knife.", self);
if(i==2)
 exec("emote pours a bit of water at the hide.", self);
if(i==3)
 exec("emote examines the hide and gently rubs the water in.", self);
if(i==4)
 exec("emote pours a bit more water at the hide.", self);
if(i==5)
 exec("emote carefully works at the hide.",self);

heartbeat:=PULSE_SEC*9;	
goto loop;
}
dilend
end


/* Other mobs */

	bloodrat
names {"blood rat","rat"}
title "a blood rat"
descr "A large deep red rat scurries away as you approach."
extra {}
"A very lagre rat with deep red fur. The eyes of the creature shine red
as well, creating a very eerie effect. You shiver at the sight of
alarming intelligence in the eyes - this is no ordinary rat."
race RACE_RAT
sex SEX_NEUTRAL
level 48
NATURAL_DEF(WPN_BITE, ARM_LEATHER)
height 10
weight 10
romflags {CHAR_DETECT_INVISIBLE}
alignment -400
MSET_ABILITY(10,30,15,15,15,5,5,5)
MSET_WEAPON(10,10,8,10,15,7)
MSET_SPELL(5,1,1,2,1,5,5,5,5,5,5)
special SFUN_RANDOM_ZONE_MOVE time PULSE_SEC*30
dilcopy fido@function("","");
end

	deathrat
names {"death rat","rat"}
title "a death rat"
descr "A very large rat with enormous incisors observes you gloomily."
extra {}
"A very large rat, black in color. Its incisors are very large and 
make you think of badgers, but you doubt this animal to be as harmless as 
they are. Its mottled fur seems very thick and its eyes glow an eerie 
green." 
race RACE_RAT
sex SEX_NEUTRAL
level 50
exp 105
NATURAL_DEF(WPN_BITE, ARM_HLEATHER)
height 20
weight 15
romflags {CHAR_DETECT_INVISIBLE}
alignment -500
MSET_ABILITY(13,30,15,15,15,2,5,5)
MSET_WEAPON(10,10,10,10,15,5)
MSET_SPELL(5,1,1,2,1,5,5,5,5,5,5)
special SFUN_RANDOM_ZONE_MOVE time PULSE_SEC*40
dilcopy fido@function("","");
special SFUN_TEAMWORK"rat/skaven"
dilcopy bitemadness@skaven();
end

        caverat
names {"cave rat","rat"}
title "a cave rat"
descr "A thin black rat stares at you, sniffing the air cautiously."
extra {}
"A large but thin rat with dark, almost black fur. The front teeth of the
rat are very large, almost too large for such a creature. The eyes glow a
weak red light. The rat stinks heavily of decay."
race RACE_RAT
sex SEX_NEUTRAL
level 46
NATURAL_DEF(WPN_BITE, ARM_LEATHER)
height 10
weight 7
romflags {CHAR_DETECT_INVISIBLE}
alignment -200
M_BITE_DISEASE
MSET_ABILITY(10,30,15,15,15,5,5,5)
MSET_WEAPON(10,10,8,10,15,7)
MSET_SPELL(5,1,1,2,1,5,5,5,5,5,5)
special SFUN_RANDOM_ZONE_MOVE time PULSE_SEC*40
dilcopy fido@function("","");
end


/* Quest for the waraxe of Scyld - Bjorn Shatterfist the quest mob */

		bjorn
names {"Bjorn Shatterfist","bjorn","shatterfist","dwarf"}
title "Bjorn Shatterfist"
descr "A tired and dusty dwarf sits here, contemplating his long way home."
extra {}
"A deep frown crosses the forehead of this old dwarf. His beard is almost 
totally gray yet there is fire in his eyes that belies his age. What 
troubles this one..?" 
race RACE_DWARF
sex SEX_MALE
money 5 SILVER_PIECE
level 90
NATURAL_DEF(WPN_FIST,ARM_LEATHER)
height 140
weight 180
romflags {CHAR_DETECT_INVISIBLE}
flags {UNIT_FL_NO_TELEPORT}
alignment 200
offensive 100
MSET_ABILITY(28,15,10,30,10,5,1,1)
MSET_WEAPON(20,15,15,15,5,5)
MSET_SPELL(1,0,0,0,0,4,4,4,4,4,4)

dilbegin nonono();
var
	pc : unitptr;
code
{
	:start:
wait(SFB_CMD,command(CMD_DISARM));
pc:=findunit(self,argument,FIND_UNIT_SURRO,null);
if (pc!=self) goto start;
block;
act("This old dwarf is too experienced for you, your disarm fails!",
A_SOMEONE,activator,null,self,TO_CHAR);
act("$1n attempts to disarm $3n, but the old dwarf is too shrewd a "+
"fighter!",A_SOMEONE,activator,null,self,TO_REST);
set_fighting(self,activator);
goto start;
}
dilend

dilbegin scyldquest ();
var
        pc : unitptr;
        item : unitptr;
code
{
        :init:
        on_activation(self.position == POSITION_FIGHTING,skip);
        heartbeat := PULSE_SEC * 6;
 
        :start:
   wait(SFB_DONE,(not(command(CMD_GIVE)))and(activator.type == UNIT_ST_PC));
   pc := activator;
   secure(pc,gone);
 
if((SCYLD_DONE in pc.quests)or(SCYLD_ON in pc.quests)or(pc.level<30))
{
      unsecure(pc);
      goto start;
}
 
if(("$Udgaard Fighter" in pc.quests)or("$Midgaard Paladin" in pc.quests))
{
exec("sigh",self);pause;
exec("emote stares around him.",self);pause;
exec("say Ah, hello "+pc.name+".",self);pause;
exec("say Didn't notice you there at first... join me for a while..?",self);
pause;
act("$3n looks at you.",A_ALWAYS,pc,null,self,TO_CHAR);
act("$3n looks at $1n.",A_SOMEONE,pc,null,self,TO_REST);
pause;
exec("emote nods with approval.",self);pause;
exec("say You may be the person I was looking for, "+pc.name+".",self);pause;
exec("say I have travelled those lands for ages now... fortunes made and "+
"lost, glory and honours faded with time.",self);pause;
exec("say Now I wish only to return to the hearth of my home far away in "+
"the lands of the Danes, to die among my people.",self);pause;
exec("emote stares around him, and you see fires in his old eyes lit once "+
"again!",self);
exec("say But the journey is long and perilous...",self);pause;
exec("say ...and even if Odin welcomes the fallen in combat, those who "+
"die of stupidity, must sit at the far end of the table.",self);
act("Slight amusement flickers in the eyes of the old dwarf.",
A_SOMEONE,pc,null,self,TO_ALL);pause;
exec("say Thus I need to travel prepared... My last attempt to reach "+
"homelands ended badly, to say at least.",self);pause;
exec("say But if you fetch me equipment for my long journey, I will reward "+
"you well!",self);pause;
exec("say For only a true hero can wield the waraxe of the Scyldings and "+
"if you prove to be one, you shall have it!",self);pause;
exec("say Are you up to such a challenge, traveller..?",self);
exec("emote regards you, awaiting your answer.",self);
 
        :nod:
      wait(SFB_CMD,(activator == pc));
      if(command(CMD_SHAKE)or(command(CMD_SAY)and("no" in argument)))
        {
         pause;
         exec("shrug",self);pause;
         exec("say This weapon is not for you then, "+pc.name+".",self);
	 pause;
         unsecure(pc);
         goto start;
        }
      if(command(CMD_NOD)or(command(CMD_SAY)and("yes" in argument)))
        {
         addextra(pc.quests,{SCYLD_ON},"");
         pause;
exec("say I knew you couldn't resist the challenge!",self);pause;
exec("say You got a warrior soul, "+pc.name+".",self);pause;
exec("say Here is what I need for a safe journey...",self);pause;
exec("emote thinks deeply for a moment.",self);
exec("say Deep underground, outside the mortal world, a crystal-clear "+
"breast-plate of the most precious of stones exists.",self);pause;
exec("say A worthy armour for a dwarfen fighter, no?",self);pause;
exec("emote stares at his bare feet.",self);pause;
exec("say The travel home is long and tiring for old bones like mine..."
,self);pause;
exec("say But a pair of boots exist, that can take me home on the wings "+
"of the wind!",self);pause;
exec("emote scratches his hairy arm.",self);pause;
exec("say The plates of the rarest mithrill are held by a beast of the "+
"foulest breath.",self);pause;
exec("say From the caves of death, retrieve those pieces to arm my limbs!"
,self);pause;
exec("emote removes his helm and gives it a good look.",self);pause;
exec("say My trusty helmet... not much protection anymore...",self);pause;
exec("say From the keep of my kin, bring me the helm of their legends!"
,self);pause;
exec("emote clenches his fist in front of his face.",self);
exec("say My fingers shake with age, the blood is cold and weak in my veins."
,self);pause;
exec("say I need the fiery armour of magic, to heat my hands and speed my "+
"blood!",self);pause;
exec("emote shivers in the cold breeze.",self);pause;
exec("say A cloak of magic is held by a sorcerer of power.",self);pause;
exec("say It warms the body and tricks the mind...",self);pause;
exec("emote turns the waraxe in his hands thoughtfully...",self);pause;
exec("say And should you succeed... I will need a new weapon.",self);pause;
exec("say The hammer that shatters is the choice of mine!",self);pause;
exec("emote grins wickedly.",self);pause;
exec("say Meet me here, when you are done...",self);pause;
exec("say The reward of heroes awaits you upon return!", self);
exec("bow "+pc.name,self);
         unsecure(pc);
	 goto start;
        }
        else
        {
        goto nod;
        }
}
else 
{
exec("peer "+pc.name,self);pause;
exec("say Too bad you never followed the path of a warrior, young one."
,self);pause;
exec("say I might have had uses for you.",self);pause;
exec("emote loses interest, apparently.",self);
pause;pause;
}
        :gone:
unsecure(pc);
goto start;
}
dilend

dilbegin scyldreceive();
var
        pc : unitptr;
        item : unitptr;
        inve : extraptr;
code
{
        :init:
   heartbeat := PULSE_SEC* 6;
 
        :start:
wait(SFB_DONE,(activator.type == UNIT_ST_PC)and
(SCYLD_ON in activator.quests));
   pc := activator;
   secure(pc,gone);
   inve := SCYLD_ON in pc.quests;
 
if ((command(CMD_GIVE))and(target==self))
{
item := medium;
inve := SCYLD_ON in pc.quests;
 
if ((item.nameidx $= "elemental_plate")and(item.zoneidx $= "center"))
  {
        if ("plate" in inve.names)
        {goto already;}
        else
        {
        addstring(inve.names,"plate");
        exec("emote gasps at the sight of the Elemental Plate.", self);
        exec("say Such a beauty is unworthy for the mortal world!",self);
	exec("emote slips the plate into his backpack.",self);
        destroy(item);
        goto allstuff;
        }
   }
if ((item.nameidx $= "invi_cloak")and(item.zoneidx $= "sorcerer"))
  {
        if ("cloak" in inve.names)
        {goto already;}
        else
        {
        addstring(inve.names,"cloak");
        destroy(item);
        exec("emote runs his fingers gently over the runes of the cloak.", 
	self);
        exec("say Beautiful... even if stained with blood.",self);
        exec("emote slips the rune cloak into his backpack.",self);
        goto allstuff;
        }
   }
if ((item.nameidx $= "black_sleeves")and(item.zoneidx $= "tiamat"))
  {
        if ("sleeves" in inve.names)
        {goto already;}
        else
        {
        addstring(inve.names,"sleeves");
        destroy(item);
        exec("emote admires the craftmanship of the sleeves.", self);
        exec("say An armour worth kings!",self);
        exec("emote slips the sleeves into his backpack.",self);
        goto allstuff;
        }
   }
if ((item.nameidx $= "black_leggings")and(item.zoneidx $= "tiamat"))
  {
        if ("leggings" in inve.names)
        {goto already;}
        else
        {
        addstring(inve.names,"leggings");
        destroy(item);
        exec("emote sighs in awe, admiring the leggings.", self);
        exec("say The time didn't even scratch them...",self);
        exec("emote slips the leggings into his backpack.",self);
        goto allstuff;
        }
   }
if ((item.nameidx $= "bone_breaker1")and(item.zoneidx $= "garden"))
  {
        if ("hammer" in inve.names)
        {goto already;}
        else
        {
        addstring(inve.names,"hammer");
        destroy(item);
        exec("cackle", self);
        exec("say Yes, the hammer of mutilation!",self);
        exec("emote slips the Cruncher into his backpack, grinning.",self);
        goto allstuff;
        }
   }
if ((item.nameidx $= "div_helmet")and(item.zoneidx $= "dwarves"))
  {
        if ("helmet" in inve.names)
        {goto already;}
        else
        {
        addstring(inve.names,"helmet");
        destroy(item);
        exec("emote admires the divine helmet.", self);
        exec("say The helmet of legends... a treasure indeed.",self);
        exec("emote slips the divine helmet into his backpack.",self);
        goto allstuff;
        }
   }
if ((item.nameidx $= "winged_boots")and(item.zoneidx $= "cloud"))
  {
        if ("boots" in inve.names)
        {goto already;}
        else
        {
        addstring(inve.names,"boots");
        destroy(item);
        exec("emote carefully examines the wings on the boots..", self);
        exec("say Hmm... I always wondered how they fly...",self);
        exec("emote slips the winged boots into his backpack.",self);
        goto allstuff;
        }
   }
if ((item.nameidx $= "gauntlets_flm")and(item.zoneidx $= "asgaard"))
  {
        if ("gauntlets" in inve.names)
        {goto already;}
        else
        {
        addstring(inve.names,"gauntlets");
        destroy(item);
        exec("emote carefully examines the gauntlets.", self);
        exec("say Hot stuff!",self);
        exec("emote slips the Flamming Gauntlets into his backpack.",self);
        goto allstuff;
        }
   }
else
   {
	exec("blink",self);pause;
	exec("say Hmm, I could use that at some point... probably.",self);
	pause;
	exec("say But it is hardly what I need.",self);		
        unsecure (pc);
        goto start;
   }
}
goto allstuff;

        :already:
exec("emote chuckles in amusement.",self);pause;
exec("say You already gave me that, remember?",self);pause;
exec("say I am the one that is old... but your memory is failing...",self);
unsecure(pc);
goto start;
 
        :allstuff:
 
if (("plate" in inve.names)and("hammer" in inve.names)and
("sleeves" in inve.names)and("leggings" in inve.names)and
("helmet" in inve.names)and("cloak" in inve.names)and
("boots" in inve.names)and("gauntlets" in inve.names))
goto complete;
 
else
{
unsecure (pc);
goto start;
}
 
        :complete:
   subextra(pc.quests, SCYLD_ON);
   addextra(pc.quests,{SCYLD_DONE},"");
   experience(10000,pc);
   pause;
exec("say Aaah... that was the last thing!",self);pause;
exec("say "+pc.name+", you really made it!",self);pause;
exec("say You are indeed a worthy hero!",self);pause;
exec("bow "+pc.name,self);pause;
exec("say In your hands I leave the waraxe of the Dane kings...",self);pause;
exec("say More worthy successor would be hard to find!",self);
exec("remove axe",self);exec("give axe "+pc.name,self);pause;
exec("say May it serve you well, "+pc.name+".",self);pause;
exec("say I must leave now to buy the last supplies for my long journey "+
"home!", self);
exec("say May the blessing of the Asa gods follow you, "+pc.name+
".",self);pause;
exec("emote bows deeply and wanders off, whistling.",self);
unsecure(pc);
destroy(self);
goto start;
 
   :gone:
   unsecure(pc);
   goto start;
}
dilend

end


%objects

/* Alake Items */

	alake_cloth
names {"colorful cloth","dress","cloth"}
title "a blue and orange cloth"
descr "A soft blue and orange cloth lies here in a chaotic heap."
extra {}
"A single, large piece of blue and orange cloth forms a simple dress, 
worn around the body by women in tropical areas. The cloth has no buckles or 
buttons, it is held in place by the cunning of the folds."
extra {"$identify"}
"This beautiful cloth will increase your appearance when worn. However 
most men would find it just a bit too feminine to wear.&n"
extra {"$improved identify"}
"This clothing is of craftmanship 0 and magical bonus 0.&n"
extra {"$wear_s"}
"You wrap $2n around your body and arrange the folds carefully."
extra {"$wear_o"}
"$1n wraps $2n around $1s body and arranges the folds carefully."
extra {"$rem_s"}
"You unwrap $2n and fold it carefully."
extra {"$rem_s"}
"$1n unwraps $2n and folds it carefully."
ARMOUR_CLOTHES(0,0)
manipulate{MANIPULATE_TAKE,MANIPULATE_WEAR_BODY}
weight 1
cost 1 SILVER_PIECE
rent 29 IRON_PIECE
end

	silver_ringlets
names {"silver ringlets","ringlets","ringlet","pair","circles"}
title "a pair of ceremonial silver ringlets"
descr "A pair of entwining silver ringlets lie here, twinkling."
extra {}
"Beautifully crafter ceremonial silver ringlets. They are clearly 
designed to be worn on your ankles. The silver of the ringlets twinkles  
in the light, the entwining circles playing games of reflections."
manipulate{MANIPULATE_TAKE,MANIPULATE_WEAR_ANKLE}
cost 2 COPPER_PIECE
type ITEM_WORN
flags {UNIT_FL_MAGIC}
end

        silver_bangle
names {"silver bangle","bangle"}
title "a silver bangle"
descr "A small silver bangle lies here, catching the light."
extra {}
"A simple bangle of silver, very beautiful and delicate."
extra {"$identify"}
"This bangle will increase your appearance, but the jiggling sounds of 
the metal can affect your stealth.&n"
extra {"$improved identify"}
"Your Sneak suffers a -3% penalty.&n"
manipulate{MANIPULATE_TAKE,MANIPULATE_WEAR_WRIST}
SKILL_TRANSFER(SKI_SNEAK,-3)
cost 5 COPPER_PIECE
rent 25 IRON_PIECE
type ITEM_WORN
flags {UNIT_FL_MAGIC}
dilcopy abi_restrict@function(ABIL_CHA,10,0,0,"cha_rest@skaven");
end   

        gold_bangle
names {"gold bangle","bangle"}
title "a golden bangle"
descr "A small golden bangle lies here, catching the light."
extra {}
"A simple bangle of gold, very beautiful and delicate. The lights reflect 
in the polished metal."
extra {"$identify"}
"This bangle will increase your appearance, but the reflective metal may 
affect your hiding in shadows.&n" 
extra {"$improved identify"}
"Your hide skill suffers a -3% penalty.&n"
manipulate{MANIPULATE_TAKE,MANIPULATE_WEAR_WRIST}
SKILL_TRANSFER(SKI_HIDE,-3)
cost 7 COPPER_PIECE
rent 25 IRON_PIECE
type ITEM_WORN
flags {UNIT_FL_MAGIC}
dilcopy abi_restrict@function(ABIL_CHA,10,0,0,"cha_rest@skaven");
end   

        ear_jangles
names {"ear-jangles","jangles","jangle","bell","bells"}
title "silver ear-jangles"
descr "Silver ear-jangles lie here, forgotten."
extra {}
"Ear-jangles of silver, three tiny bells, beatifully crafted and 
decorated. As they move, they make a delicate, jiggling sound."
extra {"$identify"}
"Those jangles are used at the tribal meetings and impose respect, but the 
jiggling sounds of them will most likely give you away on stealth.&n"
extra {"$improved identify"}
"Your Sneak suffers a -2% 
penalty.&n" 
manipulate{MANIPULATE_TAKE,MANIPULATE_WEAR_EAR}
SKILL_TRANSFER(SKI_SNEAK,-2)
type ITEM_WORN
flags {UNIT_FL_MAGIC}
cost 7 COPPER_PIECE
rent 25 IRON_PIECE
dilcopy abi_restrict@function(ABIL_BRA,10,0,0,"bra_rest@skaven");

dilbegin jangleschat();
var
	dude : unitptr;
	flux : integer;
code
{
	:init:
	heartbeat := PULSE_SEC*1;

	:start:
wait (SFB_DONE,TRUE);

if((self.equip == WEAR_EAR_L)or(self.equip == WEAR_EAR_R))
{
	dude := activator;
	flux := rnd(1,150);
secure(dude,gone);
if (command(CMD_SHAKE))
{
pause;
act("Your $2N ring softly as you shake your head.",
A_SOMEONE,dude,self,null,TO_CHAR);
act("$1n's $2N ring softly as $1e shake $1s head.",
A_SOMEONE,dude,self,null,TO_REST);
goto gone;
}
if (command(CMD_NOD))
{
pause;
act("Your $2N chimm gently as you nod your head.",
A_SOMEONE,dude,self,null,TO_CHAR);
act("$1n's $2N chimm gently as $1e nods $1s head.", 
A_SOMEONE,dude,self,null,TO_REST);
goto gone;
}  
if (flux <10)                     
{
pause;
act("Your $2N jingle slightly as you move.",
A_SOMEONE,dude,self,null,TO_CHAR);
act("$1n's $2N jingle slightly as $1e moves.", 
A_SOMEONE,dude,self,null,TO_REST);
goto gone;
}  
if (flux <20)          
{
pause;
act("Your $2N swing in tact with your body, chimming musically.",
A_SOMEONE,dude,self,null,TO_CHAR);
act("$1n's $2N swing in tact with $1s body movements, chimming musically.",
A_SOMEONE,dude,self,null,TO_REST);
goto gone;
}
if (flux <30)                     
{
pause;
act("A slight jiggling is heard from your $2N as you move.",
A_SOMEONE,dude,self,null,TO_CHAR);
act("A slight jiggling is heard from $1n's $2N as $1e moves.", 
A_SOMEONE,dude,self,null,TO_REST);
goto gone;
}  
if (flux <40)                     
{
pause;
act("Tinkling gently, your $2N swing in harmony with yourself.",
A_SOMEONE,dude,self,null,TO_CHAR);
act("A weak tinkling is heard from $1n's $2N.", 
A_SOMEONE,dude,self,null,TO_REST);
goto gone;
}
if (flux <50)
{
pause;
act("The jiggling sound of your $2N distracts you for a second.",
A_SOMEONE,dude,self,null,TO_CHAR);
act("A jiggling sound of $1n's $2N distracts you for a second.", 
A_SOMEONE,dude,self,null,TO_REST);
goto gone;
}  
	:gone:
unsecure(dude);
goto start;
}
else goto start;
}
dilend

end   

        fire_charm
names {"charm of crystal fire","charm","fire","crystal","string"}
title "charm of crystal fire"
descr "A small crystal on a string lies here, twinkling wonderfully."
extra {}
"A small crystal, cut in the shape of a flame, mounted on a simple leather 
string. The crystal is a rosa, semi-transparent colour. Inside of the 
crystal you see a small, red flame, glowing weakly.&n
You can activate the powers of the charm by wearing it and incanating the 
word 'blaze'." 
extra {"flame"}
"The flame glows very weakly with a reddish light."
extra {"$identify"}
"This charm will become a temporarily light source if the word 'blaze' is 
spoken while the charm is worn. The light will fade away after a while.&n" 
extra {"$improved identify"}
"Each incanation drains the user of 20 mana and 5 endurance points.&n" 
manipulate{MANIPULATE_TAKE,MANIPULATE_WEAR_NECK} 
type ITEM_WORN
flags {UNIT_FL_MAGIC}
cost 1 SILVER_PIECE
rent 15 IRON_PIECE
dilcopy abi_restrict@function(ABIL_BRA,8,0,0,"bra_rest@skaven");
dilcopy abi_restrict@function(ABIL_MAG,4,0,0,"mag_rest@skaven");
flags {UNIT_FL_MAGIC}
spell 100

dilbegin recall aware lightenup();
var
	n : integer;
	pc : unitptr;
code
{
	:init:
        heartbeat := PULSE_SEC*2;

	:start:
wait (SFB_CMD,(command(CMD_SAY))and("blaze" in argument)and
((self.equip==WEAR_NECK_1)or(self.equip==WEAR_NECK_2))); 
pc := activator;
secure(pc,gone);
block;
act("&c+wYou grasp your $2n and whisper 'blaze...'&cw",
A_ALWAYS,self.outside,self,null, TO_CHAR);  
act("&c+w$1n grasps $1s $2n and whispers 'blaze...'&cw", 
A_ALWAYS,self.outside,self,null, TO_REST);

if (activator.mana < 20)
{
act("Your mana is too weak to ignite your charm!", 
A_ALWAYS,self.outside,self,null, TO_CHAR);
act("$1n sighs as $1e realises that $1s mana is too weak for the charm.",
A_ALWAYS,self.outside,self,null, TO_REST);
unsecure(pc);
goto start;
}
if (activator.endurance < 5)
{
act("You are too exhausted to concentrate properly!", 
A_ALWAYS,self.outside,self,null, TO_CHAR);
act("$1n concentrates hard but is too exhausted to ignite the charm.",
A_ALWAYS,self.outside,self,null, TO_REST);
unsecure(pc);
goto start;
}
else
{
pause;
act("The flame inside your $2n glows...", 
A_ALWAYS,self.outside,self,null, TO_CHAR);                        
act("The flame inside $1n's $2n glows...",
A_ALWAYS,self.outside,self,null, TO_REST);
n:= cast_spell(SPL_LIGHT_1,self.outside,self,self,"");
pc.mana := pc.mana - 20;
pc.endurance := pc.endurance - 5;
position_update(pc);
}
:gone:
unsecure(pc);
goto start;
}
dilend
end

        beads_necklace
names {"love beads necklace","necklace","beads"}
title "a necklace of beads of love"
descr "A small necklace of colorful beads lies here, spreading happines."
extra {}
"A simple necklace of beads in every conceivable colour. The beads are 
small and sparkle like pearls. Just looking at them makes you feel happy." 
extra {"$identify"}
"A simple necklace of beads in every conceivable colour.&n"
extra {"$improved identify"}
"A simple necklace of beads in every conceivable colour."
manipulate{MANIPULATE_TAKE,MANIPULATE_WEAR_NECK}
type ITEM_WORN
flags {UNIT_FL_MAGIC}
dilcopy abi_restrict@function(ABIL_CHA,10,0,0,"cha_rest@skaven");
cost 3 COPPER_PIECE
rent 25 IRON_PIECE
end

        cat_amulet
names {"cat claw amulet","amulet","claw","cat claw"}
title "a cat claw amulet"
descr "A small amulet made of a cat's claw lies here."  
extra {}
"A small and simple amulet made of a cat claw. A leather string provides
the means of hanging the amulet around your neck. You notice a word
carved into the claw."
extra {"word in the claw","word"}
"You stare closely at the word in an attempt to read it... it says
'meow'.&n
Baffled, you meow silently to yourself and are startlet by the claw 
glowing softly in response!&n"
extra {"$identify"}
"This amulet will increase your Climbing skills but can also temporarily
boost your Dexterity when you type 'meow' while wearing it. Each
of those boosts will cost you mana and endurance and last but for a short
while.&n"
extra {"$improved identify"}
"However, the amulet has got a downside to it. While worn, all your
attempts to speak will only result in meowing!&n"
manipulate{MANIPULATE_TAKE,MANIPULATE_WEAR_NECK}
type ITEM_WORN
flags {UNIT_FL_MAGIC}
cost 2 SILVER_PIECE
rent 16 IRON_PIECE
dilcopy abi_restrict@function(ABIL_DEX,10,0,0,"dex_rest@skaven");
weight 1
spell 8

dilbegin meow_chat();
var
        flux : integer;
	pc : unitptr;
	ting : unitptr;
code
{
        :start:
wait (SFB_CMD,(command(CMD_SAY))or(command(CMD_TELL)));

if ((self.equip==WEAR_NECK_1)or(self.equip==WEAR_NECK_2))
{
pc := self.outside;
secure (pc,finito);
block;  
flux := rnd(1,100);

if (command(CMD_SAY))
{
if (flux < 15)
{
act("&c+wYou meow happily.&cw",
A_ALWAYS,self.outside,self,null, TO_CHAR);
act("&c+w$1n meows happily.&cw",
A_ALWAYS,self.outside,self,null, TO_REST);
goto finito;
}
if (flux < 30)
{
act("&c+wYou meow slightly.&cw",
A_ALWAYS,self.outside,self,null, TO_CHAR);
act("&c+w$1n meows slightly.&cw",
A_ALWAYS,self.outside,self,null, TO_REST); 
goto finito;
}
if (flux < 45)
{
act("&c+wYou meow loudly.&cw",
A_ALWAYS,self.outside,self,null, TO_CHAR);
act("&c+w$1n meows loudly.&cw",
A_ALWAYS,self.outside,self,null, TO_REST);
goto finito;
}   
if (flux < 60)
{
act("&c+wYou meow sadly.&cw",
A_ALWAYS,self.outside,self,null, TO_CHAR);
act("&c+w$1n meows sadly.&cw",
A_ALWAYS,self.outside,self,null, TO_REST);
goto finito;
}
if (flux < 80)
{
act("&c+wYou meow angrily.&cw",
A_ALWAYS,self.outside,self,null, TO_CHAR);
act("&c+w$1n meows angrily.&cw",
A_ALWAYS,self.outside,self,null, TO_REST);
goto finito;
}
else
{
act("&c+wYou meow desperately.&cw",
A_ALWAYS,self.outside,self,null, TO_CHAR);
act("&c+w$1n meows desperately.&cw",
A_ALWAYS,self.outside,self,null, TO_REST);
goto finito;
}
}

if (command(CMD_TELL))
block;
exec("tell "+getword(argument)+" Meow...", activator);
goto finito;

	:finito:
unsecure(pc);
goto start;
}
else goto start;
}
dilend

dilbegin recall aware cats_luck();
var
        n : integer;
	pc : unitptr;
code
{
        :init:
        heartbeat := PULSE_SEC*1;

        :start:
wait (SFB_CMD,(command("meow"))and
((self.equip==WEAR_NECK_1)or(self.equip==WEAR_NECK_2)));
pc := activator;
secure(pc, gone);
block;
act("You meow loudly.",
A_ALWAYS,self.outside,self,null, TO_CHAR);
act("$1n meows loudly.",
A_ALWAYS,self.outside,self,null, TO_REST);
 
if (pc.mana < 20)
{
act("Your $2N glows slightly, but your mana is too weak to activate it!",
A_ALWAYS,self.outside,self,null, TO_CHAR);
act("$1n sighs as $1e realises that $1s mana is too weak for the amulet.",
A_ALWAYS,self.outside,self,null, TO_REST);
unsecure(pc);
goto start;
}
if (pc.endurance < 5)
{
act("You are too exhausted to activate the amulet!",
A_ALWAYS,self.outside,self,null, TO_CHAR);
act("$1n concentrates hard but with no avail.",
A_ALWAYS,self.outside,self,null, TO_REST);
unsecure(pc);
goto start;
}
else
{
pause;
act("Your $2N glows momentarily...",
A_ALWAYS,self.outside,self,null, TO_CHAR);
act("$1n's $2N glows momentarily...",
A_ALWAYS,self.outside,self,null, TO_REST);
n:= cast_spell(SPL_RAISE_DEX,self.outside,self,self.outside,"");
pc.mana := (pc.mana - 25);
pc.endurance := (pc.endurance - 5);
position_update(pc);
}
:gone:
unsecure(pc);
goto start;
}
dilend
end

	rune_bones
names {"rune-bones","bones"}
title "rune-bones"
descr "A few small, polished bones covered in runes lie here."
extra {}
"Small bones of different sorts, marked by runes, the kind that is 
usually used in divination and fortune-telling. You can hold them in your 
hand and toss them to see what they can tell you of your future." 
extra {"runes on the bones","runes"}
"The small runes represent the different aspects of Life, the Universe 
and Everything.&n"
extra {"$identify"}
"When you hold the bones in your hand and 'toss bones', they will show 
you a small aspect of your possible future!&n"
extra {"$improved idenfity"}
"Freakin' woodoo magick, mon! Freakin' woodoo magick!&N"
manipulate {MANIPULATE_TAKE,MANIPULATE_HOLD}
type ITEM_TREASURE
flags {UNIT_FL_MAGIC}
MATERIAL_ORGANIC("Those are bones.")
weight 1
cost 1 SILVER_PIECE

dilbegin runebones();
var
  pc : unitptr;
  flux  : integer;

code
{
	:init:
heartbeat := PULSE_SEC*1;

	:start:
wait(SFB_CMD, command("toss")and(self.outside == activator)
and(self.equip == WEAR_HOLD));

  block;
  pc := activator;
secure(pc,finale);
  flux := rnd(1,140);
link(self,pc.outside);
act("You toss the bones on the ground and study the outcome..."
,A_SOMEONE,pc,null,null,TO_CHAR);
act("$1n tosses the bones on the grounds and studies the outcome..."
,A_SOMEONE,pc,null,null,TO_REST);

if (flux < 10)
{
pause;
act("A dark cloak hides your future... as much as you concentrate, you "+
"can't read the results." ,A_SOMEONE,pc,null,null,TO_CHAR);
act("$1n frows, staring at the bones... You peek over $1s shoulder but "+
"understand nothing of the reading."
,A_SOMEONE,pc,null,null,TO_REST);
goto finale;
}
if (flux < 20)
{
pause;
act("Your future is hidden in the mists of confusion... the reading seems "+
"insecure and unclear." ,A_SOMEONE,pc,null,null,TO_CHAR);                    
act("$1n tries hard to understand the reading, but the future eludes $1m."
,A_SOMEONE,pc,null,null,TO_REST);
goto finale;
} 
if (flux < 30)
{
pause;
act("The bones tell you that your future hides many perils and dangers, "+
"yet great rewards await the patient and endurable." 
,A_SOMEONE,pc,null,null,TO_CHAR);                    
act("A discreet smile spreads over $1n's face as he traces the future in "+
"the bones... it must be good.",A_SOMEONE,pc,null,null,TO_REST);
goto finale;
} 
if (flux < 40)
{
pause;
act("The bones show you naught but danger, death and continous struggle!"
,A_SOMEONE,pc,null,null,TO_CHAR);                    
act("$1n gasps and pales, considering $1s future. You stare at the "+
"reading and see death written in the bones!" 
,A_SOMEONE,pc,null,null,TO_REST); 
goto finale;
} 
if (flux < 50)
{
pause;
act("Oh happy days and jubilation! You will aid a stranger and gain a "+
"friend!" ,A_SOMEONE,pc,null,null,TO_CHAR);                    
act("$1n smiles happily at $1s reading, you study the bones and find "+
"friendship in $1s future.",A_SOMEONE,pc,null,null,TO_REST);
goto finale;
} 
if (flux < 60)
{
pause;
act("Terror grips your heart in an ice-cold grip as you realise that death "+
"will bid you to a dance soon...",A_SOMEONE,pc,null,null,TO_CHAR);                    
act("$1n suddenly turns deadly pale, $1s shaky hand wipes cold sweat off "+ 
"$1s forehead.",A_SOMEONE,pc,null,null,TO_REST);
goto finale;
} 
if (flux < 70)
{
pause;
act("You rub your hands greedily as you predict an sizeable reward "+
"in the near future." ,A_SOMEONE,pc,null,null,TO_CHAR);                    
act("$1n grins and rubs $1s hands greedily... The bones must have "+
"spoken of money.",A_SOMEONE,pc,null,null,TO_REST);
goto finale;
} 
if (flux < 80)
{
pause;
act("A sad mistake will turn a friend into an enemy... beware!"
,A_SOMEONE,pc,null,null,TO_CHAR);                    
act("$1n frows, regarding the reading... You notice losses shown in the "+
"bones...",A_SOMEONE,pc,null,null,TO_REST);
goto finale;
} 
if (flux < 90)
{
pause;
act("Your love life will suffer a sudden and drastic change... (well, can "+
"it get any worse?)",A_SOMEONE,pc,null,null,TO_CHAR);                    
act("$1n blushes suddenly and hastily rearranges the bones, peeping at "+
"you... Must have been something with sex."
,A_SOMEONE,pc,null,null,TO_REST);
goto finale;
}
if (flux < 100)
{
pause;
act("Your blood on the stones will cause the joy of another! Beware!"
,A_SOMEONE,pc,null,null,TO_CHAR);                    
act("$1n grits $1s teeth, tracing the runes on the bones... You see blood "+
"in the reading..." ,A_SOMEONE,pc,null,null,TO_REST);
goto finale;
}
if (flux < 110)
{
pause;
act("A comrade will seek your blood and a friend will ponder your death!"
,A_SOMEONE,pc,null,null,TO_CHAR);
act("$1n grits $1s teeth, staring hard on the bones... You see "+
"betrayal and misery in the future." ,A_SOMEONE,pc,null,null,TO_REST);
goto finale;  
}
if (flux < 120)
{
pause;
act("What you have, will be lost, yet you will gain what you never "+
"thought possible.",A_SOMEONE,pc,null,null,TO_CHAR);
act("$1n to scratches $1s head, staring at the bones... This divinatory "+
"business must be harder than you think. Or perhaps $1e just got dandruff." 
,A_SOMEONE,pc,null,null,TO_REST); 
goto finale;  
}
if (flux < 130)
{
pause;
act("A sudden illness will strike you down, yet a few words spoken in "+
"silence will bear the salvation.",A_SOMEONE,pc,null,null,TO_CHAR);
act("$1n pales staring at the bones... you spot illness and disease "+  
"written in the runes.",A_SOMEONE,pc,null,null,TO_REST);
goto finale;
}
else 
{
pause;
act("Huh? The answer to the future is... 42? Damn them cheapo divinatory "+
"items..!",A_SOMEONE,pc,null,null,TO_CHAR);
act("$1n gazes stupified as $1s bones roll to a rest showing the number "+
"42..." ,A_SOMEONE,pc,null,null,TO_REST);
goto finale;  
}
	:finale:
	unsecure(pc);
	goto start;
}
dilend

end

/* - - - - - - - - Ivory Flute - Quest - - - - - -*/

		ivory_flute
names {"ivory flute","flute"}
title "an ivory flute"
descr "A delicately carved ivory flute has been forgotten here."
extra {}
"Made of the finest ivory, this flute is delicately carved by a master 
craftsman. You don't recognise the designs on the slender instruments, 
but suspect the craftmanship of the wild-elves."
extra {"$identify"}
"When held and played, the sound of this wondorous flute will grant you 
free passage among the even most savage beasts.&n"
extra {"$improved identify"}
"Those of great personal magnetism have a greater chance of controlling 
the magic of the flute. Elvenkin can always control the magic.&n"
extra {"$wear_s"}
"You lift the $2N to your lips."
extra {"$wear_o"}
"$1n lifts $2n to $1s lips."
manipulate {MANIPULATE_TAKE,MANIPULATE_HOLD}
type ITEM_TREASURE
cost 15 GOLD_PIECE
weight 1
dilcopy quest_restrict@function(FLUTE_QUEST,0,0,"flute_rest@skaven");

dilbegin soothing_flute();
var
	u	: unitptr;
	i	: integer;
code
{
heartbeat:=PULSE_SEC*5;
	:start:
wait(SFB_CMD,command("play")and(activator==self.outside));
block;
u:=self.outside;
secure(u,start);
if (self.equip!=WEAR_HOLD)
{
sendtext("You can't play the flute unless you hold it!&n",u);
goto start;
}
if (u.mana < 20)
{
sendtext("You play a few miserable tones on the flute... it needs mana "+
"to work!&n",u);
act("$1n plays a few miserable peeps on $1s $2N.",
A_SOMEONE,u,self,null,TO_REST);
goto start;
}
i:=openroll(1,20);
if ((u.abilities[ABIL_CHA] > i)
   or((u.race==RACE_ELF)or(u.race==RACE_HALF_ELF)or(u.race==RACE_DARK_ELF)))
{
sendtext("You play a wondorous tune on your $2N... "+
"Peace fills your mind.&n" ,u);
act("$1n plays a wondorous tone on $1s $2N...&n"+
"You relax, as peace fills your mind...",
A_SOMEONE,u,self,null,TO_REST);
i:=cast_spell(SPL_SANCTUARY,self,self,u,"");
u.mana := u.mana-rnd(10,20);
position_update(u);
unsecure(u);
goto start;
}
sendtext("You play a tune on your $2N, but fail to awake its magic.&n"
,u);
act("$1n plays a tune on $1s $2N.",A_SOMEONE,u,self,null,TO_REST);
u.mana := u.mana-rnd(5,10);
position_update(u);
unsecure(u);
goto start; 
}
dilend
end
	
/* - - - - - - - - Skaven Weapons - - - - - - - - */


		okatar
names {"ornamented katar","katar"}
title "an ornamented katar"
descr "A heavily-ornamented bronze katar makes you drool and want to own it."
extra {}
"A masterpiece of bronze design, this punchblade seems to fit perfectly
into your hand. Ornaments and carvings cover the blade and handguard."
extra {"designs","carvings","ornaments"}
"The ornaments seem unlike anything you've ever seen before.&n"
extra {"$identify"}
"Due to great construction, this weapon will swing easily and the blade
will strike true and with great accuracy.&n"
extra {"$improved identify"}
"It adds 2% to your Dagger skill and 1% to your Backstab skill. However,
you need Dex of 35 and Str of 20 to truly master the weapon.&n
The Craftmanship of this weapon is 5, the Magic Bonus 3.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_DAGGER,0,0)
MATERIAL_METAL("The katar is made of bronze.")
weight 2
cost 1 GOLD_PIECE
rent 40 IRON_PIECE
dilcopy abi_restrict@function(ABIL_STR,15,0,0,"str_rest@skaven");
dilcopy abi_restrict@function(ABIL_DEX,30,0,0,"dex_rest@skaven");
end

        	katar
names {"katar","blade"}
title "a bronze katar"
descr "A bronze katar blade looks quite misplaced on the ground."
extra {}
"A punchblade of the nastiest kind, this bronze katar seems well-crafted
and rather sharp."
extra {"$identify"}
"This weapon will kill any god foolish enough to attack you.&n"
extra {"$improved identify"}
"However, don't believe anything you read.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_DAGGER,0,0)
MATERIAL_METAL("The karat is made of bronze.")
weight 3
rent 4 IRON_PIECE
cost 1 COPPER_PIECE
dilcopy abi_restrict@function(ABIL_STR,10,0,0,"str_rest@skaven");
dilcopy abi_restrict@function(ABIL_DEX,10,0,0,"dex_rest@skaven");
end

       		brstaff
names {"bronze staff","staff"}
title "a bronze staff"
descr "A short bronze staff lies at your feet."
extra {}
"A short staff of bronze, covered with intricate carvings and decorated
with feathers and small bones. The design reveals it a weapon of a shaman
or a witchdoctor, or another heathen savage."
extra {"$identify"}
"Altough rather heavy, this staff is enchanted with swiftness and blessed
with Skaven's Blessing.&n"
extra {"$improved identify"}
"The Skaven's Blessing lowers your Charisma by one.
&n The Craftmanship of this weapon is 0, 
the Magic Bonus 0.&n" 
manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_QUARTERSTAFF,0,0)
CHA_TRANSFER(-1)
MATERIAL_METAL("The staff is made of bronze.")
weight 8
rent 100 IRON_PIECE
cost 2 GOLD_PIECE
dilcopy abi_restrict@function(ABIL_DEX,20,0,0,"dex_rest@skaven");
dilcopy abi_restrict@function(ABIL_BRA,20,0,0,"bra_rest@skaven");
dilcopy abi_restrict@function(ABIL_STR,10,0,0,"str_rest@skaven");
dilcopy level_restrict@function(10,0,0,"lvl_rest@skaven");
end

	       ocleaver
names {"war cleaver","cleaver","axe"}
title "ornamented war cleaver"
descr "An ornamented bronze cleaver rests here, the blade sharp and heavy."
extra {}
"A large meat-cleaver like weapon, made purely of bronze, heavy and very
sharp. The blade has been decorated with carvings and carefully 
sharpened. You can lop limbs off with that baby."
extra {"$identify"}
"To use:&n
- Hold handle with your sword hand,&n
- Swing the blade, edge first, into the opponent, preferably into the soft
bits.&n
- Repeat until opponent stops moving.&n"
extra {"$improved identify"}
"Skaven Design Ltd. All rights reserved&n
This weapon is of craftmanship 0 and magical bonus 0.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_HAND_AXE,0,0)
MATERIAL_METAL("The war cleaver is made of bronze.")
weight 8
rent 12 IRON_PIECE
cost 5 COPPER_PIECE
dilcopy abi_restrict@function(ABIL_STR,20,0,0,"str_rest@skaven");
dilcopy abi_restrict@function(ABIL_CON,10,0,0,"con_rest@skaven");
dilcopy level_restrict@function(8,0,0,"lvl_rest@skaven");
end    

	       cleaver
names {"war cleaver","cleaver","axe"}
title "a bronze war cleaver"
descr "A huge bronze cleaver rests here, tempting your cruel side."
extra {}
"A large meat-cleaver like weapon, made purely of bronze, heavy and very
sharp. You admire the workmanship of the weapon - not an item of grace
but an item of bloody effective killing."
extra {"$identify"}
"To use:&n
- Hold handle with your sword hand,&n
- Swing the blade, edge first, into the opponent, preferably into the soft
bits.&n"
extra {"$improved identify"}
"Skaven Design Ltd.&n
The Craftmanship of this weapon is 0, the Magic Bonus 0.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_HAND_AXE,0,0)
MATERIAL_METAL("The cleaver is made of bronze.&n")
weight 6
cost 1 COPPER_PIECE
dilcopy abi_restrict@function(ABIL_STR,10,0,0,"str_rest@skaven");
dilcopy abi_restrict@function(ABIL_CON,10,0,0,"con_rest@skaven");
dilcopy level_restrict@function(4,0,0,"lvl_rest@skaven");
end

	       ratsword
names {"rat sword","sword","shortsword"}
title "the rat sword"
descr "In the dust, a slim bronze sword catches your attention."
extra {}
"A slim sword crafted in bronze, with sharp edge and short blade. A tiny
rat's head sigil is carved into the blade, just below the pummel."
extra {"$identify"}
"The sword is clearly designed for backstabbing and swift fight.
Furthermore, the skaven magic of the sword improves your ability to avoid
beeing seen.&n"
extra {"$improved identify"}
"A standard Short Sword&n
This weapon is of craftmanship 5 and magical bonus 3.&n" 
extra {"$wear_s"}
"You wield the $2n and run a finger down the blade... nice and sharp.&n"
extra {"$wear_o"}
"$1n wields the $2n and runs a finger down the sharp blade.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_SHORT_SWORD,0,0)
MATERIAL_METAL("The rat sword is made of bronze.&n")
weight 3
cost 2 GOLD_PIECE
rent 90 IRON_PIECE
dilcopy abi_restrict@function(ABIL_DEX,50,0,0,"dex_rest@skaven");
end

	       jagspear
names {"jagged spear","spear"}
title "a jagged bronze spear"
descr "A jagged blade of a short bronze spear reflects light in the dust."
extra {}
"A short spear with nasty, jagged bronze head."
extra {"$identify"}
"To use: stick the sharp end into the opponent, applying considerable
force.&n"
extra {"$improved identify"}
"Direct all complains to Skaven Designs Ltd.&n
The Craftmanship of this weapon is 0, the Magic Bonus 0.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_SPEAR,0,0)
MATERIAL_METAL("The spear is made of bronze.&n")
weight 4
cost 14 IRON_PIECE
dilcopy abi_restrict@function(ABIL_DEX,10,0,0,"dex_rest@skaven");
dilcopy abi_restrict@function(ABIL_STR,10,0,0,"str_rest@skaven");
end

	       bmallet
names {"warcrafter mallet","mallet","hammer"}
title "warcrafter mallet"
descr "A beautiful bronze mallet looks sad and forgotten on the ground."
extra {}
"A bronze mallet of great beauty and craftmanship. Three small
sigils mark the weapon, one on each side of the mallet and one on the
handle."
extra {"sigils"}
"The sigils are of a design unknown to you, very slender and with a
vicious look to them."
extra {"$identify"}
"The mallet will improve your strength and is easier to swing.&n"
extra {"$improved identify"}
"Str bonus is +2 and weapon bonus is +4%.&n
The craftmanship of the weapon is 0 and the magical bonus is 0.&n"
extra {"$wear_s"}
"You wield the $2n with a proud look on your face.&n"
extra {"$wear_o"}
"$1n wields the $2n with a proud look on $1s face.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_WAR_HAMMER,0,0)
MATERIAL_METAL("The mallet is made of bronze.&n")
weight 10
rent 80 IRON_PIECE
cost 15 SILVER_PIECE
dilcopy abi_restrict@function(ABIL_STR,50,0,0,"str_rest@skaven");
dilcopy abi_restrict@function(ABIL_DEX,20,0,0,"dex_rest@skaven");
dilcopy abi_restrict@function(ABIL_CON,10,0,0,"con_rest@skaven");
dilcopy level_restrict@function(15,0,0,"lvl_rest@skaven");

dilbegin brmallet ();
var
        enemy : unitptr;
	random : integer;
code
{
        :init:
on_activation(self.outside.position != POSITION_FIGHTING, skip);
        :start:
wait(SFB_COM,(self.equip == WEAR_WIELD));
enemy := self.outside.fighting;
random := rnd(1,100);
if (random < 10)
{
act("You take a wild chance and moon $3n! Har har har!",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n suddenly jumps aside and moons $3n! You fall down laughing.",
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("With total disregard for your slashes, $1n pulls down the pants and "+
"moons you!" ,A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}
if (random < 20)
{
act("With a wild scream you charge $3n!",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n screams wildly and charge $3n with a complete disregard for "+
"caution.",A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n screams wildly and charges you, dodging your blows!",
A_ALWAYS,self.outside,self,enemy,TO_VICT);
       goto start;
}
if (random < 30)
{
act("You smash your $2N into $3n's face, a splash of blood hits your boots.",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("You shield yourself from the splash of blood as $1n smashes $3n in"+
"the face!",A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("The world spins suddenly as $1n's $2N smashes into your face!",
A_ALWAYS,self.outside,self,enemy,TO_VICT);
       goto start;
}
if (random < 40)
{
act("You spin your mallet over your arm, under your leg, across your "+
"body and grin at $3n.", 
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$3n pales and backs away at such display of skill!",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n spins $1s mallet over $1s arm, under $1s leg, across $1s body and "+
"grins at $3n." ,A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$3n pales slightly but holds $3s ground." 
,A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n spins $1s mallet over $1s arm, under $1s leg then across $1s "+
"body, grinning at you.", A_ALWAYS,self.outside,self,enemy,TO_VICT);
act("You try hard not to appear impressed but you are!", 
A_ALWAYS,self.outside,self,enemy,TO_VICT);
       goto start;
}
if (random < 50)
{
act("With a sick crunch you break a few of $3n's ribs.", 
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n's smash breaks a few of $3n's ribs!", 
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("Pain erups in your side as $1n's $2N slams into you, you feel broken "+
"ribs!", A_ALWAYS,self.outside,self,enemy,TO_VICT);
       goto start;
}
if (random < 60)
{
act("You smash the head of your $2N into $3n's weapon hand!",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("Fingers crunch, $3n screams in agony!",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n's $2N hits $3n's weapon hand!", 
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("Fingers crunch, $3n screams in agony!", 
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("A couple of fingers break as $1n's $2N smashes your weapon hand!"
, A_ALWAYS,self.outside,self,enemy,TO_VICT); 
       goto start;
}
if (random < 70)
{
act("With a rapid swing you send your $2N into $3n's crotch.",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$3n's eyes bulge and $3e gasps for air.",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n's $2N smashes neatly into $3n's crotch!",
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$3n's eyes bulge and $3e gasps for air!",
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("Pain explodes in your crotch as  $1n's $2N smashes between your legs!"
, A_ALWAYS,self.outside,self,enemy,TO_VICT);
       goto start;
}


	goto start;
}

dilend

end

	       oslasher
names {"ornamented slasher","slasher","sword"}
title "an ornamented slasher"
descr "A curved slasher, heavy with ornaments, lies here."
extra {}
"A heavy curved slasher, ornamented designs covering the blade and the
pummel of the sword. Bronze seem to be the material used for this weapon.
Altough it is heavy, it also seem to be capable of considerable damage."
extra {"designs","ornaments"}
"Curious.&n"
extra {"$identify"}
"You recognise a strength enchantment on the blade.&n"
extra {"$improved identify"}
" The craftmanship of the blade is 0 and the magical bonus is 0.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_SCIMITAR,0,0)
MATERIAL_METAL("The slasher is made of bronze.&n")
weight 8
cost 2 GOLD_PIECE
rent 80 IRON_PIECE
dilcopy abi_restrict@function(ABIL_STR,55,0,0,"str_rest@skaven");
dilcopy level_restrict@function(15,0,0,"lvl_rest@skaven");

dilbegin oslasher ();
var
        enemy : unitptr;
	random : integer;
code
{
        :init:
on_activation(self.outside.position != POSITION_FIGHTING, skip);
        :start:
wait(SFB_COM,(self.equip == WEAR_WIELD));
enemy := self.outside.fighting;
random := rnd(1,100);
if (random < 10)
{
act("You dodge a blow, jump a stab and slash viciously at $3n!"
, A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$3n screams with agony!"
, A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n dodges a blow, jumps a stab and slashes viciously at $3n!",
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$3n screams with agony!",
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n dodges akwardly a blow, jups heavily over a stab and slashes you "+
"viciously!",A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start ;
}
else if (random < 20)
{
act("With a forceful overhead blow you bury your $2N in $3n's body!",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n swings the $2N forcefully and buries it in $3n's body!"
,A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("With an explosion of pain, an overhead blow from $1n smashes into "+
"your shoulder!", A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start; 
}
else if (random < 30)
{
act("You jump back, duck and swing low at $3n's ankles.",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n's jump back and dodge is followed by a low slash at $3n's ankles!"
,A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n jump back at your charge, dodges your slash and tries to come in "+
"low!", A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}
else if (random < 40)
{
act("Your slash brings $3n off-balance, now is your chance!",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n's slash brings $3n off-balance, what a chance!"
,A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("You stumble as you desperatly try to dodge $1n's slash!"
, A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}
else if (random < 50)
{
act("Your muscles ripple as you bring your $2N down with all your might!",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$3n screams with agony!",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$3n screams in agony as $1n brings $1s weapon down with all $1s might!"
,A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("An explosion of pain stuns you for a second as $1n's slash hits you!"
, A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}
else if (random < 60)
{
act("You deal a stunning blow to $3n with your $2N!",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$3n reels and staggers!",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);  
act("$1n's stunning blow causes $3n to reel and stagger!"
,A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("A slash across your chest stuns you for a second, you push the "+
"darkness back!", A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}

goto start;
}
dilend
end

	       gutknife
names {"gutting knife","knife"}
title "a gutting knife"
descr "A wicked gutting knife has been forgotten here."
extra {}
"A gutting knife. Perhaps you can use one. The blade seems to be made of
bronze."
extra {"$identify"}
"This weapon will gut any god easily.&n"
extra {"$improved identify"}
"Provided he is dead and defenseless.&n
The craftmanship of this weapon is 0, the magic bonus 0.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_DAGGER,0,0)
MATERIAL_METAL("The knife is made of bronze.&n")
weight 2
cost 1 COPPER_PIECE
dilcopy abi_restrict@function(ABIL_STR,15,0,0,"str_rest@skaven");
end


	fistnail
names {"fistnails","nails"}
title "bronze fistnails"
descr "A sturdy set of fistnails lies here, still with some blood on them."
extra {}
"The fistnails are a weapon similar to a knuckle iron, but with three sharp
nails sticking up the knuckles. It seems a very effective thing to use in
close-quarters combat but not very solid against an axe-swinging opponent."
extra {"$identify"}
"This weapon increases your punch force, making you more effective at
fist combat.&n"
extra {"$improved identify"}
"The craftmanship of the nails is 0 and the magical bonus 0.&n"
extra {"$wear_s"}
"You slip the fistnails on your hand and grins meancingly.&n"
extra {"$wear_o"}
"$1n slips $1s $2N on $1s hand and grins meancingly.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_FIST,0,0)
MATERIAL_METAL("The fistnails are made of bronze.&n")
weight 1
rent 50 IRON_PIECE
cost 2 COPPER_PIECE
dilcopy abi_restrict@function(ABIL_STR,10,0,0,"str_rest@skaven");

dilbegin fistnail ();
var
        enemy : unitptr;
	random : integer;
code
{
        :init:
on_activation(self.outside.position != POSITION_FIGHTING, skip);
        :start:
wait(SFB_COM,(self.equip == WEAR_WIELD)); 
enemy := self.outside.fighting;
random := rnd(1,100);
if (enemy.hp < 10)
{
if (random < 33)
{
act("You grab $3n's head and slam your knee into $3s face.", 
A_ALWAYS,self.outside,self,enemy,TO_CHAR);  
act("You hear a crunch as $3s nasal bone impales $3s brains and the body "+
"goes limp in your hands..." , A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n grabs $3n's head and slams $1s knee into $3s face!"
, A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("You hear the crunch of $3n's nose impaling $3s brains and $3s body "+
"goes limp...", A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n grabs your head and you see his knee speeding at your face!" 
,A_ALWAYS,self.outside,self,enemy,TO_VICT);
act("You hear a vague crunch as your nasal bone impales your brain. Then, "+
"only silence remains." ,A_ALWAYS,self.outside,self,enemy,TO_VICT);
enemy.hp := -7;
position_update(enemy);
goto start;
}
else if (random < 66)
{
act("You scream as you slam your fist into $3n's stomach and break $3s "+
"spine. ", A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("You pull out your bloodied fist as the body collapses in front of you."
, A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("With a wild scream, $1n punches through $3n's stomach and breaks $3s "+
"spine!" , A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("As the body collapses, $1n tries desperately to pull out his fist."
, A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("Your lower body explodes in pain and then suddenly, all feelings are "+
"gone." ,A_ALWAYS,self.outside,self,enemy,TO_VICT);
act("$1n's cold eyes are the last thing you see as the darkness claims "+
"you.", A_ALWAYS,self.outside,self,enemy,TO_VICT); 
enemy.hp := -8;
position_update(enemy);
goto start;
}
else
{
act("With a mighty punch you crush $3n's windpipe!"
, A_ALWAYS,self.outside,self,enemy,TO_CHAR);       
act("As the convulsions set in, you finish $3m with a rapid smash in $3s "+
"face." , A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("With a powerful punch, $1n crushes $3n's windpipe!", 
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("As $3n starts to collapse in convulsions, $1n finishes $3m with a "+
"rapid blow to $3s face." , A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n's blow hits you in the throat, you CANNOT BREATHE!!!!"
,A_ALWAYS,self.outside,self,enemy,TO_VICT);  
act("As you collapse in convulsions, $1n's fist descends once more and "+
"everything goes dark.", 
A_ALWAYS,self.outside,self,enemy,TO_VICT); 
enemy.hp := -9;
position_update(enemy);
goto start;
}

}
if (random < 10)
{
act("You smash a backhand blow into the face of $3n, blood hits your "+
"armour.", A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n smashes a backhand blow into $3n's face, blood hits your armour!",
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("A sudden backhand blow from $1n smashes into your face, you taste blood!"
,A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start ;
}
else if (random < 20)
{
act("You smash your elbow into the chest of $3n, knocking the air out of "+
"$3m!" , A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n deals an elbow blow into chest of $3n, who gasps for air!"
,A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n dodges and deals an elbow blow to your chest, air explodes out "+ 
"of your lungs!", A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}
else if (random < 30)
{
act("With a straight punch you rebreak $3n's nose for $3m!"
, A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n punches $3n royally in the nose."
,A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("You hear a familiar crunch from your nose as $1n's fist impacts on it.",
A_ALWAYS,self.outside,self,enemy,TO_VICT); goto start;
}
else if (random < 50)
{
act("You grin at $3n and extend your middle finger at $3m.",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$3n screams with rage!", A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n grins at $3n and gives $3m the finger."
, A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$3n screams with rage!",A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n grins at you and gives you the finger! Die, creep!",
A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}
else if (random < 60)
{
act("You roll your hand into a fist and smash it into $3n's stomach!"
, A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n smashes $1s fist into $3n's stomach! Ouch!"
, A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("You gasp for air as $1n smashes $1s fist into your stomach!",
A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}
else if (random < 70)
{
act("Your uppercut sends $3n reeling back, blood flowing from $3s mouth!"
, A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n's uppercut sends $3n reeling, blood flows from his mouth."
, A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("Your teeth rattle from a $1n's uppercut and blood flows down your "+
"chin!", A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}
else if (random < 80)
{
act("You grab $3n's head and slam your knee into $3s face!"
, A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n's grabs $3n's head and slams $1s knee into $3s face!"
, A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n's strong hands grab your head and his knee slams into your face!"
, A_ALWAYS,self.outside,self,enemy,TO_VICT);
act("That really HURT!"
, A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}
else if (random < 90)
{
act("You feint a head punch and send your foot into $3n's crotch!"
, A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$3n gasps in pain, trying to regain control of $3s
movements!", A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n feint a head punch and send $1s foot into $3n's crotch!"
, A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("*CRUNCH!* Your eyes water in sympathy!"
, A_ALWAYS,self.outside,self,enemy,TO_NOTVICT); 
act("You easily parry a weak punch from $1n as your crotch suddenly 
explodes in a symphony of pain!" 
, A_ALWAYS,self.outside,self,enemy,TO_VICT);
act("You gasp for air, tears in your eyes!"
, A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}
        goto start;
}
dilend

end

        boneclub
names {"femur","bone","club"}
title "a human femur"
descr "A large human femur lies here in the dust."
extra {}
"A large yellowing human femur. You notice with interest that it got
teeth marks on it. Hmm."
manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_CLUB,-5,0)
MATERIAL_ORGANIC("The femur is a human bone.&n")
cost 1 IRON_PIECE
weight 3
end

        halfslash
names {"slasher"}
title "unfinished bronze slasher"
descr "An unifinished bronze slasher lies here."
extra {}
"It would be an impressive curved weapon, if you'd only let the man finish
his work on it. Right now it is near-to-useless."
manipulate {MANIPULATE_TAKE, MANIPULATE_HOLD}
MATERIAL_METAL("The unfinished slasher is made of bronze.&n")
cost 1 IRON_PIECE
weight 5
type ITEM_TRASH
end

	       maiden
names {"Screaming Maiden","maiden","mace"}
title "Screaming Maiden"
descr "A mace with a beautifully sculpted female head lies here."
extra {}
"The mace is made entirely from some sort of darkly red metal. The head
of the weapon is sculpted in the shape of a pretty young girl, smiling
slightly. Dark runes cover the handle of the weapon and the whole thing
emanates power. The long handle seems comfortable enough for both 
one-handed and twohanded grip." 
extra {"$identify"}
"This weapon is of pure evil and can only be used by such. It can be used 
two-handedly by typing 'wield maiden two'. It increases your Str as well as 
Bra and guides your hand in combat.&n"
extra {"$improved identify"}
"The bonuses are +3 Str and +1 Bra as well as +3% Mace/Battle Mace skill.
The dweomer of the mace is such that it protects you from the influences
of the forces of good, but at the cost of 2 points of your Charisma.&n
The craftmanship and magical strength of the mace are both 5.&n"
extra {"$get_s"}
"You reach for the $2N and slowly lift it, enjoying the feeling of 
power..." 
extra {"$get_o"}
"$1n reaches slowly for the $2N and lifts it with a calculating grin..."
extra {"$drop_s"}
"You drop the $2N with reluctance... you feel the power calling out to 
you!" 
extra {"$drop_o"}
"$1n reluctanly drops $1s $2N..." 
extra {"$wear_s"}
"A wild howl of triumph erupts from the $2N as you grab it!" 
extra {"$wear_o"}
"A wild howl of triumph erupts from the $2N as $1n wields it!"
extra {"$rem_s"}
"You reluctantly let go of the $2N... The feeling of power subsides."
extra {"$rem_o"}
"$1n reluctantly lets go of $1s Maiden... the glow fades." 
manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_MACE,5,5)
PROTECTION_FROM_GOOD
weight 10
STR_TRANSFER(+3)
BRA_TRANSFER(+1)
CHA_TRANSFER(-2)
WEAPON_TRANSFER(WPN_MACE,+3)
WEAPON_TRANSFER(WPN_BATTLE_MACE,+3)
MATERIAL_METAL("This mace seems to be made of some sort of dark red metal.&n") 
cost 1 PLATINUM_PIECE
rent 204 IRON_PIECE
dilcopy abi_restrict@function(ABIL_BRA,60,0,0,"bra_rest@skaven");
dilcopy abi_restrict@function(ABIL_STR,70,0,0,"str_rest@skaven");
dilcopy level_restrict@function(25,0,0,"lvl_rest@skaven");
dilcopy ali_restrict@function(-350,-1000,0,75,"bad_rest@skaven");
dilcopy twohand@skaven(22,21);

dilbegin maidensingle();
var
	u	: unitptr;
	i	: integer;
	huh	: string;
code
{
	:start:
wait(SFB_DONE,(command(CMD_WEAR) or command(CMD_WIELD) or command(CMD_HOLD))
and(activator==self.outside));

huh:=medium.name;
u:=findunit(self.outside,huh,FIND_UNIT_EQUIP,null);

if ( ((self.position==WEAR_HOLD)and(u.equip==WEAR_WIELD))
   or((self.position==WEAR_WIELD)and(u.equip==WEAR_HOLD))
   and (u.objecttype==ITEM_WEAPON) )
{
act("Your $2N turns in your hand and falls to the ground, howling.&n"+
"&c+wYou cannot use a $2N along with another weapon!&cw",
A_SOMEONE,self.outside,self,null,TO_CHAR);
act("$1n's $2N turns in $1s hand and falls to the ground, howling.",
A_SOMEONE,self.outside,self,null,TO_REST);
link(self,self.outside);
}
goto start;
}
dilend


dilbegin maiden();
var
        enemy : unitptr;
	vict : unitptr;
        random : integer;
code
{
        :init:
on_activation(self.outside.position != POSITION_FIGHTING, skip);
        :start:
wait(SFB_COM,(self.equip == WEAR_WIELD));
enemy := self.outside.fighting;
vict := enemy;
random := rnd(1,100);
if (enemy.hp < 15)
{
act("You scream in delight as your $2N bites into $3n's chest and rips out "+
"$3s heart!", A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$3n stares stupidly at the gaping wound, then colapses." 
, A_ALWAYS,self.outside,self,enemy,TO_CHAR);   
act("$1n's $2N bites into $3n's chest and rips out $3s heart!"
, A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n howls with delight as $3n slowly collapses.", 
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("You stare at the huge gap in your chest, $1n's $2N has taken your "+
"heart!" ,A_ALWAYS,self.outside,self,enemy,TO_VICT);
act("The world fades to black as you slowly collapse and die." 
,A_ALWAYS,self.outside,self,enemy,TO_VICT);
enemy.hp := -7;      
position_update(enemy);
goto start;
}
else if (random < 10)
{
act("The head of your $2N distorts in an cruel grin as it bites deep into "+
"$3n's flesh!", A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$3n screams in agony!", A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("The head of $1n's $2N distorts in a cruel grin as it bites deep into "+
"$3n's flesh!", A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$3n screams in agony!", A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n's $2N distorts in a cruel grin as it bites deep into your flesh!"
,A_ALWAYS,self.outside,self,enemy,TO_VICT); goto start;
}
else if (random < 20)
{
act("Your $2N hisses at $3n and snaps at $3s flesh!"
, A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n's $2N hisses violently at $3n and snaps at $3s flesh!",
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n's $2N hisses violently at you, you barely avoid a snap from it!"
,A_ALWAYS,self.outside,self,enemy,TO_VICT); goto start;
}
else if (random < 30)
{
act("You feel bones break under your blow, your $2N howls in delight!"
, A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n's blow breaks a bone, $1s $2N howls in delight!",
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("A sickly crunch and sudden pain inform you of a broken bone, $1n's "+
"$2N howls in delight!" ,A_ALWAYS,self.outside,self,enemy,TO_VICT); goto
start;
}
else if (random < 40)
{
act("Your $2n bites into $3n's body, you tear out a chunk of flesh!"
,A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n's $2N bites into $3n's body, a chunk of flesh hanging "+
"from her fangs!", A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n's $2N bites deeply into your body, tearing out a piece of your "+
"very living flesh!" ,A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}
else if (random < 50)
{
act("Runes on your $2N flash suddenly and you feel energy surging up your "+
"arm!", A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("A sudden flash illuminates $1n's bloody weapon, the runes on the "+
"handle are aglow!", A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("The runes on $1n's $2N are aglow with power, you feel life being "+
"drained from your body!" ,A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}
else if (random < 60)
{
act("A scream of despair pierces the air as your $2N smashes down at $3n!",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("A scream of despair chills you to your bone as $1n's $2N smashes at "+
"$3n!", A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("A scream reverberates through the air as $2N smashes into you."
,A_ALWAYS,self.outside,self,enemy,TO_VICT);
act("As despair closes its icy grip on you, you realise it was your own "+
"voice screaming!"
,A_ALWAYS,self.outside,self,enemy,TO_VICT); goto start; 
}
else if (random < 70)
{
act("The $2N writhes in your hand, light erupts from the head!",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n's $2N writhes in $1s hand and erupts in blinding light!"
, A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("You desperately try to shield your eyes!"
, A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n's $2N writhes in $1s hand and erupts in a flare of blinding light!."
,A_ALWAYS,self.outside,self,enemy,TO_VICT);
act("You scream as you try to shield your eyes!"
,A_ALWAYS,self.outside,self,enemy,TO_VICT); 
goto start; 
}
else if (random < 80)
{
act("You swing your $2N with a wild scream, thoursand voices join in a "+
"hellish symphony!", A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$3n grabs $3s head and screams in pain!"
, A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("Thoursand hellish voices joins $1n's wild scream!", 
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$3n grabs $3s head and screams in pain!",
A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("Thoursand voices joins $1n's scream in a symphony from hell!"
,A_ALWAYS,self.outside,self,enemy,TO_VICT);
act("The screams reverberate in your head! The PAIN!"
,A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}
else if (random < 90)
{
act("Your $2N vibrates softly, strange murmur fills the air!",
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$3n stares mesmerised at your $2N as it smashes in $3s face!",  
A_ALWAYS,self.outside,self,enemy,TO_CHAR);
act("$1n's $2N vibrates softly, strange murmurs fill the air..."
, A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("Your head spins, you feel woozy..."
, A_ALWAYS,self.outside,self,enemy,TO_NOTVICT);
act("$1n's $2N vibrates softly, whispering voices reveal your death!"
,A_ALWAYS,self.outside,self,enemy,TO_VICT);
act("You desperately fight the overwhelming horror!"
,A_ALWAYS,self.outside,self,enemy,TO_VICT);
goto start;
}

        goto start;
}
dilend


end

/* Armour and clothing */

		spkshield
names {"spiked shield","shield"}
title "spiked hide shield"
descr "A spiked hide shield was discarded here by someone who didn't care."
extra {}
"The small and handy shield is made from stiffened hide and reinforced
with bronze bands. Spikes of bronze and obisidian have been crafted into
the shield, making it a nasty melee weapon as well. Altough the base
materials seem poor, the craftmanship of the shield seems supreme. A
wicked sigil glows softly in the centre, shedding a sickly green glow
upon the spikes."
extra {"sigil","glow"}
"The sigil seems vaguely familiar and the strange shape gives you odd
associations. The green glow makes your head spin."
manipulate {MANIPULATE_TAKE,MANIPULATE_WEAR_SHIELD}
SHIELD_DEF(SHIELD_SMALL,0,0)
WEAPON_TRANSFER(WPN_FIST,+1)
rent 37 IRON_PIECE
cost 8 COPPER_PIECE
weight 6
dilcopy abi_restrict@function(ABIL_STR,20,0,0,"str_rest@skaven");
end

        	ragrobe
names {"ragged robes","robes","robe","rags","rag"}
title "ragged black robes"
descr "A pile of rags lies here, stinking heavily."
extra {}
"The black robes are very dirty and holled, the material moulding and 
covered in blood, vomit and excrements. A tiny sigil glows in eerie, 
green light on the front of the ragged material."
extra {"sigil"}
"The green sigil makes your head spin and your stomach turn. You think 
you recognise the design of the Plague God."
extra {"$identify"}
"The robes of skaven devotees bear the sigil of Plague, increasing your 
Divine Contact but decreasing your Stamina.&n"
extra {"$improved identify"}
"The bonus is +1 Div and -1 Con. The robes require Div of at least 20 and 
Bra of 15 to wear.&n
The Craftmanship of this armour is -5, the Magic Bonus 0.&n"
extra {"$wear_s"}
"You tie $2n about your body.&n"
extra {"$wear_o"}
"$1n ties $2n about $1s body.&n"
manipulate {MANIPULATE_TAKE,MANIPULATE_WEAR_ABOUT}  
ARMOUR_CLOTHES(-5,0)
DIV_TRANSFER(+1)
CON_TRANSFER(-1)
MATERIAL_CLOTH("The robes are made of cloth.&n")
cost 1 SILVER_PIECE
rent 70 IRON_PIECE
weight 2
dilcopy abi_restrict@function(ABIL_DIV,20,0,0,"div_rest@skaven");
dilcopy abi_restrict@function(ABIL_BRA,15,0,0,"bra_rest@skaven");
end


		brigantine
names {"brigantine","armour"}
title "a brigantine armour"
descr "A brigantine armour has been left here."
extra {}
"A brigantine armour of dark, hard leather, reinforced with bronze treads. 
Seems designed for a small person."
manipulate {MANIPULATE_TAKE,MANIPULATE_WEAR_BODY}
ARMOUR_HRD_LEATHER(0,0)
MATERIAL_LEATHER("The brigantine is made of hard leather.&n")
cost 5 COPPER_PIECE
weight 6
dilcopy abi_restrict@function(ABIL_STR,15,0,0,"str_rest@skaven");
end

		st_bracers
names {"bronze-studded bracers","bracers"}
title "bronze-studded leather bracers"
descr "A pair of studded leather bracers has been left here."
extra {}
"Solid-looking studded leather bracers, decorated in intricate designs."
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_ARMS}
ARMOUR_HRD_LEATHER(0,0)
MATERIAL_LEATHER("The bracers are made of studded leather.&n")
cost 4 COPPER_PIECE
weight 3
dilcopy abi_restrict@function(ABIL_STR,15,0,0,"str_rest@skaven");
end

	        st_greaves
names {"studded greaves","greaves"}
title "bronze-studded leather greaves"
descr "A pair of bronze-studded leather greaves has been left here."
extra {}
"Nice-looking studded leather greaves, decorated in intricate designs."
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_LEGS}
ARMOUR_HRD_LEATHER(0,0)
MATERIAL_LEATHER("The greaves are made of studded leather.&n")
cost 4 COPPER_PIECE
weight 3
dilcopy abi_restrict@function(ABIL_STR,15,0,0,"str_rest@skaven");
end

	        brmesh
names {"bronze mesh","mesh","armor","shirt"}
title "a bronze mesh shirt"
descr "A bronze mesh shirt lies here in a heap."
extra {}
"A bronze mesh shirt, seems that you can use it for protection of your upper
body. The mesh is finely crafted and seems to offer maximum protection at
minimum encumberance."
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_BODY}
ARMOUR_CHAIN(0,0)
MATERIAL_METAL("The mesh is made of bronze.&n")
cost 1 SILVER_PIECE
rent 4 IRON_PIECE
weight 18
dilcopy abi_restrict@function(ABIL_STR,40,0,0,"str_rest@skaven");
dilcopy abi_restrict@function(ABIL_CON,15,0,0,"con_rest@skaven");
dilcopy level_restrict@function(10,0,0,"lvl_rest@skaven");
end

	        brarmlets
names {"bronze armlets","armlets"}
title "ornamented bronze armlets"
descr "A pair of highly ornamented bronze armlets lies here."
extra {}
"Highly ornamented bronze armlets, of exquisite workmanship and design.
Several magical-looking glyphs have been incorporated into the decor."
extra {"glyphs","decor"}
"VERY magical looking."
extra {"$identify"}
"Those plated armlets will increase your Strength as well as your
Constitution but lower your Magical Aptitude.&n"
extra {"$improved identify"}
"The Craftmanship of this armour is 0, the Magic Bonus 0.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_ARMS}
ARMOUR_PLATE(0,0)
MATERIAL_METAL("The armlets are made of bronze.&n")
cost 3 GOLD_PIECE
rent 60 IRON_PIECE
weight 10
dilcopy abi_restrict@function(ABIL_STR,80,0,0,"str_rest@skaven");
dilcopy level_restrict@function(25,0,0,"lvl_rest@skaven");
end

	        brcap
names {"bronze skullcap","skullcap","cap"}
title "a bronze skullcap"
descr "A thin bronze skullcap was discarded here."
extra {}
"A skullcap of beaten bronze with intricate designs on the polished metal."
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_HEAD}
ARMOUR_CHAIN(0,0)
MATERIAL_METAL("The skullcap is made of bronze.&n")
cost 3 COPPER_PIECE
weight 3
dilcopy abi_restrict@function(ABIL_STR,30,0,0,"str_rest@skaven");
end

	        skapron
names {"leather apron","apron"}
title "a sturdy leather apron"
descr "A sturdy leather apron lies here."
extra {}
"A sturdy leather apron, like those used by artisans."
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_ABOUT}
ARMOUR_LEATHER(0,0)
MATERIAL_LEATHER("The apron is made of leather.&n")
cost 1 COPPER_PIECE
weight 5
end

	        skgloves
names {"craftman's gloves","gloves"}
title "craftman's gloves"
descr "A pair of heavy leather gloves lies here."
extra {}
"A pair of heavy leather gloves, partially covering the lower arm. They
have burn marks all over them and seem very thick and solid."
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_HANDS}
ARMOUR_LEATHER(0,0)
MATERIAL_LEATHER("The gloves are made of leather.&n")
cost 1 COPPER_PIECE
weight 2
end

	        rawhide
names {"rawhide","piece","hide"}
title "a piece of rawhide"
descr "A large piece of rawhide lies here."
extra {}
"A large piece of rawhide, only partially processed and mostly useless."
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_ABOUT,MANIPULATE_HOLD}
ARMOUR_LEATHER(0,0)
MATERIAL_LEATHER("The piece of hide is made of leather.&n")
cost 5 IRON_PIECE
weight 10
end

		brplate
names {"bronze plate and chain","plate","chain","armour","armor"}
title "bronze plate and chain"
descr "A bronze plate and chain armour lies here."
extra {}
"A solid-looking plate mail mounted on a chain mail surcoat. It looks
like it can take quite a few blows, altough the bronze plates add
considerable weight to the armour. A green sigil glows in a weak, eerie
light on the left breast of the armour, creating strange shadows."
extra {"sigil","light"}
"The green light of the sigil makes your head spin. The design is vaguely
familiar yet the meaning of the sign eludes you.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_BODY}
ARMOUR_PLATE(0,0)
MATERIAL_METAL("The plate and chain armour is made of bronze.&n")
rent 30 IRON_PIECE
cost 4 GOLD_PIECE
bright 1
weight 45
dilcopy abi_restrict@function(ABIL_STR,85,0,0,"str_rest@skaven");
dilcopy level_restrict@function(25,0,0,"lvl_rest@skaven");
end

        	brgreaves
names {"bronze greaves","greaves"}
title "spiked bronze greaves"
descr "A pair of spiked bronze plated greaves catches your eye here."
extra {}
"Heavy greaves of dark bronze. Those should provide ample protection but
seem to weight quite a lot. The spikes on the greaves look nasty and more
than simply decorative, judging by the dried blood on them."
extra {"$identify"}
"The greaves add to your kick damage.&n"
extra {"$improved identify"}
"The Craftmanship of this armour is 0, the Magic Bonus 0.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_LEGS}
ARMOUR_PLATE(0,0)
MATERIAL_METAL("The greaves are made of bronze.&n")
cost 3 GOLD_PIECE
rent 40 IRON_PIECE
weight 15
dilcopy abi_restrict@function(ABIL_STR,80,0,0,"str_rest@skaven");
dilcopy level_restrict@function(25,0,0,"lvl_rest@skaven");
end

	        brarmpl
names {"bronze armplates","armplates","plates"}
title "spiked bronze armplates"
descr "A pair of spiked armplates lies here, gathering dust."
extra {}
"Solid protection for your arms and shoulders. The plates seems very
heavy and the spikes seem more intimidating than practical. Perhaps you
can use them in melee-combat for shoulder-pushes."
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_ARMS}
ARMOUR_PLATE(0,0)
MATERIAL_METAL("The armplates are made of bronze.&n")
cost 3 GOLD_PIECE
rent 30 IRON_PIECE
weight 12
dilcopy abi_restrict@function(ABIL_STR,75,0,0,"str_rest@skaven");
dilcopy level_restrict@function(25,0,0,"lvl_rest@skaven");
end

/*  - - - - - - - - Jewelry - - - - - - - - - */

	        standard 
names {"Plague standard","standard"}
title "a Plague standard"
descr "A large, holed standard on a long pole is stuck into the ground here."
extra {}
"The standard bears the twisted sigil of the Plague God on a black 
field. The material is holed and rotting in places and somehow it seems 
very right..."
extra {"sigil"}
"The twisted sigil of the Plague God is entangled with a skull.&n"
extra {"$identify"} 
"The standard grants the user increased perception to poisons. It also 
shields the weared from good but also outlaws him in most of the civilised 
areas. Only the most vile of all can endure the evil magic that spawned 
the standard.&n" 
extra {"$improved identify"}
"Hint: don't hold it when the cityguards are near.&n"
manipulate {MANIPULATE_TAKE,MANIPULATE_HOLD}
weight 8
PROTECTION_FROM_GOOD
CHAR_FLAG_TRANSFER(CHAR_OUTLAW)
CHAR_FLAG_TRANSFER(CHAR_DETECT_POISON)
dilcopy level_restrict@function(10,0,0,"lvl_rest@skaven");
dilcopy abi_restrict@function(ABIL_STR,10,0,0,"str_rest@skaven");
dilcopy abi_restrict@function(-350,-1000,0,20,"bad_rest@skaven");
cost 1 SILVER_PIECE
rent 30 IRON_PIECE   
type ITEM_OTHER
end
        

		banner
names {"Plague banner","banner"}
title "a Plague back banner"
descr "Smell from a holed, rotting Plague banner assaults your nostrils."
extra {}
"&lThe back banner bears the twisted sigil of the Plague God 
along with an old skaven proverb:
 
          /\                           /\     
         /  \___/\______  _______/\___/  \    
         \     /  \     \/      /  \     /    
  Only the insane have strength enough to prosper.
           \ /Only those that prosper\ /
           can truly judge what is sane.
             \____   __\   /__   ____/
                  \  \  \_/  /  /
                   \__\     /__/
                       \   /
                        \_/
  
&f&n"		
extra {"sigil"}
"The twisted sigil of the Plague God is entangled with a skull.&n"
extra {"$identify"}
"The Plague banner grants the wearer heightened constitution and improved
knowledge of the Poison Sphere as well as increased perception to
poisons. It also shields the weared from good but also outlaws him in
most civilised areas. Only the most vile of all can endure the evil magic
that spawned the banner.&n"
manipulate {MANIPULATE_TAKE,MANIPULATE_WEAR_BACK,MANIPULATE_HOLD}
weight 6
PROTECTION_FROM_GOOD
CHAR_FLAG_TRANSFER(CHAR_OUTLAW)
CHAR_FLAG_TRANSFER(CHAR_DETECT_POISON)
dilcopy abi_restrict@function(ABIL_STR,30,0,0,"str_rest@skaven");
dilcopy abi_restrict@function(ABIL_DIV,30,0,0,"div_rest@skaven");
dilcopy abi_restrict@function(ABIL_CON,20,0,0,"con_rest@skaven");
dilcopy ali_restrict@function(-350,-1000,0,50,"bad_rest@skaven");
cost 3 GOLD_PIECE
rent 80 IRON_PIECE
type ITEM_OTHER
end

		earstud
names {"ear stud","stud"}
title "a tiny bronze stud"
descr "You tread clumsily on a tiny bronze stud, hope you didn't break it!"
extra {}
"A tiny stud of bronze, if you got a hole in your ear, it would fit right
in! The head of the stud is decorated with a tiny sigil."
extra {"sigil","head"}
"The sigil is unknown to you.&n"
extra {"$wear_s"}
"You put the earstud into a hole in your ear.&n"
extra {"$wear_o"}
"$1n slips $2n through a hole in $1s ear.&n"
manipulate {MANIPULATE_TAKE,MANIPULATE_WEAR_EAR}
weight 0
cost 1 COPPER_PIECE
type ITEM_WORN
end

		earhoop
names {"small hoop","hoop","ring","earring"}
title "a small bronze hoop"
descr "If you need a small hoop of bronze, there is one just at your feet."
extra {}
"A small hoop made of bronze, the kind people wear in their ears. As you
study the hoop you notice the intricate carvings on it and marvel at the
way it is decorated and polished."
extra {"carvings"}
"The carvings create intriguing patterns on the hoop, making it reflect
light like a gemstone, work of very skilled hands."
extra {"$wear_s"}
"You slip the hoop through a hole in your ear.&n"
extra {"$wear_o"}
"$1n slips $2n through a hole in $1s ear.&n"
manipulate {MANIPULATE_WEAR_EAR,MANIPULATE_TAKE}
weight 0
cost 1 COPPER_PIECE
type ITEM_WORN
end

	        earcuff
names {"earcuff","bronze earcuff","cuff"}
title "an ornamented bronze earcuff"
descr "A small bronze earcuff shines in the dirt."
extra {}
"A small bronze earcuff covered with intricate designs. You spot a few
sigils that look quite magical to your eye."
extra {"sigils"}
"Definitely very magical looking.&n"
extra {"$identify"}
"This earcuff grants you close affiliation with the Poison Sphere as well
as improves your general appearance.&n"
extra {"$improved identify"}
"The Poison Sphere bonus is +2% and Cha bonus is +1."
extra {"$wear_s"}
"You cuff $2n into your ear.&n"
extra {"$wear_o"}
"$1n cuffs $2n into $1s ear.&n"
manipulate {MANIPULATE_WEAR_EAR,MANIPULATE_TAKE}
weight 1
cost 5 GOLD_PIECE
rent 41 IRON_PIECE
dilcopy abi_restrict@function(ABIL_BRA,20,0,0,"bra_rest@skaven");
dilcopy abi_restrict@function(ABIL_CHA,20,0,0,"cha_rest@skaven");
type ITEM_WORN
end

	        brtorc
names {"bronze torc","torc"}
title "a bronze torc"
descr "Someone seem to have discarded a bronze torc here."
extra {}
"A bronze torc of intricate design. Several sigils cover it - you also
recognise the twisted sigil of the Plague God. Ugh."
extra {"sigil"}
"Yup, it is the Plague Sigil all right.&n"
extra {"$identify"}
"This torc is of skaven manufacture and it aids your divine connection.
The enchantment upon the torc will grant you the knowledge of the Plague
God.&n"
extra {"$improved identify"}
"Only evil people can truly use this item, and only those whose Divine
Contact is no less than 40 and Brain no less than 30.&n"
weight 3
cost 8 GOLD_PIECE
rent 50 IRON_PIECE
dilcopy abi_restrict@function(ABIL_DIV,40,0,0,"div_rest@skaven");
dilcopy abi_restrict@function(ABIL_BRA,30,0,0,"bra_rest@skaven");
dilcopy ali_restrict@function(-350,-1000,0,30,"bad_rest@skaven");
type ITEM_WORN
manipulate {MANIPULATE_TAKE,MANIPULATE_WEAR_NECK}
end

	       brcirclet
names {"bronze circlet","circlet"}
title "a bronze circlet"
descr "A polished bronze circlet glimmers at your feet."
extra {}
"The circlet made of bronze and is of great beauty. As you stare closer
at the intricate design, you notice that a silver tread has been woven
around the circlet, forming a delicate pattern of a spidery web."
extra {"web","pattern","tread","design"}
"The thin silver tread form a web pattern on the bronze circlet.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_ANKLE}
weight 1
cost 1 COPPER_PIECE
type ITEM_WORN
end

        sspiral
names {"snake spiral","spiral","snake"}
title "a bronze snake spiral"
descr "You notice a small spiral of bronze in the discarded here."
extra {}
"This bronze spiral resembles a snake with silver eyes, the jaws open
and the tongue pointing outwards. It seems to fit well enough over your
wrist. You marvel at the beauty of the design."
extra {"$identify"}
"Created by Skaven for their champions, those spirals are fearsome items
indeed! If removed and held in hand, the spirals spews forth the magic of the
Plague God.&n"
manipulate {MANIPULATE_TAKE,MANIPULATE_WEAR_WRIST,MANIPULATE_HOLD}
CHAR_FLAG_TRANSFER(CHAR_MUTE)
type ITEM_WAND
value[0] 50
value[1] 20
value[2] SPL_POISON
value[3] SPL_DISEASE_2
weight 1
cost 1 PLATINUM_PIECE
rent 30 IRON_PIECE
dilcopy level_restrict@function(10,0,0,"lvl_rest@skaven");
dilcopy abi_restrict@function(ABIL_BRA,40,0,0,"bra_rest@skaven");
end

/* - - - - - - Random items - - - - - - */

	        penny
names {"penny","coin"}
title "a shiny penny"
descr "A small coin lies here, shining brightly."
extra {}
"A shiny penny, makes you think of faraway lands and places where such 
coin is an accepted currency. A strange person with long rasta dreadlocks 
is envisaged on the coin." 
manipulate {MANIPULATE_TAKE,MANIPULATE_HOLD}
dilcopy flip_coin@treasure();
type ITEM_TREASURE 
end

		water
names {"waters","lake","water"}
title "the subterran lake"
descr "A slight movement in the murky waters catches your eye."
LIQ_DEF(LIQ_WATER, 4000, 20000, 20000, 0)
extra {}
"The dark waters of the lake seem impenetrable to the eye... wonder what
monstrosities they hold..?"
extra {"movement"}
"As you look closer, the surface of the water appears calm and
undisturbed. Surely you must have imagined it."
end

	        skeleton
names {"skeleton"}
title "a rotting skeleton"
descr "Bones of a rotting skeleton lie here in a heap."
extra {}
"The bones still have a bit of flesh on them, but not much. Apparently
their owner gave up all hopes of resurrection and wandered away to the
Happy Hunting Grounds."
manipulate {MANIPULATE_TAKE, MANIPULATE_ENTER}
weight 80
type ITEM_TRASH
end

		godslayer
names {"Godslayer","sword"}
title "the Godslayer (broken)"
descr "A mighty sword shines at your feet, its days of glory long past."
extra {}
"Once a proud weapon of the mighy heroes of Ratswharf, the weapon is now,
much as the city, smashed and forgotten.&n
The Godslayer clearly requires a godslaying fighting style.&n"
manipulate {MANIPULATE_TAKE,MANIPULATE_HOLD}
weight 10
cost 1 IRON_PIECE
type ITEM_TRASH
end

	        furnace
names {"furnace"}
title "a primitive furnace"
descr "A primitive furnace radiates heat and light."
extra {}
"A primitive furnace of stone and rocks, but still effective enough to
work bronze."
bright 2
weight 100000
type ITEM_TRASH
end

        	skull
names {"human skull","skull"}
title "a human skull"
descr "A human skull grins at you from the ground."
extra {}
"A yellowing, human skull. As you examine it, you notice several bite
marks on the yellow bone. To Be Or Not To Be!&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_HOLD}
cost 1 IRON_PIECE
weight 6
type ITEM_TRASH
end

        bone
names {"bone"}
title "a small bone"
descr "A small bone lies among the litter."
extra {}
"A small bone, broken and mangled.&n
A small bone clearly requires a bone fighting style.&n"
manipulate {MANIPULATE_TAKE, MANIPULATE_HOLD}
cost 1 IRON_PIECE
weight 1
type ITEM_TRASH
end

		dummy
names {"dummy","halfling"}
title "a small dummy"
descr "A small dummy swings here on a hemp rope, receiving blows and kicks."
extra {}
"A small dummy made of hide and stuffed with straw. You notice that
whoever made it, took pains to make it look like a halfling - straight
down to the hairy feet and fat belly. The features seem vaguely
familiar..."
manipulate {MANIPULATE_TAKE}
cost 5 IRON_PIECE
weight 40
type ITEM_TRASH
end

	        oldboat
names {"smashed boat","boat"}
title "a smashed boat"
descr "A large boat lies here, smashed into pieces."
extra {}
"The boat was serviceable once, but now only pieces remain."
manipulate {MANIPULATE_TAKE}
weight 50
cost 1 IRON_PIECE
type ITEM_TRASH
end

	lockpick
names {"lockpicks","picks","set"}
title "a set of lockpicks"
descr "Someone dropped a set of lockpicks here, can you use it?"
extra {}
"A set of lockpicks, made from bronze. A skilled thief could make good
use of them."
extra {"$identify"}
"The common tools of a thief, those lockpicks aid you in picking locks (and
nose, should you desire to do so).&n"
extra {"$improved identify"}
"This set of lockpicks adds 5% to your pick locks abilities.&n"
manipulate {MANIPULATE_TAKE,MANIPULATE_HOLD}
weight 1
cost 1 SILVER_PIECE
rent 40 IRON_PIECE
dilcopy abi_restrict@function(ABIL_DEX,20,0,0,"dex_rest@skaven");
dilcopy abi_restrict@function(ABIL_BRA,15,0,0,"bra_rest@skaven");
type ITEM_OTHER
end

	        skmeat
names {"meat","hunk","flesh"}
title "a large hunk of meat"
descr "A large hunk of foul-smelling meat lies here."
extra {}
"A large hunk of foul smelling meat of unindentified source. Your stomach
revolts at the thought of eating this."
manipulate {MANIPULATE_TAKE}
FOOD_DEF(5,15)
weight 3
cost 2 IRON_PIECE
end

	        meatside
names {"side","meatside","meat"}
title "a side of meat"
descr "A huge side of meat lies here."
extra {}
"A huge side of smoked meat. There is some good eating on one of those!"
manipulate {MANIPULATE_TAKE}
FOOD_DEF(12,0)
weight 15
cost 2 COPPER_PIECE
end


		skale
names {"ale","jug","potion"}
title "a jug of skaven ale"
descr "A large earthware jug stands here."
extra {}
"A large jug of skaven ale, very dark and rather dangerous to all people
with non-skaven stomach. It is said that quaffing skaven ale will cause
you to become stronger but the side effects may be deadly."
extra {"$identify"}
"This potion can be deadly in use but quite effective as a strength booster."
manipulate {MANIPULATE_TAKE,MANIPULATE_HOLD}
POTION_DEF(50,SPL_RAISE_STR,SPL_POISON,SPL_RAISE_CON)
weight 2
cost 5 GOLD_PIECE
end

		rucksack
names {"rucksack","sack"}
title "a leather rucksack"
descr "A large leather rucksack lies here in a heap."
extra {}
"A large leather rucksack, good for those long walk in nature. A leather 
thong enables you to close and open it." 
manipulate {MANIPULATE_TAKE,MANIPULATE_WEAR_BACK,MANIPULATE_ENTER} 
CONTAINER_DEF(200)
open {EX_OPEN_CLOSE,EX_CLOSED}
weight 3
cost 5 COPPER_PIECE
end

	        bonefire
names {"bonefire","fire"}
title "a large bonefire"
descr "A large bonefire sends light, heat and smoke into the room."
extra {}
"A huge fire, the wood seems to have been soaked in some sort of oil,
burning sharply and with a lot of thick, foul smoke."
bright 2
weight 10000
type ITEM_OTHER
end

        	brazier
names {"brazier","fire"}
title "a large bronze brazier"
descr "A fire burns brightly in a large bronze brazier."
extra {}
"A large bronze brazier, filled with dark oil, burning brightly. It gives
off a lot of light, heat and quite a lot of smoke."
bright 3
weight 15
type ITEM_OTHER
end

/* Quest for the waraxe of Scyld - the weapon and Bjorn items	*/

	scyld_axe
names {"waraxe of Scyld","waraxe","war","axe"}
title "the waraxe of Scyld"
descr 
"Your eyes shine as you spot a bloody, double-headed waraxe at your feet."
extra {}
"A great, double-headed waraxe, a single strong rune struck into its 
blade. The royal sigil of the House of Scyldings is clearly visible on 
the handle. This was the weapon of Scyld, king of the Danes, the first in 
the House of Scyldings. The steel of this weapon was heaten in the eternal 
fires of the dwarven forges and tempered in blood of men and trolls, the 
handle, smoothed by the countless hands, was carved of the wood of the 
Great Ash Yggdrasil, the world tree itself. The legends has that the rune 
on the weapon was struck by Tyr, a gift to the mortals, creating the 
weapon of heroes." 
extra {"broad double-head of the axe","head","steel"}
"The broad head glimmers strongly, the steel unsurpassed in its quality. 
A single rune shines in the centre of the head.&n"
extra {"rune on the axe","rune"}
"The rune holds no meaning to you, but it shines power. Its light spells 
doom for your enemies and glory for the wielder.&n"
extra {"handle of the axe","handle","grip"}
"The handle, smoothed to a dull polish by the grip of countless hands, is 
as hard as iron, and perfectly balanced. As your hands touch it, a 
feeling of life beyond life and lore beyond your comprehension flood you, 
forcing a gasp from your lips.&n"
extra {"royal sigil of Scyldings","sigil","royal sigil"}
"The royal sigil of king Scyld, the first in the line of the House of 
Scyldings and the ancestor of Beowulf, Healfdene and Hrothgar, the 
king-heroes of the Danes.&n"
extra {"$wear_s"}
"You wield $2n, it feels heavy in your hand."
extra {"$wear_o"}
"$1n wields $2n and $1s eyes narrow dangerously."
extra {"$rem_s"}
"You put your $2N away for further violence later."
extra {"$rem_o"}
"$1n puts $1s $2N away, you are sure that more violence is to follow later."
extra {"$no_engrave"}
""
extra {"$identify"}
"Your spell battle the magic of the axe and unveils a lore long hidden, 
the strength given by the weapon, the life granted, the easiness with 
which it steals life and seeks the enemy, the rage which it grants to the 
wielder, the unforgiveness with which it treats the unworthy ones.&n"
extra {"$improved identify"}
"With a great force of will, you decipher the flashes of wisdom and 
assemble it into a knowledge. You realise that the weapon will raise your 
Strength by 4 and your Constitution and Hitpoints stats by 2 each. It 
will also add 10% battleaxe skill. If a warcry is uttered in combat 
(command 'warcry'), the waraxe will aid your hand in a mighty blow to 
fell your enemy, and if the rage is awakened (command 'rage'), the axe 
will send its power into the wielder, raising his power once again.&n
The power of the axe must be recharged by a ritual of power - the wielder 
must sit, offering a sacrifice of blood and a bone of the earth itself - a 
diamond of the dwarfes to cleanse and channel the power of the warrior. The 
word to begin ritual is 'commence' and its succes depends on your 
stamina.&n 
This great axe is of craftmanship 18 and magic bonus 15.&n" 
WEAPON_DEF(WPN_BATTLE_AXE,18,15)
manipulate {MANIPULATE_TAKE,MANIPULATE_WIELD}
STR_TRANSFER(+4)
HIT_TRANSFER(+2)
CON_TRANSFER(+2)
WEAPON_TRANSFER(WPN_BATTLE_AXE,+10)
weight 18
cost 10 PLATINUM_PIECE
spell 70
dilcopy quest_restrict@function(SCYLD_DONE,30,50,"no_scyld@skaven");	
dilcopy abi_restrict@function(ABIL_STR,80,20,30,"str_rest@skaven");
dilcopy abi_restrict@function(ABIL_CON,40,20,30,"con_rest@skaven");
dilcopy weap_restrict@function(WPN_BATTLE_AXE,75,20,30,"axe_rest@skaven");
dilcopy level_restrict@function(40,20,30,"lvl_rest@skaven");

dilbegin recall chargeritual();
var
	ting 	: unitptr;
	pc 	: unitptr;
	flux	: integer;
code
{
heartbeat:=PULSE_SEC*4;
	:start:
wait (SFB_CMD,(self.equip==WEAR_WIELD)and(command("commence")));
pc := self.outside;
secure(pc,start);
block;
/* ---------------- Check if sitting down ----------------------- */
if (pc.position != POSITION_SITTING)
{
act("You cannot commence with the ritual until you sit down!",
A_ALWAYS,pc,self,null,TO_CHAR);
goto start;
}
/* ---------------- Check if sitting outside -------------------- */
if ((pc.outside.movement == SECT_INSIDE)or
(pc.outside.roomflags == UNIT_FL_INDOORS))
{
act("You cannot commence with the ritual unless you are outdoors!",
A_ALWAYS,pc,self,null,TO_CHAR);
goto start;
}
/* ---------------- Check if mana over 75 ----------------------- */
if (pc.mana<75)
{
act("Your mana is too low, you have not enough mental strength to go "+
"through with the ritual!",A_ALWAYS,pc,self,null,TO_CHAR);
goto start;
}
/* ---------------- Check if has a diamond in the inventory ----- */
ting:=findunit(pc,"diamond",FIND_UNIT_IN_ME,null);
secure(ting,nodiamond);
if (ting)
{
act("You hold your $2N in front of you and grasp your diamond in a "+
"firm hand.",A_ALWAYS,pc,self,null,TO_CHAR);
act("$1n holds $1s $2N in front of $1m, and grasp a diamond in a "+
"firm hand.",A_ALWAYS,pc,self,null,TO_REST);
pause;
/* ----------------- Check for Constutition --------------------- */
flux := (openroll(120,5));
if (flux>pc.abilities[ABIL_CON])
{
act("The rune on the waraxe glows with a fierce light, your muscles "+
"scream in protest, your mind battles the onslaught of the spell!",
A_ALWAYS,pc,self,null,TO_CHAR);
act("The rune on $1n's waraxe glows with a fierce light, $1n's muscles "+
"shake, sweat covers $1s brow!",A_SOMEONE,pc,self,null,TO_REST);	
pause;
pc.hp := 0;
pc.endurance := 0;
pc.mana := 0;
act("Your diamond explodes in your hand!",A_ALWAYS,pc,self,null,TO_CHAR);
act("$1n's diamond explodes in $1s hand!",A_SOMEONE,pc,self,null,TO_REST);
act("&c+rThe ritual is too much for you, you lose your grasp on "+
"conciousness as terrible forces shake your body!&cw",
A_ALWAYS,pc,self,null,TO_CHAR);
act("$1n screams and topples over, violent spasm shaking $1s body, "+
"energy bursting from his $2N!",A_SOMEONE,pc,self,null,TO_REST);
position_update(pc);
goto start;
}
else
{
act("The rune on your waraxe glow in a fierce light, your arm shakes "+
"yet remains strong.",A_ALWAYS,pc,self,null,TO_CHAR);
act("The rune on $1n's $2N glows in a fierce light, $1s arm shakes, "+
"the muscles tense, yet remains strong!",
A_SOMEONE,pc,self,null,TO_REST);
pause;
act("Your diamond glows suddenly, bathing you in a strong, white light!&n"+
"It disintegrates into smoke in your clenched fist."
,A_ALWAYS,pc,self,null,TO_CHAR);
act("$1n's diamond glows suddenly, bathing $1m in a strong, white light!&n"+
"The diamond disintegrates in smoke in $1n's clenched fist."
,A_SOMEONE,pc,self,null,TO_REST);
unsecure(ting);
destroy(ting);
pause;
act("The rune glows strong and fierce, a lighting strikes the axe-blade "+
"and for second your body is lifted by the power of it, before you "+
"collapse back to the ground, exhausted.",A_ALWAYS,pc,self,null,TO_CHAR);
act("A lightning strikes the axe-blade, for a second $1n is lifted off "+
"the ground by the sheer power of the charge before collapsing, exhausted."
,A_SOMEONE,pc,self,null,TO_REST);
pc.hp := rnd(1,10);
pc.endurance := rnd(1,10);
pc.mana := rnd(1,5);
position_update(pc);
sendto ("add charge",self);
}
goto start;
}
/* ---------------- If no diamond or something else matter ------ */	
	:nodiamond:
{
act("You commence the ritual, $2n crackles in a sudden burst "+
"of energy!",A_ALWAYS,pc,self,null,TO_CHAR);
act("$1n commences the ritual of power, $1s $2N crackles in a sudden burst "+
"of energy!",A_ALWAYS,pc,self,null,TO_REST);
pc.hp := rnd(0,10);
pc.endurance := rnd(0,10);
pc.mana := rnd(0,10);
act("You are thrown back by the burst, your energy is not channeled in a "+
"proper way!" ,A_ALWAYS,pc,self,null,TO_CHAR);
act("$1n is thrown to the ground by the burst!"
,A_SOMEONE,pc,self,null,TO_REST); 
position_update(pc);
}
goto start;
}
dilend

dilbegin recall aware waraxemashing();
var
	pc	: unitptr;
        i 	: integer;
        vict 	: unitptr;
	n	: integer;
        charge	: integer;
	pwr	: integer;
	random	: integer;
code
{
pwr:=10;
	:init:
heartbeat := PULSE_SEC*3;
charge:=interrupt (SFB_MSG,((self==activator)and(argument=="add charge"))
,charge);
	:start:
wait(SFB_CMD,(command("warcry")or(command("rage")))and
(self.equip==WEAR_WIELD)and(self.outside.position == POSITION_FIGHTING));
pc := self.outside;
vict:= pc.fighting;
if (vict==null) goto no_person;
secure(vict,start);
secure(pc,start);
block;

/* ---------------- Warcry DIL --------------------------- */

if (command("warcry"))
{
act("You howl a cry of war as you swing your $2N!",
A_ALWAYS,pc,self,null,TO_CHAR);
act("$1n howls a cry of war as $1e swings $1s $2N!",
A_SOMEONE,pc,self,null,TO_REST);
if (pwr<=0) goto fail1;
pwr:=pwr-1;
i := openroll(130,10);
if (i < pc.abilities[ABIL_STR])
{
act("The rune on your $2N flashes in a furious light, your slash almost "+
"cuts $3n in half!"
,A_SOMEONE,pc,self,vict,TO_CHAR);
act("$1n's slash sends $3n reeling back, almost cutting $3m in half!"
,A_SOMEONE,pc,self,vict,TO_NOTVICT);
act("$1n's slash slams into you, your own blood floods your wiev!",
A_SOMEONE,pc,self,vict,TO_VICT);  
n:= cast_spell(SPL_ACIDBALL_1,self,self,vict,"");
pause;
goto start;
}
else
{
act("The rune on your $2N flashes, but you fail to put all your strength "+
"into the slash!",A_ALWAYS,pc,self,vict,TO_CHAR);
act("$1n's swing is weak, it misses $3n by a mile!",
A_SOMEONE,pc,self,vict,TO_NOTVICT);
act("$1n's swing is weak, it misses you by a mile!",
A_SOMEONE,pc,self,vict,TO_VICT);
pause;
}
goto start;
}
if (command("rage"))
{
act("You scream in rage, gripping your waraxe tightly!",
A_ALWAYS,pc,self,null,TO_CHAR);
act("$1n screams in rage, $1s waraxe a blur of steel!",
A_SOMEONE,pc,self,null,TO_REST);
if (pwr<=0) goto fail2;
pwr:=pwr-1;
i := openroll(110,5);
if (i < pc.abilities[ABIL_CON])
{
act("Your fury fills you and the world turns red..."
,A_ALWAYS,pc,self,vict,TO_CHAR);
act("A tiny stream of drool trickles from in between $1n's clenched jaws!"
,A_SOMEONE,pc,self,vict,TO_REST);
n:= cast_spell(SPL_RAISE_STR,self.outside,self,pc,"");
pause;
goto start;
}
else
{
pause;
act("You fail to awake your inner fury!"
,A_SOMEONE,pc,self,vict,TO_CHAR);
pause;
}
goto start;
}
	:fail1:
act("You swing your axe mightily, but miss by a mile, it is time "+
"to commence another ritual of power!",A_ALWAYS,pc,self,null,TO_CHAR);
act("$1n swings $1s $2N mightily, but misses by a mile, the rune "+
"silent and dark!",A_SOMEONE,pc,self,null,TO_REST);
goto start;

	:fail2:
act("The rune on your $2N is dark and silent, you cannot awake your inner "+
"fury without its aid!",A_ALWAYS,pc,self,null,TO_CHAR);
goto start;

	:charge:
clear (charge);
if (pwr<10)
pwr:=pwr+(pc.abilities[ABIL_CON]/30+rnd(0,1));
if (pwr>10) pwr:=10;
pause;
act("A distant scream of trumph resounds vaguely in your ears..."
,A_ALWAYS,self.outside,self,null,TO_CHAR); 
goto init;

	:no_person:
act("Your foe must have escaped you!",A_ALWAYS,pc,self,null,TO_CHAR);
goto start;
}
dilend

dilbegin scyld_kill();
code
{
heartbeat := PULSE_SEC*3;
        :start:
wait(SFB_COM, command(CMD_AUTO_COMBAT)and(self.equip == WEAR_WIELD) and
(self.outside.fighting.hp < 10));
if (self.outside.fighting.race <= RACE_OTHER_HUMANOID)
{
if (rnd(0,1)>0)
{
act("Your heavy cut goes clean through $3n's abdomen muscle and shatters "+
"$3s spine, cleaving $3m in two.",
A_ALWAYS, self.outside, null, self.outside.fighting, TO_CHAR);
act("$1n's axe cuts through your abdomen and shatters your spine...",
A_SOMEONE, self.outside, null, self.outside.fighting, TO_VICT);
act("$1n cuts cleanly through $3n's abdomen muscle and shatters $3s spine "+
" cleaving $3m in two."
,A_SOMEONE, self.outside, null,self.outside.fighting,TO_NOTVICT); 
self.outside.fighting.hp := -8;
position_update(self.outside.fighting);
pause;
goto start;
}
if (rnd(0,1)>0)
{
act("Your mighty slash shatters $3n's skull.",
A_ALWAYS, self.outside, null, self.outside.fighting, TO_CHAR);
act("$1n's slash cleaves open your head.",
A_SOMEONE, self.outside, null, self.outside.fighting, TO_VICT);
act("$1n's slash shatters $3n's skull, you duck the flying gore."
,A_SOMEONE, self.outside, null, self.outside.fighting,TO_NOTVICT);
self.outside.fighting.hp := -8;
position_update(self.outside.fighting);
pause;
goto start;
}
act("Your blow smashes into the jaw of $3n, forcing it through $3s brains!",
A_ALWAYS, self.outside, null, self.outside.fighting, TO_CHAR);
act("$1n's blow smashes your jaw through your brains...",
A_SOMEONE, self.outside, null, self.outside.fighting, TO_VICT);
act("$1n's blow smashes into the jaw of $3n, forcing it through $3s brains!"
,A_SOMEONE, self.outside, null, self.outside.fighting,TO_NOTVICT);
self.outside.fighting.hp := -8;
position_update(self.outside.fighting);
pause;
goto start;
}
else if (rnd(0,1)>0)
{
act("You cleave $3n in two with an overhand stroke!",
A_ALWAYS, self.outside, null, self.outside.fighting, TO_CHAR);
act("$1n's slash drowns your pains in a sea of blood...",
A_SOMEONE, self.outside, null, self.outside.fighting, TO_VICT);
act("$1n cleaves $3n in two with an overhand stroke, you are drenched in"+
" blood!",A_SOMEONE, self.outside, null, self.outside.fighting,TO_NOTVICT);
self.outside.fighting.hp := -7;
position_update(self.outside.fighting);
pause;
goto start;
}
else
{
act("You bury your waraxy deep in the body of $3n, pulling it out with a "+
"sickening squelch...",
A_ALWAYS, self.outside, null, self.outside.fighting, TO_CHAR);
act("$1n's slash shatters your chest...",
A_SOMEONE, self.outside, null, self.outside.fighting, TO_VICT);
act("$1n buries $1s waraxe deep in the body of $3n, pulling it out with a "+
"sickening squelch..."
,A_SOMEONE, self.outside, null,self.outside.fighting,TO_NOTVICT); 
self.outside.fighting.hp := -8;
position_update(self.outside.fighting);
pause;
goto start;
}
}
dilend
end

		horn_helm
names {"horned helm","helm","helmet"}
title "a horned helm"
descr "A large, steel helmet with sharp, black horns lies here."
extra {}
"A large helmet of fine steel, the marks on it witnessing many a blow 
stopped. A noseguard shields your face and two black horns protrude on 
each side of the helmet."
extra {"$wear_s"}
"You put the $2N on your head and slam your fist on top of it to make it fit 
properly." 
extra {"$wear_o"}
"$1n puts $2n on $1s head and slams a fist on top of it to make it fit 
properly."
extra {"$identify"}
"This armour lower your perception.&n"
extra {"$improved identify"}
"Brain will fall with one. The 
craftmanship of the helmet is 0 and the magic bonus 0.&n" 
ARMOUR_PLATE(0,0)
manipulate{MANIPULATE_TAKE,MANIPULATE_WEAR_HEAD}
BRA_TRANSFER(-1)
weight 6
cost 4 SILVER_PIECE
rent 150 IRON_PIECE
dilcopy abi_restrict@function(ABIL_STR,70,0,0,"str_rest@skaven");
dilcopy abi_restrict@function(ABIL_CON,40,0,0,"con_rest@skaven");
end

		runestone
names {"runestone","stone"}
title "a runestone"
descr "A black, flat stone lies here, covered with runes."
type ITEM_OTHER
manipulate {MANIPULATE_TAKE,MANIPULATE_HOLD}
special SFUN_BULLETIN_BOARD "citizen"
weight 8
rent 5 GOLD_PIECE

dilbegin rune1();
var
   pc : unitptr;
code
{
   :init:
   heartbeat := PULSE_SEC*5;
   on_activation((self.position <= POSITION_SLEEPING),skip);

   :start:
   wait(SFB_CMD,(command("drop"))and(argument in self.names)and 
   (activator.type == UNIT_ST_PC));
   pc := activator;
   secure(pc,lostpc);
   block;
   act("You draw a small circle on the ground.", 
   A_SOMEONE,pc,null,null,TO_CHAR);
   act("$1n draws a small circle on the ground.",
   A_SOMEONE,self.outside,null,null,TO_ROOM);pause;
   act("You place your runestone within the circle.", 
   A_SOMEONE,pc,null,null,TO_CHAR);
   act("$1n places $1s runestone within the circle.",
   A_SOMEONE,self.outside,null,null,TO_ROOM);pause;
   link(self,pc.outside);
   act("The runestone glows faintly.", 
   A_SOMEONE,pc,null,null,TO_CHAR);
   act("The runestone glows faintly.",
   A_SOMEONE,self.outside,null,null,TO_ROOM);

   :lostpc:
   unsecure(pc);
   goto start;
}
dilend

dilbegin rune2();
var
   pc : unitptr;
code
{
   :init:
   heartbeat := PULSE_SEC*5;
   on_activation((self.position <= POSITION_SLEEPING),skip);

   :start:
   wait(SFB_CMD,(command("get"))and(argument in self.names)and
   (activator.type == UNIT_ST_PC));
   pc := activator;
   secure(pc,lostpc);
   block;
   act("You pick up the runestone.", 
   A_SOMEONE,pc,null,null,TO_CHAR);
   act("$1n picks up the runestone.",
   A_SOMEONE,self.outside,null,null,TO_ROOM);pause;
   act("You erase the circle.", 
   A_SOMEONE,pc,null,null,TO_CHAR);
   act("$1n erases the circle.",
   A_SOMEONE,self.outside,null,null,TO_ROOM);pause;
   link(self, pc);
   act("The runestone stops glowing.", 
   A_SOMEONE,pc,null,null,TO_CHAR);
   act("The runestone stops glowing.",
   A_SOMEONE,self.outside,null,null,TO_ROOM);

   :lostpc:
   unsecure(pc);
   goto start;
}
dilend

dilbegin rune3();
code
{
   :start:
   wait(SFB_CMD,((command(CMD_LOOK))or(command(CMD_EXAMINE)))and
   (argument in self.names)and(activator.type == UNIT_ST_PC));
   if(self.outside.type == UNIT_ST_PC){
      block;
act("The runestone bears a small inscription in the runic language:&n"+
"The magic of the stone works only when in conjunction with Earth.&n"+
"Beware, as the stone can interfere with the Bulletin Boards around;"+
"put it into a bag when not needed."
,A_SOMEONE,self.outside,null,null,TO_CHAR);
   }
   goto start;
}
dilend
end


%reset

load bjorn into midgaard/th_entrance max 1
{
	equip horn_helm 		WEAR_HEAD
	equip scyld_axe 		WEAR_WIELD
	equip dwarves/mith_skirt 	WEAR_LEGS
	equip midgaard/lth_boots 	WEAR_FEET
}

load alake into midgaard/market_sq max 1
{
	equip alake_cloth position 	WEAR_BODY 
	equip ear_jangles position 	WEAR_EAR_L
	equip ear_jangles position 	WEAR_EAR_R
	equip silver_bangle position 	WEAR_WRIST_R
	equip gold_bangle position 	WEAR_WRIST_L
	equip silver_ringlets position 	WEAR_ANKLE_L
}

load runestone into skray_room zonemax 1

load skboozer into camp52 zonemax 1
{	equip brigantine position WEAR_BODY
	equip ocleaver position WEAR_WIELD
	equip spkshield position WEAR_SHIELD
	equip st_bracers position WEAR_ARMS
	equip st_greaves position WEAR_LEGS
	equip earstud position WEAR_EAR_L
	load skale
}

load bonefire into camp52

load skdrunk into camp21 zonemax 2
{	equip brigantine position WEAR_BODY
	equip cleaver position WEAR_WIELD
	equip skale position WEAR_HOLD
	equip st_bracers position WEAR_ARMS
	equip earhoop position WEAR_EAR_L
}

load skdrunk into camp9 zonemax 2
{       equip brigantine position WEAR_BODY 
        equip cleaver position WEAR_WIELD
        equip skale position WEAR_HOLD
        equip st_bracers position WEAR_ARMS
        equip earstud position WEAR_EAR_L
}


load plaguebearer into turning_point@ratswarf max 1
{	equip ragrobe position WEAR_ABOUT
	equip standard position WEAR_HOLD
	equip fistnail position WEAR_WIELD
	equip earstud position WEAR_EAR_L
}

load skeleton into camp1 local 1
load godslayer into camp1 local 1

load water into camp40 max 1

load brazier into camp8 local 1
load bonefire into camp15 local 1
load bonefire into camp21 local 1

load skeater into camp25a local 1
{       equip brigantine position WEAR_BODY
        equip st_bracers position WEAR_ARMS
        equip jagspear position WEAR_WIELD 
        equip skmeat position WEAR_HOLD
	equip earhoop position WEAR_EAR_R
}


load skeater into camp8 local 1
{	equip brigantine position WEAR_BODY
	equip st_bracers position WEAR_ARMS
	equip jagspear position WEAR_WIELD
	equip skmeat position WEAR_HOLD
}

load skeater into camp25a local 1
{       equip brigantine position WEAR_BODY
        equip st_greaves position WEAR_LEGS
        equip cleaver position WEAR_WIELD 
        equip skmeat position WEAR_HOLD   
	equip earstud position WEAR_EAR_R
}


load skeater into camp15 local 1
{	equip brigantine position WEAR_BODY
	equip st_greaves position WEAR_LEGS
	equip cleaver position WEAR_WIELD
	equip skmeat position WEAR_HOLD
}


load skscout into camp4 local 1
{	equip brigantine position WEAR_BODY
	equip st_bracers position WEAR_ARMS
	equip st_greaves position WEAR_LEGS
	equip ratsword position WEAR_WIELD
	equip katar position WEAR_HOLD
	load lockpick
}

load skscout into camp6 local 1
{	equip brigantine position WEAR_BODY
	equip st_bracers position WEAR_ARMS
	equip brcap position WEAR_HEAD
	equip earhoop position WEAR_EAR_L
	equip ratsword position WEAR_WIELD
	equip spkshield position WEAR_SHIELD
}

load skgutter into camp35 zonemax 7
{       equip brigantine position WEAR_BODY
        equip st_bracers position WEAR_ARMS
        equip st_greaves position WEAR_LEGS
        equip brcirclet position WEAR_ANKLE_L
        equip cleaver position WEAR_WIELD
        equip spkshield position WEAR_SHIELD
}

load skgutter into camp20 zonemax 7
{       equip brigantine position WEAR_BODY
        equip st_bracers position WEAR_ARMS
        equip st_greaves position WEAR_LEGS
        equip earhoop position WEAR_EAR_L   
        equip cleaver position WEAR_WIELD   
        equip spkshield position WEAR_SHIELD
}

load skgutter into camp25a zonemax 7
{       equip brigantine position WEAR_BODY
        equip st_bracers position WEAR_ARMS
        equip st_greaves position WEAR_LEGS
        equip cleaver position WEAR_WIELD
	equip katar position WEAR_HOLD
}


load skgutter into camp8 zonemax 7
{	equip brigantine position WEAR_BODY
	equip st_bracers position WEAR_ARMS
	equip st_greaves position WEAR_LEGS
	equip earstud position WEAR_EAR_R
	equip cleaver position WEAR_WIELD
	equip spkshield position WEAR_SHIELD
}

load skgutter into camp15 zonemax 7
{       equip brigantine position WEAR_BODY
        equip st_bracers position WEAR_ARMS
        equip st_greaves position WEAR_LEGS
	equip cleaver position WEAR_WIELD
	equip fistnail position WEAR_HOLD
	equip rucksack position WEAR_BACK
	{	load skale	}
}

load skpiercer into camp21 zonemax 7
{       equip brigantine position WEAR_BODY
        equip st_bracers position WEAR_ARMS
        equip st_greaves position WEAR_LEGS
	equip jagspear position WEAR_WIELD
	equip spkshield position WEAR_SHIELD
	equip brcirclet position WEAR_ANKLE_R
}

load skpiercer into camp13 zonemax 7
{       equip brigantine position WEAR_BODY
        equip st_bracers position WEAR_ARMS
	equip jagspear position WEAR_WIELD
	equip katar position WEAR_HOLD
}

load furnace into camp42 local 1
load skcrafter into camp42 local 1
{	equip skapron position WEAR_ABOUT
	equip brcirclet position WEAR_ANKLE_L
	equip earhoop position WEAR_EAR_L
	equip skgloves position WEAR_HANDS
	equip bmallet position WEAR_WIELD
	equip halfslash position WEAR_HOLD
}

load jagspear into camp21 local 1
load meatside into camp21 local 1
load skhunter into camp21 zonemax 1
{	equip gutknife position WEAR_WIELD
	equip rawhide position WEAR_HOLD
	equip brigantine position WEAR_BODY
	equip earstud position WEAR_EAR_L
	equip rucksack position WEAR_BACK
	{	load skale
		load skmeat	}
}

load skfighter into camp25a local 1
{       equip cleaver position WEAR_WIELD    
        equip spkshield position WEAR_SHIELD
        equip brigantine position WEAR_BODY
        equip st_bracers position WEAR_ARMS
        equip st_greaves position WEAR_LEGS
        equip earhoop position WEAR_EAR_L
        load skale
}
load dummy into camp25a local 1

load skfighter into camp33 local 1
{	equip cleaver position WEAR_HOLD
	equip fistnail position WEAR_WIELD
	equip brigantine position WEAR_BODY
	equip st_bracers position WEAR_ARMS
	equip st_greaves position WEAR_LEGS
	equip earhoop position WEAR_EAR_L
	load skale
}

load skull into camp19 local 1
load skull into camp15 local 1
load skull into camp10 local 1
load skull into camp49 local 1
load bone into camp7 local 1
load bone into camp13 local 1
load bone into camp28 local 1
load bone into camp51 local 1
load boneclub into camp50 local 1
load boneclub into camp25 local 1
load boneclub into camp21 local 1

load dummy into camp33 local 1
load brazier into camp33 local 1

load bonefire into camp26 local 1
load bonefire into camp28 local 1
load brazier into camp25a local 1

load sksleeper into camp28 local 1
{	equip brigantine position WEAR_BODY
	equip st_bracers position WEAR_ARMS
	equip jagspear 	 position WEAR_WIELD
}

load sksleeper into camp26 local 1
{       equip brigantine position WEAR_BODY
        equip cleaver position WEAR_WIELD
        equip st_bracers position WEAR_ARMS
	equip earstud position WEAR_EAR_R
}

load skeater into camp27 local 1
{       equip brigantine position WEAR_BODY
        equip gutknife position WEAR_WIELD
        equip st_bracers position WEAR_ARMS
	equip st_greaves position WEAR_LEGS
	equip skmeat position WEAR_HOLD
	equip brcirclet position WEAR_ANKLE_R
}

load skeater into camp28 local 1
{       equip brigantine position WEAR_BODY
        equip cleaver position WEAR_WIELD
        equip st_bracers position WEAR_ARMS
	equip st_greaves position WEAR_LEGS
	equip skmeat position WEAR_HOLD
	load skale
}

load sksleeper into camp40 local 1
{	equip brigantine position WEAR_BODY
	equip st_bracers position WEAR_ARMS
	equip st_greaves position WEAR_LEGS
	equip fistnail position WEAR_WIELD
	equip spkshield position WEAR_SHIELD
}

load oldboat into camp40
load bonefire into camp40 local 1
load bone into camp38 local 1

load skeater into camp40 local 1
{	equip skmeat position WEAR_HOLD
	equip gutknife position WEAR_WIELD
	equip brigantine position WEAR_BODY
	equip st_bracers position WEAR_ARMS
	equip earstud position WEAR_EAR_L
	equip rucksack position WEAR_BACK
	{	load skale
		load skmeat
		load skmeat
		load skmeat	}
}

load brazier into camp48 local 1

load skchief into camp48 max 1
{	equip brmesh position WEAR_BODY
	equip oslasher position WEAR_WIELD
	equip okatar position WEAR_HOLD
	equip brarmlets position WEAR_ARMS
	equip st_greaves position WEAR_LEGS
	equip brcap position WEAR_HEAD
	equip earcuff position WEAR_EAR_L
}

load skmonk into camp48 max 1
{	equip banner position WEAR_BACK
	equip brstaff position WEAR_WIELD
	equip gutknife position WEAR_HOLD
	equip brtorc position WEAR_CHEST
	equip brcirclet position WEAR_ANKLE_L
	equip earhoop position WEAR_EAR_R
}

load skguard into camp48 local 1
{	equip cleaver position WEAR_WIELD
	equip spkshield position WEAR_SHIELD
	equip earstud position WEAR_EAR_L
	equip brigantine position WEAR_BODY
	equip st_bracers position WEAR_ARMS
	equip st_greaves position WEAR_LEGS
	load skale
}

load skchamp into camp50 max 1
{	equip maiden position WEAR_WIELD
	equip brplate position WEAR_BODY
	equip brgreaves position WEAR_LEGS
	equip brarmpl position WEAR_ARMS
	equip brcap position WEAR_HEAD
	equip spkshield position WEAR_SHIELD
	equip sspiral position WEAR_WRIST_L
}

load skguard into camp50 local 1
{	equip cleaver position WEAR_WIELD
	equip spkshield position WEAR_HOLD
	equip brigantine position WEAR_BODY
	equip st_bracers position WEAR_ARMS
	equip st_greaves position WEAR_LEGS
	equip brcap position WEAR_HEAD
	equip earstud position WEAR_EAR_R
}

load deathrat into camp21 zonemax 3
load deathrat into camp32 zonemax 3

load caverat into camp16 zonemax 7
load caverat into camp25 zonemax 7
load caverat into camp31 zonemax 7
load caverat into camp44 zonemax 7
load caverat into camp27 zonemax 7
load caverat into camp47 zonemax 7
load caverat into camp35 zonemax 7

load bloodrat into camp6 zonemax 5
load bloodrat into camp17 zonemax 5
load bloodrat into camp50 zonemax 5
load bloodrat into camp33 zonemax 5
load bloodrat into camp9 zonemax 5
load bloodrat into camp37 zonemax 5

%end





