/*
filename    seren
password    green1
changedby   eirinn
EmailAdd     Jpc - John <clarej@tcd.ie>
request     compile
version     77
END HEADER*/

/* 30th May 1997        - Added colour object */

/* 14th May 1997 	- Celerime's boots & elf traveller moved to seren1.zon in order
			to comply with limits.
			- Vox Altur spell level increased to make it more powerful.
			- glade@seren tweaked a bit with dil. */

/* 7th May 1997	- Manum Altur has been replaced with a staff.
			- Celerime's boots have been removed. */

/* 2nd May 1997	- brought into new limits */

/* 28th April 1997	- Added connection to Wynd and Malice's gobtown */

#include <composed.h> 
 
%zone seren
 
title "The Valley of Serenity" 
 
lifespan 20
 
reset RESET_ANYHOW 
 
creators {"eirinn"} 
 
notes "Serenity: Zone 1/2. My first zone for Valhalla USA. Planned as a large zone, centred around a coven of priests and the mighty Zoat, Zolan. The Valley of Serenity is all that remains of the goodness that the elves of olden times brought into the world. The zone is just south of the Etz-Nab woods. Any problems/bug reports(/advice? :)) - Please send them to clarej@tcd.ie. Thanks to Rikuo for the idea of personalising Manum Altur and Fewl for the idea of the elf boots.&n--28th April 1997 - Added connection to Wynd and Malice's gobtown."

help "This zone is for those who have attained level 50. There is a book in the zone that explains its history. It can be found in the Temple of the Coven at the centre of the forest. Good luck! Any problems, talk to &c+gEirinn clarej@tcd.ie&cw."


/* +++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++  E X T R A S  M A C R O S   +++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++*/

/* MACROS for various extras throughout the zone */

#define LAKE_EXTRAS \
    extra {"black water", "water", "mirror"} \
"The water is black as night and glassy like a mirror - it reflects all \
light that hits it, denying your eyes any view of the depths." \
    extra {"shore"} \
"The shore is barely visible as it is slowly swallowed by the fog banks. \
 You feel your sense of hope swallowed along with it." \
    extra {"fog"} \
"The Fog is unlike any you have seen before. It is thick and dense, almost \
tangible, and it seems to withdraw as your boat passes through it. It feels \
 almost alive." \

#define OUT_TEMPLE_EXTRAS \
    extra {"ground", "stone slabs", "slabs", "stone", "slab"} \
"The stone slabs that pave the ground have been worn by age and the traffic \
of large animals, probably horses." \
    extra {"courtyard"} \
"The courtyard is wide, and surrounds the Temple of Odin. It would make a \
good exercise ground for horses. The courtyard itself is ringed with a fortified \
wall which must have been built to protect the Temple from those who would \
destroy or damage it." \
    extra {"temple"} \
"The Temple of the Coven to Odin stands in the centre of the Courtyard. It is \
a large building and it appears to be very old, much older than the fortifications \
around it. There appear to be two floors to it." \
 
#define IN_TEMPLE_EXTRAS \
    extra {"floor"} \
"The floor is made of flat slabs of sheeted granite, tiled together in a simple \
square pattern. Some of the stones bear inscriptions as to their origin and who \
blessed them. Most of them read 'Brought to this Valley by Pater Drusus \
Emalon in the Year of Hiding.' These must be the original stones, and Pater \
Drusus one of the founders." \
    extra {"ceiling"} \
"The ceiling is about three metres high and quite flat. It looks like the same \
granite as the floor stones." \
    extra {"walls"} \
"The walls are draped with tapestries. About every four metres, a torch is \
mounted about two metres up on the wall, providing light. There aren't any \
windows to provide this service." \
    extra {"torches", "torch"} \
"The torches are lit and seem to burn endlessly. You can't put them out, \
no matter what you try. They provide an orange flickering light." \

#define CELL_EXTRAS \
    extra {"torch"} \
"The torch is lit and seems to burn endlessly. You can't put it out, \
no matter what you try. It provides an orange flickering light." \
    extra {"floor"} \
"The floor is made of flat slabs of sheeted granite, tiled together in a simple \
square pattern. Some of the stones bear inscriptions as to their origin and who \
blessed them. Most of them read 'Brought to this Valley by Pater Drusus \
Emalon in the Year of Hiding.' These must be the original stones, and Pater \
Drusus one of the founders." \
    extra {"bed"} \
"The bed is very Spartan. The mattress is very thin and it doesn't look \
comfortable at all. It is quite low down too." \
    extra {"chairs", "chair"} \
"The chair is made of the same mahogany as the door, but is more like a stool \
than a chair because the back is very low." \
    extra {"table"} \
"The table is quite low. It is of mahogany. The side of the Table makes you think \
it is only intended for one person to use." \

#define WALL_EXTRAS \
    extra {"flagstones", "stones", "stone", "pavement", "ground"} \
"The flagstones which pave this walkway inside the wall are similar \
to those below in the courtyard, but they are slightly smaller and \
less bleached from the sunshine." \
    extra {"courtyard"} \
"You can see the courtyard below you. The pavement there is more bleached \
by the sun than the walkway of the wall, probably because the walkway gets \
shade from the sun because of the wall itself." \
    extra {"holes", "hole"} \
"The holes let you peer out from the walls without fear of being spied \
from below." \
    extra {"forest", "trees", "tree"} \
"You can see the Forest very well from here. The walls are about level \
with the lower trees in the forest. Those around the Temple walls are \
mainly Oak and Beech. Some come very close to the walls, you could almost \
touch some of them." \

#define STABLE_EXTRAS \
    extra {"hay"} \
"The hay is in stacks piled against the walls and in the corners. There \
are scraps of it along the ground from when the horses dragged it out of \
their cells on their feet." \
    extra {"horse manure", "manure", "shit", "crap", "dung"} \
"The horses are obviously well fed, but boy does it smell....." \
    extra {"saddles", "saddle", "bridles", "bridle", "bits", "bit", "tack"} \
"The various items that make up a horse's tack can be seen hanging on the \
walls of the stable." \
    extra {"stall door", "door"} \
"The stall door is made from a cedar wood. It looks rather robust. It is \
 a half-door, which means it can be opened to let the horse look out of \
 its stall." \
 

/* End EXTRAs macros */

/* CHANI SHOP MACROS */

#define CHANI_PROD      	\
{"dreamstone1@seren 50 20", \
 "sc_heal@keep 50 100",     	\
 "sc_rem_curse@keep 20 50",     \
 "sc_inv@keep 20 50"}   	\
 
 #define CHANI_MSG \
{"$1n says 'I don't have that $3n, I'm sorry.'", \
 "$1n says '$3n, you don't even have one of those...'",  \
 "$1n says '$2n? No, I'm sorry, I don't trade in those.'", \
 "$1n says 'You cannot afford $2n, $3n. Don't waste my time.'", \
 "$1n says '$2n, just for you $3n. Please come again.'", 	\
 "$1n says 'Thank you $3n.'",    \
 "$1n says 'I don't have any $2ns left, I'm sorry $3n.'", \
 "1$n says 'I'm not open right now $3n, come back later.'", \
 "1$n says 'I don't want a $2n, thanks anyway.'",   	\
 "1$n says 'I don't have enough money, I'm sorry.'"} 	\

#define OPEN_TIMES {"4", "23"}

#define CHANI_ITEM_TYPE "2 3 4 10 23" 

#define CHANI_MAX_CASH 409600

#define CHANI_SELL_PROFIT 110

#define CHANI_BUY_PROFIT 75


#define RACE_IS_BAD(race)     \
  ( ((race) == RACE_SPIDER) or ( ((race) > RACE_DRAGON_MIN) \
 and ((race) <= RACE_ELEMENTAL_LIGHT) ) ) \

/* +++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++++++++++  M O B  M A C R O S  ++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++*/

/*
           Mobile macros for Syneen Deer, Grey Elk, Mucin, Priests, Zoat,
           Fog, and horses.
*/

#define ZOAT_GREATER(SEX,LEVE) \
   sex SEX \
   race RACE_OTHER_REPTILE \
   level LEVE \
   height 300 \
   weight 900 \
   NATURAL_DEF(WPN_CRUSH,ARM_PLATE) \
   exp 110 \
   MSET_ABILITY(15,15,10,15,15,10,10,10) \
   MSET_WEAPON(7,10,10,7,10,6) \
   MSET_SPELL(8,4,4,4,2,4,5,5,4,5,5) \
   exp 110 \
   dilcopy combat_mag@function("harm","heal",15,1); \


#define SYNEEN_DEER(SEX,LEVE) \
   sex SEX \
   race RACE_DEER \
   level LEVE \
   height 150 + LEVE \
   weight 200 + LEVE*2 \
   NATURAL_DEF(WPN_KICK,ARM_LEATHER) \
   MSET_ABILITY(33,33,5,27,2,0,0,0) \
   MSET_WEAPON(0,10,10,3,17,10) \
   MSET_SPELL(5,5,5,5,5,5,5,5,5,5,0) \
   exp 105 \

#define GREY_ELK(SEX,LEVE) \
   sex SEX \
   race RACE_DEER \
   level LEVE \
   height 200 + LEVE \
   weight 330 + LEVE*2 \
   NATURAL_DEF(WPN_KICK,ARM_HLEATHER) \
   MSET_ABILITY(30,30,2,24,2,4,8,0) \
   MSET_WEAPON(10,5,10,3,15,7) \
   MSET_SPELL(5,5,5,5,5,5,5,5,5,5,0) \

#define MUCIN(SEX,LEVE) \
   sex SEX \
   race RACE_BOAR \
   level LEVE \
   height 100 + LEVE \
   weight 240 + LEVE \
   NATURAL_DEF(WPN_BITE,ARM_HLEATHER) \
   MSET_ABILITY(30,30,2,28,10,0,0,0) \
   MSET_WEAPON(10,10,10,3,17,0) \
   MSET_SPELL(5,5,5,5,5,5,5,5,5,5,0) \
   exp 105 \

#define PRIEST(SEXE, LEVE) \
   alignment 1000 \
   sex SEXE \
   race RACE_HUMAN \
   level LEVE \
   height 140 + LEVE \
   weight 240 + LEVE \
   NATURAL_DEF(WPN_FIST,ARM_HLEATHER) \
   MSET_ABILITY(20,25,4,20,15,2,4,10) \
   MSET_WEAPON(17,0,17,0,16,0) \
   MSET_SPELL(20,0,0,0,2,4,5,5,4,5,5) \
   exp 110 \

#define FOG(LEVE) \
   MSET_ABILITY(30,35,10,20,5,0,0,0) \
   MSET_WEAPON(7,7,7,7,21,0) \
   MSET_SPELL(5,4,4,4,4,5,5,5,5,5,5) \
   sex SEX_NEUTRAL \
   race RACE_ELEMENTAL_WATER \
   alignment -1000 \
   level LEVE \
   height 300 \
   weight 300 \
   NATURAL_DEF(WPN_CRUSH,ARM_PLATE) \
   exp 110 \

#define OLAYAN(LEVE) \
   MSET_ABILITY(35,30,1,19,15,0,0,0) \
   MSET_WEAPON(7,6,6,0,30,0) \
   MSET_SPELL(5,4,4,4,4,5,5,5,5,5,5) \
   sex SEX_NEUTRAL \
   race RACE_ELEMENTAL_EARTH \
   alignment 450 \
   level LEVE \
   height 300 \
   weight 700 \
   NATURAL_DEF(WPN_FIST,ARM_PLATE) \
   exp 110 \

#define TEMPLE_HORSE(SEX,LEVE) \
   MSET_ABILITY(33,33,1,23,10,0,0,0) \
   MSET_WEAPON(6,6,6,6,15,6) \
   MSET_SPELL(4,4,4,5,5,5,5,5,6,6,6) \
   sex SEX \
   race RACE_HORSE \
   level LEVE \
   height 150 + LEVE \
   weight 300 + LEVE*2 \
   NATURAL_DEF(WPN_KICK,ARM_HLEATHER) \
   exp 100 \

/* End Mobile macros */

/* +++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++  QUEST MACROS   S E C T I O N   +++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++*/

#define COVEN_QUEST_ONGOING     "Serenity Coven quest ongoing"
#define COVEN_QUEST_FINISHED    "Serenity Coven quest completed"
#define ORACLE_VISITED          "$Oracle of Serenity visited"
#define ZOLAN_QUEST_ONGOING     "Zoat's quest ongoing"
#define ZOLAN_QUEST_FINISHED    "Zoat's quest completed"

#define MA_OWNER "$maalowner" /* For Manum Altur Claim dil */

/* +++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++  D I L C O D E   S E C T I O N   ++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++*/

%dil 

/* COLOUR DIL */

dilbegin colour_arg(); /* new arg */

var
  newarg      : string;

code
{
:start:
   wait(SFB_CMD,((command("carg"))
                  and (activator.level>=235)
                  and (activator==self.outside)));
   block; 
   if ("&&n" in argument)
   {
      act("You may not use newline characters!",
          A_ALWAYS,activator,null,null,TO_CHAR);
      log(activator.name + " attempted to use newline characters in a " +
          "colour object statement!");
      goto start;
   }
   newarg := argument + "&cw";
   newarg := textformat(newarg);

   exec(newarg, activator);

goto start;
}
dilend /*colour_arg*/

dilbegin colour_title(); /* titles and names */

var
  pc          : unitptr;
  victim_name : string;
  victim      : unitptr;
  newtitle    : string;
  newname     : string;

code
{
:start:
   wait(SFB_CMD,((command("cname") or command("ctitle")) 
                  and (activator.level>=240) 
                  and (activator==self.outside)));
   
   pc:=self.outside;
   secure(pc,lostem);
   if (cmdstr=="cname") goto change_name;
   if (cmdstr=="ctitle") goto change_title;

:lostem:
   unsecure(pc);
   unsecure(victim);
   goto start;

:change_title:
   block;
   victim_name := getword(argument);
   newtitle := argument + "&bn&cw";
   newtitle := textformat(newtitle);
   if (victim_name == "")
   {
        :noperson:
        act("No such thing in room, or no such person in world.",
            A_ALWAYS, pc, null, null, TO_CHAR);
        goto lostem;
   }
   if (argument == "")
   {
      act("Title is blank.",
            A_ALWAYS, pc, null, null, TO_CHAR);
        goto lostem;
   }
   
   victim := findunit(pc, victim_name, FIND_UNIT_INVEN, null);
   if (victim==null)
   {
        victim := findunit(pc, victim_name, FIND_UNIT_EQUIP, null);
        if (victim==null)
        {
            victim := findunit(pc, victim_name, FIND_UNIT_SURRO, null);
            if (victim==null)
            {
               victim := findunit(pc, victim_name, FIND_UNIT_WORLD, null);
               if (victim.type!=UNIT_ST_PC) goto noperson;
            }
        }
   }
   secure(victim,lostem);
   if (victim.type==UNIT_ST_PC)
   {
        act("Colour titles for players has been disabled for the moment.",
            A_ALWAYS, pc, null, null, TO_CHAR);
        goto lostem;
   }
   if (victim.type!=UNIT_ST_OBJ)
   {
        act("You cannot title that.",
            A_ALWAYS, pc, null, null, TO_CHAR);
        goto lostem;
   }

:set_title:
   victim.title:=newtitle ;
/*if (victim.type == UNIT_ST_PC)
   { */
   log (pc.name + " colour titled " + victim.name + ".");
        act("You have received a new title.",
            A_ALWAYS, victim, null, null, TO_CHAR);
  /* } */
        act("You have titled: " + victim.name +".",
            A_ALWAYS, pc, null, null, TO_CHAR);
goto lostem;


:change_name:
   block;
   victim_name := getword(argument);
   newname := argument + "&cw";
   newname := textformat(newname);

   if (victim_name == "")
   {
        :noobject:
        act("No such thing here.",
            A_ALWAYS, pc, null, null, TO_CHAR);
        goto lostem;
   }
   if (argument == "")
   {
      act("Name is blank.",
            A_ALWAYS, pc, null, null, TO_CHAR);
        goto lostem;
   }
   victim := findunit(pc, victim_name, (FIND_UNIT_IN_ME + FIND_UNIT_SURRO), 
                      null);
   secure(victim, lostem);
   if (victim==null) goto noobject;
   if (victim.type!=UNIT_ST_OBJ)
   {
        act("You can only rename items.",
            A_ALWAYS, pc, null, null, TO_CHAR);
        goto lostem;
   }

:set_name:
   addstring(victim.names,newname);
   log(pc.name + " colour-renamed " + victim.name + ".");
   act(victim.name + " has been given a name by you.",
   A_ALWAYS, pc, null, null, TO_CHAR);
goto lostem;

}
dilend /* colour_title */

/* END COLOUR DIL */

/* MANUM DILS */

dilbegin  pulsate(); /* Pulsate action when sword is on the ground. */ 
 
code 
{ 
:init: 
   heartbeat := PULSE_SEC*5; 
 
:start: 
   wait(SFB_TICK,( (self.outside.type == UNIT_ST_ROOM) or ((self.outside.type == UNIT_ST_PC) and (self.equip==WEAR_WIELD)) )); 
pause; 

if (self.outside.type == UNIT_ST_ROOM)
{
   on rnd(0,3) goto a,b,finish,finish; 
 
:a: 
 act(self.title + " pulsates as the evil within it withers the " +
       "ground.",
      A_SOMEONE,self,null,null,TO_ROOM); 
   goto finish; 

:b: 
 act(self.title + " pulsates and the ground tremors!", 
      A_SOMEONE,self,null,null,TO_ROOM); 
   goto finish; 
}

if ((self.outside.type == UNIT_ST_PC) and (self.equip==WEAR_WIELD))
{
   if (rnd(0,119) != 1) goto finish;

act("Light glints on the blade of your " + self.title + " - it's time for " +
     "something, or someone, to leave this plane of existence " +
     "for the next one...",
      A_SOMEONE,self.outside,null,null,TO_CHAR);
act("Light glints on the blade of $1n's " + self.title + " - it's time for " +
     "something, or someone, to leave this plane of existence " +
     "for the next one...",
      A_SOMEONE,self.outside,null,null,TO_REST);
}
 
:finish: 
   pause; 
   pause; 
   pause; 
 
   goto start; 
} 
dilend /* Pulsate action */ 


dilbegin hilt_desc(); /* Show the owner's name */

var
pc     : unitptr;
owned : string;
elist    :extraptr;

code
{
:init:
    heartbeat:=PULSE_SEC*1;

:start:
wait(SFB_CMD,((command(CMD_LOOK)) and ("engraving" in argument) and (activator==self.outside)));

:showname:
pc:=self.outside;
secure(pc, lostem);
block;

if (MA_OWNER in self.extra)
{
elist:=MA_OWNER in self.extra;
owned := elist.descr;
act(owned,A_ALWAYS,self.outside,self,null,TO_CHAR);
goto lostem;
}
else
{
act("The engraving on the sword reads, 'I serve no one.'", A_ALWAYS,self.outside,self,null,TO_CHAR);
goto lostem;
}

:lostem:
unsecure(pc);
goto start;
}
dilend /* hilt_desc */


dilbegin claim_dil();

var
pc     : unitptr;
elist    :extraptr;
owned : string;
colour : string;

code
{
:init:
    heartbeat:=PULSE_SEC*5;
    interrupt(SFB_CMD,((command("shout")) and (self.equip==WEAR_WIELD) and ("I claim the evil for myself!" in argument) and (activator==self.outside)),newowner);

:start:
    wait(SFB_TICK,(self.equip==WEAR_WIELD) or (self.equip==WEAR_HOLD));
pc:=self.outside;
secure(pc, lostem);

if (MA_OWNER in self.extra)
{
elist:=MA_OWNER in self.extra;
owned := elist.descr;
if (pc.name in elist.descr)
    {
      goto lostem;
    }
   else 
    {
      act("The " + self.title + " surges with power and shocks you! " +
"You drop it! You do not own this weapon!",
A_ALWAYS,self.outside,self,null,TO_CHAR);
act(owned,A_ALWAYS,self.outside,self,null,TO_CHAR);
      act("The evil power of " + self.title + " shocks $1n and $1e is " +
       "forced to drop it!",
      A_SOMEONE,self.outside,self,null,TO_REST);
      self.outside.hp := self.outside.hp - 50;

if ((self.outside.level<20)  and (self.outside.hp < -9))
   { 
      self.outside.hp := -9; 
   } 

      position_update(self.outside);
      link(self, self.outside.outside);
      goto lostem;
    }
}

else 
{
    goto lostem;
}

:newowner:


pc:=activator;
secure(pc,lostem);

elist:=MA_OWNER in self.extra;

if (MA_OWNER in self.extra)
{
pause;
 act("This " + self.title + " has already been claimed!",
A_ALWAYS,self.outside,self,null,TO_CHAR);
goto lostem;
}

on rnd(0,5) goto a,b,c,d,e,f;

:a:
colour := "&c+r" + pc.name;
goto addit;

:b:
colour := "&c+g" + pc.name;
goto addit;

:c:
colour := "&c+y" + pc.name;
goto addit;

:d:
colour := "&c+c" + pc.name; 
goto addit;

:e:
colour := "&c+m" + pc.name;
goto addit;

:f:
colour := "&c+c" + pc.name;
goto addit;

:addit:
addextra(self.extra, {MA_OWNER}, "The engraving on the sword reads, 'I serve " + colour + "&cw. Woe betide any other who tries to wield me.'");
heartbeat:=PULSE_SEC*1;
pause;
heartbeat:=PULSE_SEC*5;
act("The " + self.title + " glows and you become part of it!",
      A_ALWAYS,self.outside,self,null,TO_CHAR);
      act("The evil power of " + self.title + " becomes part of $1n!",
      A_SOMEONE,self.outside,self,null,TO_REST);

goto lostem;

:lostem:
unsecure(pc);
goto start;
}
dilend 

dilbegin shock_get();

/*
external
  search_manum (u1:unitptr,u2:unitptr);
*/

var
basep : unitptr;
pc    : unitptr;
item  : unitptr;
nxt   : unitptr;
tempu : unitptr;

code
{
:init:
heartbeat:=PULSE_SEC*4;

:start:
    wait(SFB_TICK, TRUE);

basep := self.outside;

if (self.outside.type==UNIT_ST_ROOM) goto start;

:findbase:
if ((self.outside.type==UNIT_ST_PC) or (self.outside.type==UNIT_ST_NPC))
    {
        pc:=basep;
        secure(pc, lost_pc);
        goto begin;
    }
basep := basep.outside;
goto findbase;

:begin:

item:= pc.inside;

while ( item )
{
nxt := item.next;
   if ( (item.nameidx==self.nameidx) and (item != self) and (item.outside.minv == self.outside.minv))
      {
      act ("$1n's &c+bManum Altur&cw phases out of existence!",
      A_ALWAYS,pc,null,null,TO_REST);
      act ("Your &c+bManum Altur&cw phases out of existence!",
      A_ALWAYS,pc,null,null,TO_CHAR);
      destroy(item);
      }
item := nxt;
}
if (pc.level > 49 or pc.type!=UNIT_ST_PC) goto lost_pc;
      act ("$1n's &c+bManum Altur&cw flies out of $1s hands!",
      A_ALWAYS,pc,null,null,TO_REST);
      act ("Your &c+bManum Altur&cw flies out of your hands!",
      A_ALWAYS,pc,null,null,TO_CHAR);
      act ("You are too low a level for such power!",
      A_ALWAYS,pc,null,null,TO_CHAR);
:link_bit:
link(self, self.outside.outside);
if (self.outside.type!=UNIT_ST_ROOM) goto link_bit;
goto lost_pc;

:lost_pc:
unsecure(pc);
goto start;
}
dilend /* shock_get */

/*
var
basep : unitptr;
pc    : unitptr;
acti  : unitptr;
opc   : unitptr;
sstr  : string;
i     : integer;

code
{
:init:
   heartbeat:=PULSE_SEC*5;
   i:= interrupt(SFB_MSG,(activator!=self) and ("manumhere" in argument), check);

:start:
    wait(SFB_TICK, TRUE);

basep := self.outside;

if (self.outside.type==UNIT_ST_ROOM) goto start;

:findbase1:
if ((self.outside.type==UNIT_ST_PC) or (self.outside.type==UNIT_ST_NPC))
    {
        pc:=basep;
        secure(pc, lost_pc);
        goto sendit;
    }
basep := basep.outside;
goto findbase1;

:sendit:

sendtoalldil("manumhere" + pc.name, objname);

goto start;

:check:

acti:=activator;
secure(acti,lost_pc);

basep := self.outside;

if (self.outside.type==UNIT_ST_ROOM) goto start;

:findbase:
if ((self.outside.type==UNIT_ST_PC) or (self.outside.type==UNIT_ST_NPC))
    {
        pc:=basep;
        secure(pc, lost_pc);
        goto begin;
    }
basep := basep.outside;
goto findbase;

:begin:
sstr:=getword(argument);

opc:=findunit(self, argument, FIND_UNIT_WORLD, null);

if (opc==pc)
   {
      if (acti.outside.minv > self.outside.minv) goto lost_pc;
      goto kill_me;
   }

goto lost_pc;

:kill_me:
      act ("$1n's " + self.title + " phases out of existence!",
      A_ALWAYS,pc,null,null,TO_REST);
      act ("Your " + self.title + " phases out of existence!",
      A_ALWAYS,pc,null,null,TO_CHAR);
      destroy(self);
goto lost_pc;

:lost_pc:
unsecure(acti);
unsecure(pc);
goto start;
}
dilend 
*/

dilbegin recall sword_charge(); /* Dil for Charging the sword */ 
 
code  
{ 
:init:
   heartbeat := PULSE_SEC*SECS_PER_MUD_DAY/4;  
:start: 
   wait(SFB_TICK,(self.equip==WEAR_WIELD)); 
 
   act("The evil power of your " + self.title + " surges through your " +  
       "body.", 
      A_ALWAYS,self.outside,self,null,TO_CHAR); 
   act("The evil power of $1n's " + self.title + " surges through $1m.", 
      A_HIDEINV,self.outside,self,null,TO_REST); 
    
   act("You feel the evil of Altur become part of you.", 
      A_ALWAYS,self.outside,self,null,TO_CHAR); 
   act("$1n's face hardens with a cold expression of evil.", 
      A_HIDEINV,self.outside,self,null,TO_REST); 
  
   sendto("charges",self); 
 
   goto start; 
 
} 
dilend /* charger */ 
 
dilbegin recall aware fugo(); 
 
var 
   dir          : integer; 
   charge       : integer; 
   charges      : integer; 
   dest         : unitptr; 
   here         : unitptr; 
   isthere      : integer;

code { 
 
:init:   heartbeat := PULSE_SEC*1; 
   charge := interrupt(SFB_MSG,(activator==self) and 
      (argument=="charges"), charge); 
 
:start: 
   wait(SFB_CMD,((activator==self.outside) and  
                 (self.equip==WEAR_WIELD)) and 
                 ((command("fugo") or command("charges")))); 
      
      if (cmdstr=="charges") goto report; 
      if (cmdstr=="fugo") goto okgo;
      goto start;
:okgo:
block;
      pause;
      pause;
      pause; 
       
      if (charges<=0) goto empty; 
      charges := charges - 1; 
 
      dir := -1; /* For contiguousness (bla mouthful) */ 

:get_dir:  /* We're checking for the existance of an exit here, if there isn't one, we bomb			out, if there is one, we go to the random direction generator */

dir := dir + 1;   /* Start at north and increment (tries all dirs) */

isthere := self.outside.outside.exit_info[dir];
here := self.outside.outside; 
dest := self.outside.outside.exit_to[dir]; 

if (dir > 5) goto no_exit;

if ((isset (isthere, EX_CLOSED)) or (isset (isthere, EX_LOCKED))) goto get_dir;

if ((dest == null) or (dest.movement == SECT_WATER_SWIM) or (dest.movement == SECT_WATER_SAIL) or (dest.movement == SECT_UNDER_WATER)) goto get_dir;



:rnd_dir: 
 
dir := rnd(0,5); /* Random - a bit tedious but any other way is way more complicated */ 

isthere := self.outside.outside.exit_info[dir];
here := self.outside.outside; 
dest := self.outside.outside.exit_to[dir]; 

if ((isset (isthere, EX_CLOSED)) or (isset (isthere, EX_LOCKED))) goto rnd_dir;

if ((dest == null) or (dest.movement == SECT_WATER_SWIM) or (dest.movement == SECT_WATER_SAIL) or (dest.movement == SECT_UNDER_WATER)) goto rnd_dir;


   act("Your " + self.title + " emits a burst of light and you are "+ 
      "transported through another dimension!", 
       A_ALWAYS,self.outside,null,null,TO_CHAR); 
   act("$1n's " + self.title + " emits a burst of light and "+ 
      "$1e vanishes into another dimension!", 
       A_SOMEONE,self.outside,null,null,TO_REST); 
 
      link(self.outside,dest); 
      self.outside.position:=POSITION_STANDING;
      position_update(self.outside);
 
   act("The light from your " + self.title + " fades and you find "+ 
      "yourself in another place.",A_ALWAYS,self.outside,null,null,TO_CHAR); 
   act("$1n appears in a blinding flash of light!", 
       A_SOMEONE,self.outside,null,null,TO_REST); 
 
      goto start; 
 
:empty: 
   act("Your " + self.title + " hasn't regained enough of its evil power "+ 
       "yet.", 
      A_SOMEONE,self.outside,null,null,TO_CHAR); 
   goto start; 

:report:
block;
     act(self.title + " charges left: &c+y" + itoa(charges) + "&cw.",
        A_SOMEONE,self.outside,null,null,TO_CHAR);
     goto start;
 
:no_exit: 
   act("Your " + self.title + " emits a burst of light then fades "+ 
      "rapidly. You can't get away!",A_ALWAYS,self.outside,null,null,TO_CHAR); 
   act("$1n's " + self.title + " emits a burst of light then fades "+ 
      "rapidly.",A_SOMEONE,self.outside,null,null,TO_REST); 
   goto start; 
 
:charge: 
   clear(charge); 
   if (charges<12) charges := charges + 6; 
   if (charges>12) charges := 12; 
   goto init; 
   goto start; 
 
} 
dilend /* Flee routine */ 
 
 
dilbegin fatality(); 
 
code { 
 
   heartbeat := PULSE_SEC*2; 
:start: 
   wait(SFB_COM,command(CMD_AUTO_COMBAT) and 
      (self.equip==WEAR_WIELD) and 
      (self.outside.fighting.hp < 10)); 
   act("Your " + self.title + " surges with power and&s " + 
        "&c+rD &c+gE &c+yS &c+bT &c+mR &c+cO &c+gY &c+rS&cw &s$3n!", 
      A_ALWAYS,self.outside,null,self.outside.fighting,TO_CHAR); 
   act("$1n's " + self.title + " surges with power and&s " + 
        "&c+rD &c+gE &c+yS &c+bT &c+mR &c+cO &c+gY &c+rS&cw &syou!", 
      A_ALWAYS,self.outside,null,self.outside.fighting,TO_VICT); 
   act("$1n's " + self.title + " surges with power and&s " + 
         "&c+rD &c+gE &c+yS &c+bT &c+mR &c+cO &c+gY &c+rS&cw &s$3n!", 
      A_SOMEONE,self.outside,null,self.outside.fighting,TO_NOTVICT); 
   self.outside.fighting.hp := -10; 
   pause; 
   goto start; 
 
} 
dilend /* fatality */ 
 
dilbegin random_attack(); /* Attacks one in 10 PCs on its own */ 
 
var 
  targ       : unitptr; 
code  
{ 
:start: 
heartbeat := PULSE_SEC*50; 
wait(SFB_TICK,((self.equip==WEAR_WIELD) and (isset (self.outside.pcflags, PC_PK_RELAXED)))); 
 
/* .pcflags|PC_PK_RELAXED checks if they are BoB or not */ 
 
if (self.outside.level > 50) goto start; 
 
targ := findrndunit(self.outside, FIND_UNIT_SURRO, UNIT_ST_PC); 
secure(targ,lostem); 
if ((targ.level == 50) and (isset (targ.pcflags, PC_PK_RELAXED))) 
{ 
on rnd(0,9) goto yodead,tug,tug,tug,tug,start,start,start,start,start; 
 
 
:tug: 
   act("Your " + self.title + " moves in your "+ 
      "hands as if it is trying to attack someone!", 
       A_ALWAYS,self.outside,null,null,TO_CHAR); 
   act("$1n's " + self.title + " moves in $1s "+ 
      "hands as if it is trying to attack someone!", 
       A_SOMEONE,self.outside,null,null,TO_REST); 
goto lostem; 
 
:yodead: 
 
   act("Your " + self.title + " surges with power and " + 
        "attacks $3n of it's own volition!", 
      A_ALWAYS,self.outside,null,targ,TO_CHAR); 
   act("$1n's " + self.title + " surges with power and " + 
        "$1e attacks you!", 
      A_ALWAYS,self.outside,null,targ,TO_VICT); 
   act("$1n's " + self.title + " surges with power and " + 
        "$1e attacks $3n!", 
      A_SOMEONE,self.outside,null,targ,TO_NOTVICT); 
set_fighting(self.outside, targ);
/* exec ("kill " + targ.name, self.outside); */
unsecure(targ); 
pause; 
   goto start; 
} 
 
 
:lostem: 
unsecure(targ); 
pause; 
goto start; 
} 
dilend /* Random attack */ 

/* MANUM DILS */

dilbegin birdies(); /* Ambiance anyone? */

var
   j      : integer;

code
{
:start:
    j := rnd(300, 600);
   heartbeat := PULSE_SEC*j; 

pause;

on rnd(0,7) goto a,b,c,d,e,f,g,start; 
 
:a: 
   act("The enchanting song of a robin red-breast lilts down through the canopy " +
         "of leaves above.", 
          A_SOMEONE,self.inside,null,null,TO_ALL); 
   goto start; 
:b: 
   act("A gentle breeze disturbs the canopy and the dappled sunlight dances " +
         "across the grass.", 
          A_SOMEONE,self.inside,null,null,TO_ALL); 
   goto start; 
:c: 
   act("The sweet scent of oak flowers fills the air.", 
         A_SOMEONE,self.inside,null,null,TO_ALL); 
   goto start; 
:d: 
   act("A red squirrel hops out of the trees to the east and gazes upon you with " + 
       "great wonder before hopping off through the oaks to the north.", A_SOMEONE,self.inside,null,null,TO_ALL); 
   goto start; 
:e: 
   act("The breeze whispers gently, as the leaves in the great oak trees " + 
       "rustle softly in reply.", 
          A_SOMEONE,self.inside,null,null,TO_ALL); 
   goto start; 
:f: 
   act("A magnificent butterfly flutters down to land on the arm of the stone " + 
       "seat at the centre of the glade.", 
          A_SOMEONE,self.inside,null,null,TO_ALL); 
   goto start; 
:g: 
   act("Far off in the trees you can hear the gentle song of a thrush as it rejoices "+ 
       "in simple happiness.", 
          A_SOMEONE,self.inside,null,null,TO_ALL); 
   goto start; 
 
}
dilend /* birdies */

/*BOOT DIL*/

dilbegin recall boot_charge();

code {

:start:
   heartbeat := PULSE_SEC*SECS_PER_MUD_DAY/6; /* 6 charges per 24 hours */
   wait(SFB_TICK,self.equip==WEAR_FEET);
   heartbeat := PULSE_SEC*3;

   act("Your &cgCelerime's boots&cw glisten like sunlight.",
      A_ALWAYS,self.outside,self,null,TO_CHAR);
   act("$1n's &cgCelerime's boots&cw glisten like sunlight.",
      A_ALWAYS,self.outside,self,null,TO_REST);
   
   sendto("charge",self);

   goto start;

}
dilend /* boot_charge */

dilbegin recall aware boot_haste();

var
   result       : integer;
   charge       : integer;
   charges      : integer;
   

code 
{

   charges := 3;

:init:
   heartbeat := PULSE_SEC*1;
   charge := interrupt(SFB_MSG,(activator==self) and
      (argument=="charge"), charge);

:start:
   wait(SFB_CMD,((activator==self.outside) and 
                 (self.equip==WEAR_FEET)) and
                ((command("quam") or command("fewl"))));
      if (cmdstr=="fewl") goto report;
      if (cmdstr=="quam") goto okgo;
      goto start;
:okgo:
block;
      pause;
      if (charges<=0) goto empty;
      charges := charges - 1;
      self.spells[SPL_ALL] := 50;
      result := cast_spell(SPL_HASTE,
         self.outside,self,self.outside,"elf_boots_ef@seren");
      goto start;
      
:empty:
   act("Your &cgCelerime's boots&cw aren't powerful enough yet.",
      A_SOMEONE,self.outside,null,null,TO_CHAR);
   goto start;

:report:
block;

if (charges==3)
    {
     act("Your &cgCelerime's boots&cw shine very brightly : &c+b3&cw charges.",
        A_SOMEONE,self.outside,null,null,TO_CHAR);
     goto start;
    }
if (charges==2)
    {
     act("Your &cgCelerime's boots&cw shine brightly : &c+g2&cw charges.",
        A_SOMEONE,self.outside,null,null,TO_CHAR);
     goto start;
    }
if (charges==1)
    {
     act("Your &cgCelerime's boots&cw glisten slightly : &c+y1&cw charge.",
        A_SOMEONE,self.outside,null,null,TO_CHAR);
     goto start;
    }
if (charges==0)
    {
     act("Your &cgCelerime's boots&cw are dull : &crno charges left&cw.",
        A_SOMEONE,self.outside,null,null,TO_CHAR);
     goto start;
    }
goto start;

:charge:
   clear(charge);
   if (charges<3) charges := charges + 1;
   if (charges>3) charges := 3;
   goto init;

}
dilend /* boot_haste */

dilbegin elf_boots_ef(medi : unitptr, targ : unitptr, hm : integer);

code {

   act("Your boots shine as the magic of Celerime enters you!",
      A_ALWAYS,self,null,targ,TO_CHAR);
   act("$1n's boots shine and $1e seems faster!",
      A_SOMEONE,self,null,targ,TO_REST);
   return;
}
dilend /* elf_boots_ef */
 
/*  
            TEMPLE DILS FOR USE THROUGHOUT ZONE  
*/ 
 
 
dilbegin busy_questor(); /* I'm busy giving a quest, wait */

var 
itemg : unitptr;
pc : unitptr;

code
{
   :start:
heartbeat := PULSE_SEC*4;  /* Give quest a chance to work, if busy, give back */
   wait (SFB_DONE,((command(CMD_GIVE)) and (self==target)));

itemg := medium;
secure(itemg, lostit);
pc := activator;
secure(pc, lostit);

pause;
exec ("drop " + itemg.name, self);
exec ("tell " + pc.name + " Please wait a moment, I'm busy.", self);
unsecure(itemg);
unsecure(pc);
goto start;

:lostit:
unsecure(itemg);
unsecure(pc);
goto start;
}
dilend /* Questor busy */



dilbegin zombie_kill(); /* Zombie kill - wipes out all undead  */ 
 
var  
   u   : unitptr; 
 
code  
{ 
 
:init: 
   heartbeat := PULSE_SEC*1;  
 
:start: 
 
   wait(SFB_DONE,RACE_IS_UNDEAD(activator.race)); 
      pause;  
      act("$1n's eyes glow &c+gluminous green&cw!", 
          A_SOMEONE,self,null,null,TO_ALL); 
      foreach (UNIT_ST_NPC, u) 
      { 
          if (RACE_IS_UNDEAD(u.race)) 
          { 
          act(u.title + " suddenly decays into dust before your very eyes!", 
          A_SOMEONE,self,null,null,TO_ALL); 
          destroy(u); 
          } 
      } 
goto start; 
} 
dilend /* Zombie kill */ 

dilbegin mob_kill(); /* Wipes out summon spell mobs and spiders */

var
   u   : unitptr;

code
{

:init:
   heartbeat := PULSE_SEC*1;

:start:

   wait(SFB_DONE,RACE_IS_BAD(activator.race));
      pause;
      act("$1n's eyes glow &c+bluminous blue&cw!",
          A_SOMEONE,self,null,null,TO_ALL);
      foreach (UNIT_ST_NPC, u)
      {
          if (RACE_IS_BAD(u.race))
          {
          act(u.title + " disintegrates!",
          A_SOMEONE,self,null,null,TO_ALL); 
          destroy(u);
          }
      }
goto start;
}
dilend /*  Other Mob kill */
 
dilbegin block_animate(); /* Block animate dead */ 
 
var 
    targ     : unitptr; 
    splno    : integer; 
    s        : string; 
 
code 
{ 
:start: 
 
    wait(SFB_PRE, command(CMD_CAST)); 
     
    s := getword(argument); 
    splno := atoi(s); 
 
    if (splno == SPL_ANIMATE_DEAD) 
    {  
      targ := activator; 
      secure(targ,losttarg); 
      block; 
      act("You are unable to animate the corpse!", 
          A_ALWAYS,targ,null,null,TO_CHAR); 
      act("$1n vainly tries to animate the corpse.", 
          A_SOMEONE,targ,null,null,TO_REST); 
      unsecure(targ); 
      goto start; 
    } 
    else 
        goto start; 
 
:losttarg: 
unsecure(targ); 
goto start; 
 
} 
dilend /* End block animate dead */ 

dilbegin block_summ(); /* Block summoning spells */

var
    splno    : integer;
    s        : string;

code
{
:start:

    wait(SFB_PRE, command(CMD_CAST));

    s := getword(argument);
    splno := atoi(s);

    if ( (splno == SPL_DUST_DEVIL) or ( (splno >= SPL_SUMMON_DEVIL) and (splno <= SPL_SUMMON_EARTH) ) )
    {
      block;
      act("$1n's aura deadens the magic!",
          A_SOMEONE,self,null,null,TO_REST);
      goto start;
    }
    else
        goto start;
}
dilend /* block summoning spells (mobs) */

dilbegin spell_block(); /* Block spells */

var
    targ     : unitptr;

code
{
:start:

    wait(SFB_PRE,((command(CMD_CAST)) and (activator.type==UNIT_ST_PC)));

      targ := activator;
      secure(targ,losttarg);
      if (targ.level >= CREATOR_LEVEL) goto start;
      block;
      act("Your magic doesn't work here.",
          A_ALWAYS,targ,null,null,TO_CHAR);
      act("$1n vainly tries to cast a spell.",
          A_SOMEONE,targ,null,null,TO_REST);
      unsecure(targ);
      goto start;

:losttarg:
unsecure(targ);
goto start;
}
dilend /* spell block */

dilbegin shout_block(); /* Block shouts */

var
    targ     : unitptr;

code
{
:start:

    wait(SFB_CMD,(command("shout")));

      targ := activator;
      secure(targ,losttarg);
      if (targ.level >= CREATOR_LEVEL) goto start;
      block;
      act("Your voice is lost in the heavens!",
          A_ALWAYS,targ,null,null,TO_CHAR);
      act("$1n tries to shout, but cannot.",
          A_SOMEONE,targ,null,null,TO_REST);
      unsecure(targ);
      goto start;

:losttarg:
unsecure(targ);
goto start;
}
dilend /* shout_block */

dilbegin write_block(); /* Block writing */

var
    targ     : unitptr;

code
{
:start:

    wait(SFB_CMD,(command("write")));

      targ := activator;
      secure(targ,losttarg);
      if (targ.level >= CREATOR_LEVEL) goto start;
      block;
      act("Only a god may do that here.",
          A_ALWAYS,targ,null,null,TO_CHAR);
      unsecure(targ);
      goto start;

:losttarg:
unsecure(targ);
goto start;
}
dilend /* write_block */


dilbegin fam_block(); /* Block familiar killing */

code
{
:start:

    wait(SFB_CMD,( (command(CMD_KILL)) and (activator.race == RACE_FAMILIAR) ));
      block;
      act("$1n mesmorizes your familiar!",
          A_SOMEONE,self,null,null,TO_REST);
goto start;
}
dilend /* fam_block */

dilbegin leaving_block(); /* Block the spell leaving for tower of oracle */

var
    targ     : unitptr;
    splno    : integer;
    s : string;
code
{
:start:

    wait(SFB_PRE, command(CMD_CAST));

    s := getword(argument);
    splno := atoi(s);

    if (splno == SPL_LEAVING)
    {
      targ := activator;
      secure(targ,losttarg);
      block;
      act("The trees sap the power from your spell!",
          A_ALWAYS,targ,null,null,TO_CHAR);
      act("The trees sap the power from $1n's spell!.",
          A_SOMEONE,targ,null,null,TO_REST);
      unsecure(targ);
      goto start;
    }
    else
        goto start;

:losttarg:
unsecure(targ);
goto start;

}
dilend /* leaving_block */

dilbegin drag_block(); /* Block Dragging */ 

var 
    pc : unitptr; 
 
code  
{ 
:start: 
    wait(SFB_CMD,command(CMD_DRAG)); 
    pc := activator; 
    secure(pc,lost); 
block; 

act("It's stuck in the dirt.", 
        A_ALWAYS,pc,null,null,TO_CHAR); 
goto start; 

:lost: 
    unsecure(pc); 
    goto start; 
 } 
dilend /* drag_block */ 

dilbegin disarm_block(); /* Block Disarming */ 
 
var 
    giver : unitptr; 
 
code  
{ 
:start: 
    wait(SFB_CMD,command(CMD_DISARM)); 
    giver := activator; 
    secure(giver,lost); 
     
       if (findunit(activator,argument,FIND_UNIT_SURRO,null)==self) 
       { 
           block; 
           act("$1n vainly tries to disarm " + self.title + ".", 
                A_SOMEONE,giver,null,null,TO_REST); 
           exec("say Don't be foolish " + giver.name + "." ,self); 
           act(self.title + " glares at you!", 
                A_ALWAYS,giver,null,null,TO_CHAR); 
           act(self.title + " glares at $1n!", 
                A_SOMEONE,giver,null,null,TO_REST); 
           goto start; 
       } 
    goto start; 
 
:lost: 
    unsecure(giver); 
    goto start; 
 
} 
dilend /* disarm_block */ 
 
 
 
dilbegin filch_block(); /* Block Filching */ 
 
var 
    filcher  : unitptr; 
    unitname : string; 
 
code 
{ 
:start: 
    wait(SFB_CMD,command(CMD_FILCH)); 
    filcher := activator; 
    secure(filcher,lost); 
 
       while (argument != "") 
       { 
           unitname := getword(argument); 
           if (unitname == "from") 
           { 
               goto bus; 
           } 
       } 
goto start;   
  
:bus: 
       unitname := getword(argument); 
       if (findunit(activator,unitname,FIND_UNIT_SURRO,null)==self) 
       { 
       block; 
           act("$1n vainly tries to filch something from " + self.title + ".", 
                A_SOMEONE,filcher,null,null,TO_REST); 
           exec("say Don't be foolish " + filcher.name + "." ,self); 
           act(self.title + " glares at you!", 
                A_ALWAYS,filcher,null,null,TO_CHAR); 
           act(self.title + " glares at $1n!", 
                A_SOMEONE,filcher,null,null,TO_REST); 
           goto start; 
       } 
    goto start; 
 
:lost: 
    unsecure(filcher); 
    goto start; 
 
} 
dilend /* filch_block */ 
 
 
dilbegin steal_block(); /* Block Stealing for Zolan*/ 
 
var 
    stealer  : unitptr; 
    unitname : string; 
 
code 
{ 
:start: 
    wait(SFB_CMD,command(CMD_STEAL)); 
    stealer := activator; 
    secure(stealer,lost); 
 
       while (argument != "") 
       { 
           unitname := getword(argument); 
           if (unitname == "from") 
           { 
               goto bus; 
           } 
       } 
goto start; 
 
:bus: 
       unitname := getword(argument); 
       if (findunit(activator,unitname,FIND_UNIT_SURRO,null)==self) 
       { 
       block; 
           act("$1n vainly tries to steal something from " + self.title + ".", 
                A_SOMEONE,stealer,null,null,TO_REST); 
           exec("say Don't be foolish " + stealer.name + "." ,self); 
           act(self.title + " glares at you!", 
                A_ALWAYS,stealer,null,null,TO_CHAR); 
           act(self.title + " glares at $1n!", 
                A_SOMEONE,stealer,null,null,TO_REST); 
           goto start; 
       } 
    goto start; 
 
:lost: 
    unsecure(stealer); 
    goto start; 
 
} 
dilend /* steal_block */ 

dilbegin steal_block1(); /* Block Stealing for other Mobs*/

var
    stealer  : unitptr;
    unitname : string;

code
{
:start:
    wait(SFB_CMD,command(CMD_STEAL));
    stealer := activator;
    secure(stealer,lost);

       while (argument != "")
       {
           unitname := getword(argument);
           if (unitname == "from")
           {
               goto bus;
           }
       }
goto start;

:bus:
       unitname := getword(argument);
       if (findunit(activator,unitname,FIND_UNIT_SURRO,null)==self)
       {
       block;
           act("$1n vainly tries to steal something from " + self.title + ".",
                A_SOMEONE,stealer,null,null,TO_REST);
           exec("laugh " + stealer.name,self);
           goto start; 
       }
    goto start;

:lost:
    unsecure(stealer);
    goto start;

}
dilend /* steal_block1 */

dilbegin steal_block2(); /* Block Stealing for other Mobs*/

var
    stealer  : unitptr;
    unitname : string;

code
{
:start:
    wait(SFB_CMD,command(CMD_STEAL));
    stealer := activator;
    secure(stealer,lost);

       while (argument != "")
       {
           unitname := getword(argument);
           if (unitname == "from")
           {
               goto bus;
           }
       }
goto start;

:bus:
       unitname := getword(argument);
       if (findunit(activator,unitname,FIND_UNIT_SURRO,null)==self)
       {
       block;
           act("$1n vainly tries to steal something from " + self.title + ".",
                A_SOMEONE,stealer,null,null,TO_REST);
           exec("frown " + stealer.name,self);
           goto start;
       }
    goto start;

:lost:
    unsecure(stealer);
    goto start;

}
dilend /* steal_block2 */
 
dilbegin kill_block(); /* Block kill */ 
 
var 
    perp : unitptr; 
 
code  
{ 
:start: 
    wait(SFB_CMD,command(CMD_KILL)); 
    perp := activator; 
    secure(perp,lost); 
     
       if (findunit(activator,argument,FIND_UNIT_SURRO,null)==self) 
       { 
           block; 
           act("The " + self.title + " can't be killed!", 
                A_ALWAYS,perp,null,null,TO_CHAR); 
           act(self.title + " pulsates!", 
                A_SOMEONE,perp,null,null,TO_REST); 
           goto start; 
       } 
    goto start; 
 
:lost: 
    unsecure(perp); 
    goto start; 
 
} 
dilend /* kill_block */ 
 
 
dilbegin forest_bird_an(); /* Birds and animals in the Forest */ 
 
var 
   pc   : unitptr; 
 
code  
{ 
 
:init: 
   heartbeat := PULSE_SEC*7; 
 
:start: 
   wait(SFB_DONE,activator.type==UNIT_ST_PC); 
   pc := activator; 
   secure(pc,lost_pc); 
   pause; 
   on rnd(0,18) goto a,b,c,d,e,f,g,finish,finish,finish,finish,finish,finish,finish,finish,finish,finish,finish,finish; 
 
:a: 
   act("The sound of birdsong fills the air.", 
          A_SOMEONE,pc,null,null,TO_ALL); 
   goto finish; 
:b: 
   act("You hear a pheasant calling far off in the undergrowth.", 
          A_SOMEONE,pc,null,null,TO_ALL); 
   goto finish; 
:c: 
   act("A song thrush can be heard singing his heart out in the "+ 
       "branches above you.", A_SOMEONE,pc,null,null,TO_ALL); 
   goto finish; 
:d: 
   act("A mouse runs off the path into the undergrowth as you "+ 
       "approach.", A_SOMEONE,pc,null,null,TO_ALL); 
   goto finish; 
:e: 
   act("A rabbit spies you in the distance, pricks up its "+ 
       "ears, and then scampers off into the trees.", 
          A_SOMEONE,pc,null,null,TO_ALL); 
   goto finish; 
:f: 
   act("Something stirs in the undergrowth and then is "+ 
       "suddenly silent as you get near.", 
          A_SOMEONE,pc,null,null,TO_ALL); 
   goto finish; 
:g: 
   act("Out of the corner of your eye you spot a young "+ 
       "rabbit scamper out of the undergrowth back along "+ 
       "the path.", 
          A_SOMEONE,pc,null,null,TO_ALL); 
   goto finish; 
 
:finish: 
   unsecure(pc); 
   pause; 
   pause; 
   pause; 
   pause; 
   goto start; 
 
:lost_pc: 
   unsecure(pc); 
   pause; 
   pause; 
   goto start; 
 
} 
dilend /* End birds and animals in the Forest */ 
 
 
dilbegin aware chani_action(); /* Chani's actions */ 
 
var  
   pc   : unitptr; 
   i    : integer; 
ringring : integer; 
 
code { 
 
:init: 
   heartbeat := PULSE_SEC*5; 
   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,in_fight); 
   ringring := interrupt(SFB_MSG,(argument=="ringring"), bellring); 
 
:start: 
   wait(SFB_TICK,self.position!=POSITION_SLEEPING); 
   pc := activator; 
   secure(pc,lost_pc); 
   pause; 
   on rnd(0,6) goto a,b,c,d,finish,finish,finish; 
 
:a: 
   exec("emote hums a gentle tune that eases your soul.", self); 
   goto finish; 
:b: 
   exec("emote smiles at you, making you blush.", self); 
   goto finish; 
:c: 
   exec("emote looks straight into your eyes. You are forced to look away.", self); 
   goto finish; 
:d: 
   exec("emote laughs girlishly.", self); 
   goto finish; 
 
:finish: 
unsecure(pc); 
    pause; 
   pause; 
   pause; 
 
   goto start; 
 
:bellring: 
exec("say Yes, I'm here, what would you like?", self); 
   goto finish; 
 
:in_fight: 
   while(self.position==POSITION_FIGHTING) pause; 
   exec("say No one messes with me!",self); 
   goto start; 
 
:lost_pc: 
   unsecure(pc); 
   pause; 
   pause; 
   goto start; 
 
} 
dilend /* Chani Action*/ 

dilbegin olayan_action(); 
 
var 
   i    : integer; 
 
code { 
 
:init: 
   heartbeat := PULSE_SEC*20; 
 
   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight); 
:start: 
   wait(SFB_DONE,activator.type==UNIT_ST_PC); 
on rnd(0,4) goto a,finish,finish,finish,finish;

:a:
   pause;
   pause; 
   exec("emote seems to move slowly and then is still.",self); 
   pause; 
   pause; 

:finish:
goto start; 
 
:fight: 
   heartbeat := PULSE_SEC*3; 
   while (self.position == POSITION_FIGHTING) pause; 
   exec("emote makes a deep resonating sound that makes you shudder.",self); 
   pause; 
   heartbeat := PULSE_SEC*20;
   goto start; 
 
} 
dilend /* olayan_action */ 


dilbegin fog_move();

var
   dir          : integer;
   dest         : unitptr;
   here         : unitptr;
   dir_string  : string;
   op_string   : string;

code {

:init:   
heartbeat := PULSE_SEC*10;

:start:
   wait(SFB_TICK, TRUE);

on rnd(0,4) goto begin, start, start, start, start;

:begin:

  if ((self.position == POSITION_RESTING) or
      (self.position == POSITION_SITTING))
  {
     exec("stand", self);
  }

  if (self.position != POSITION_STANDING)
  goto start;


      dir := 0; /* Start at north */

:get_dir:
  
   here := self.outside;
   dest := self.outside.exit_to[dir];

/* Tries all dirs till at least one exists */

/*        ((dest.movement != SECT_WATER_SWIM) and
       (dest.movement != SECT_WATER_SAIL) and
       (dest.movement != SECT_UNDER_WATER)) or
*/

   if ((dest == null) or (isset(self.outside.exit_to[dir].flags, UNIT_FL_NO_MOB)))
   {
      dir := dir + 1;
      if (dir > 5)
      {
         goto start;
      }
      goto get_dir;
   }

:rnd_dir:

dir := rnd(0,5); /* Random */

/* randomly tries a dir */

/*        ((dest.movement != SECT_WATER_SWIM) and
       (dest.movement != SECT_WATER_SAIL) and
       (dest.movement != SECT_UNDER_WATER)) or
*/

   if ((dest == null) or (isset(self.outside.exit_to[dir].flags, UNIT_FL_NO_MOB)))
   {
      goto rnd_dir;
   }

here := self.outside;
dest := self.outside.exit_to[dir];

/*

if (dir == 0) {
    dir_string := "north";
         op_string := "the south";
  } else if (dir == 1) {
    dir_string := "east";
         op_string := "the west";
  } else if (dir == 2) {
    dir_string := "south";
         op_string := "the north";
  } else if (dir == 3) {
    dir_string := "west";
         op_string := "the east";
  } else if (dir == 4) {
    dir_string := "up";
         op_string := "below";
  } else if (dir == 5) {
    dir_string := "down";
         op_string := "above";
  }

*/

   act("$1n drifts away.",
       A_SOMEONE,self,null,null,TO_REST);
      link(self,dest);

   act("$1n drifts in.",
       A_SOMEONE,self,null,null,TO_REST);

      goto start;

}
dilend /* fog_move */
 
 
dilbegin current(); /* Lake current */ 
 
var 
   pc   : unitptr; 
 
code { 
 
:init: 
   heartbeat := PULSE_SEC*5; 
 
:start: 
   wait(SFB_DONE,self.position!=POSITION_SLEEPING); 
   pc := activator; 
   secure(pc,lost_pc); 
   pause; 
 act("The lake current carries your craft south.", 
      A_ALWAYS,pc,null,null,TO_CHAR); 
 act("The lake current carries $1n's craft south.", 
      A_SOMEONE,pc,null,null,TO_ROOM); 
   exec("south",pc); 
:lost_pc: 
unsecure(pc);  
goto start; 
} 
dilend /* Lake Current */ 

dilbegin direction_glade();  /* Glade exit */

var
pc :unitptr;
code
{
  :start:
  wait(SFB_CMD,(command("south") or command("up") or command("exits") ));
pc:=activator;
secure(pc, lostem);
block;
if (pc.position != POSITION_STANDING) goto start;

if (command("south")) goto square;

if (command("up")) goto higher;

if (command("exits")) goto showexit;

/*
:chicken:
block;
act("$1n enters the north portal and vanishes!",
      A_HIDEINV,pc,null,null,TO_REST);
act("You enter the north portal!",
      A_ALWAYS,pc,null,null,TO_CHAR);

        link(pc,findroom("inn@udgaard"));

act("$1n appears from nothingness!",
      A_HIDEINV,pc,null,null,TO_REST);
act("You step out of the portal.",
      A_ALWAYS,pc,null,null,TO_CHAR);
exec("look", pc);

goto lostem;
*/

:square:
block;
act("$1n enters the south portal and vanishes!",
      A_HIDEINV,pc,null,null,TO_REST);
act("You enter the south portal!",
      A_ALWAYS,pc,null,null,TO_CHAR);

        link(pc,findroom("square@udgaard"));

act("$1n appears from nothingness!",
      A_HIDEINV,pc,null,null,TO_REST);
act("You step out of the portal.",
      A_ALWAYS,pc,null,null,TO_CHAR);
exec("look", pc);

goto lostem;

:higher:
block;
if (pc.level < CREATOR_LEVEL)  
   {
      act("You are not immortal, that journey is " +
          "not yours to take... yet.",
          A_ALWAYS,pc,null,null,TO_CHAR);
   }
else {
        act("$1n levitates into the light!",
            A_HIDEINV,pc,null,null,TO_REST);
        act("You levitate into the light!",
            A_ALWAYS,pc,null,null,TO_CHAR);

        link(pc,findroom("chat_room@seren1"));

        act("$1n steps out of the light to stand before you.",
            A_HIDEINV,pc,null,null,TO_REST);
        act("You step out of the light onto the cloud.",
            A_ALWAYS,pc,null,null,TO_CHAR);
        exec("look", pc);
     }

goto lostem;

:showexit:
block;
act("Obvious exits:&nSouth - Udgaard Square&nUp    - &c+cBetween the clouds and the sky&cw",
A_SOMEONE,pc,null,null,TO_CHAR);
goto lostem;

:lostem:
unsecure(pc);
goto start;
}
dilend /* direction */

dilbegin sit_chair(); /* Eirinn sitting */

var
   pc : unitptr;

code
{
:start:
wait(SFB_CMD,((command("sit") or command("stand")) and ("Eirinn" in activator.names)));
pc:=activator;
secure(pc,lostem);
if (command("stand")) goto standup;
if (command("sit")) goto sitdown;

goto start;

:sitdown:
if (pc.position!=POSITION_STANDING) goto start;
block;
act("$1n sits down in his &c+ngreat stone seat&cw.",
    A_HIDEINV,pc,null,null,TO_REST);
act("You sit down in your &c+ngreat stone seat&cw.",
    A_ALWAYS,pc,null,null,TO_CHAR);

pc.position:=POSITION_SITTING;
position_update(pc);

goto lostem;

:standup:
if (pc.position!=POSITION_SITTING) goto start;
block;
act("$1n rises from his &c+ngreat stone seat&cw and stands before you.",
    A_HIDEINV,pc,null,null,TO_REST);
act("You rise from your &c+ngreat stone seat&cw and stand up.",
    A_ALWAYS,pc,null,null,TO_CHAR);

pc.position:=POSITION_STANDING;
position_update(pc);

goto lostem;

:lostem:
unsecure(pc);
goto start;
}
dilend /* sit_char */

dilbegin chat_room_dir();  /* cr exit */

var
pc :unitptr;
code
{
  :start:
  wait(SFB_CMD,(command("down")));
pc:=activator;
secure(pc, lostem);
block;
if (pc.position != POSITION_STANDING) goto start;
if (pc.level < CREATOR_LEVEL)
   {
    act("Only gods can traverse the light bridge!",
        A_ALWAYS,pc,null,null,TO_CHAR);  
    goto start;
   } 

act("$1n metamorphoses into a ray of light and shines down from the plane.",
      A_HIDEINV,pc,null,null,TO_REST);
act("You metamorphose into a ray of light and shine down!",
      A_ALWAYS,pc,null,null,TO_CHAR);

        link(pc,findroom("glade@seren"));

act("A ray of light shines down into the glade.",
      A_HIDEINV,pc,null,null,TO_REST);
act("The light dims and coalesces into $1n.",
      A_HIDEINV,pc,null,null,TO_REST);
act("You shine down into a lush glade and change back to your mortal guise.",
      A_ALWAYS,pc,null,null,TO_CHAR);
exec("look", pc);

goto lostem;

:lostem:
unsecure(pc);
goto start;
}
dilend /* chat_room_dir */

dilbegin transfer_people( place : string );    

var
pc :unitptr;
targ : unitptr;
code
{
  :init:
heartbeat := PULSE_SEC*1;

  :start:
  wait(SFB_CMD,(command("transfer")));
pc:=activator;
secure(pc, lostem);

if ((pc.level < 200) or (pc.level >= 240)) goto start;

block;
targ := findunit(pc, argument, FIND_UNIT_WORLD, null);
secure(targ, lostem);
if ((targ==null) or ((targ.type!=UNIT_ST_PC) and (targ.type!=UNIT_ST_NPC))) goto nosuch;

if (isset(targ.pcflags, PC_SPIRIT)) goto dead;

targ := findunit(pc, argument, FIND_UNIT_WORLD, null);
secure(targ,lostem);
act("$1n disappears in a mushroom cloud.",
      A_SOMEONE,targ,null,null,TO_REST);

        link(targ,findroom(place));
log (pc.name + " transferred "+targ.name+" to " + place +".");
act("$1n arrives from a puff of smoke.",
      A_SOMEONE,targ,null,null,TO_REST);
act("$2n has transferred you!",
      A_SOMEONE,targ,pc,null,TO_CHAR);
act("Ok.",
      A_ALWAYS,pc,null,null,TO_CHAR);
exec("look", targ);

goto lostem;

:nosuch:
act("No such person.",
      A_ALWAYS,pc,null,null,TO_CHAR);
goto lostem;

:dead:
act("$2n is dead - transfer aborted.",
      A_ALWAYS,pc,targ,null,TO_CHAR);
goto lostem;

:lostem:
unsecure(pc);
unsecure(targ);
goto start;
}
dilend  

dilbegin dream_action(); /* Dream action */ 
 
code { 
 
:init: 
   heartbeat := PULSE_SEC*5; 
 
:start: 
   wait(SFB_TICK,self.outside.type == UNIT_ST_ROOM); 
pause; 
   on rnd(0,3) goto a,finish,finish,finish; 
 
:a: 
 act("The small sphere of light pulsates gently.", 
      A_SOMEONE,self,null,null,TO_ROOM); 
   goto finish; 
 
:finish: 
   pause; 
   pause; 
   pause; 
 
   goto start; 
} 
dilend /* Dream action */ 
 
dilbegin no_passage();  /* Prevent passage westwards */ 

external
  search_pc (u:unitptr); 
var 
ring : unitptr; 
pc :unitptr;
code 
{ 
  :start: 
  wait(SFB_CMD,(command("west"))); 
pc:=activator;
secure(pc, lostem);
block;

ring := findunit(pc, "jpcring", FIND_UNIT_EQUIP, null); 

  if (ring) 
  { 
    destroy(ring); 
    search_pc(pc);
    exec("west", pc); 
  } 
  else 
  { 
    act("A magical field of energy blocks your passage west.", A_ALWAYS, pc, 
        null, null, TO_CHAR); 
  } 
  unsecure(pc);
  goto start; 

:lostem:
unsecure(pc);
goto start;

} 
dilend /* Prevent Passage */ 


dilbegin search_pc (u:unitptr);

var
item : unitptr;
person : unitptr;
nxt  : unitptr;

code
{

person:=u;
item:=person.inside;

while( item )
{
nxt := item.next;

  if (item.type==UNIT_ST_PC)
    {
    link(item,findroom("forest16@seren"));
    act ("$1n appears from nowhere.",
      A_ALWAYS,item,null,null,TO_REST);
    act ("You fall to the ground.",
      A_ALWAYS,item,null,null,TO_CHAR);
    }
  else if (item.inside)
    {
    search_pc(item);
    }
item := nxt;
}
return;
}
dilend

dilbegin search_manum (u1:unitptr,u2:unitptr);

var
pc      : unitptr;
item    : unitptr;
thing   : unitptr;
nxt     : unitptr;
i       : integer;

code
{
pc    := u1;
thing := u2;
item  := thing.inside;
i:=30;
while ( i>0 )
{
nxt := item.next;

   if ( (item.nameidx==self.nameidx) and (item != self) and (item.outside.minv > 190 )) 
      {
      act ("$1n's " + item.title + " phases out of existence!",
      A_ALWAYS,pc,null,null,TO_REST);
      act ("Your " + item.title + " phases out of existence!",
      A_ALWAYS,pc,null,null,TO_CHAR);
      destroy(item);
      }
   else if (item.inside)
      {
      search_manum(pc, item);
      }
item := nxt;
}

:over_loop:

return;
}
dilend /* search_manum */

dilbegin no_way (me : unitptr, targ1 : unitptr); /* Olayan no-entry dil */

var
parm1 : unitptr;
parm2 : unitptr;
 
code
{
parm1 := me;
parm2 := targ1;

act ("You are not high enough in levels to go that way - $2n blocks your passage.", 
       A_ALWAYS,parm2,parm1,null,TO_CHAR); 
  act ("$2n blocks $1n from passing.", 
       A_SOMEONE,parm2,parm1,null,TO_REST); 
return; 
}
dilend /* no_way */

/*  
              Manum Altur RESTRICTION DILS 
*/ 
 
/* Not high enough level dil */ 
 
dilbegin level_act(amount:integer); 
code { 
  act ("$2n surges with pure evil and it burns you as " + 
       "it flies from your hands.", 
       A_ALWAYS,self.outside,self,null,TO_CHAR); 
  act ("$1n's $2n surges with power and flies out of $1s hands.", 
       A_SOMEONE,self.outside,self,null,TO_REST); 
  act ("You are not high enough level to use $3n.  $2t "+ 
       "levels needed to use it.", A_ALWAYS, self.outside, 
       itoa (amount), self, TO_CHAR); 
  return; 
} 
dilend 
 
/* Not high enough ability */ 
 
dilbegin abi_act(min_abi:integer); 
var 
  amount:integer; 
code { 
  act ("$2n surges with pure evil and it burns you as " + 
       "it flies from your hands.", 
       A_ALWAYS,self.outside,self,null,TO_CHAR); 
  act ("$1n's $2n surges with power and flies out of $1s hands.", 
       A_SOMEONE,self.outside,self,null,TO_REST);     
  amount:=min_abi-activator.abilities[ABIL_STR]; 
  act ("You are not strong enough to use $3n. $2t strength needed "+ 
       "to use it.", A_ALWAYS, self.outside, itoa (amount), 
       self, TO_CHAR); 
  return; 
} 
dilend 

dilbegin abi_act1(min_abi:integer);
var
  amount:integer;
code {
  act ("$2n surges with pure evil and it burns you as " +
       "it flies from your hands.",
       A_ALWAYS,self.outside,self,null,TO_CHAR);
  act ("$1n's $2n surges with power and flies out of $1s hands.",
       A_SOMEONE,self.outside,self,null,TO_REST);
  amount:=min_abi-activator.abilities[ABIL_STR];
  act ("You are not intelligent enough to use $3n. $2t brain needed "+
       "to use it.", A_ALWAYS, self.outside, itoa (amount),
       self, TO_CHAR);
  return;
}
dilend

dilbegin abi_act2(min_abi:integer);
var
  amount:integer;
code {
  act ("$2n surges with pure evil and it burns you as " +
       "it flies from your hands.",
       A_ALWAYS,self.outside,self,null,TO_CHAR);
  act ("$1n's $2n surges with power and flies out of $1s hands.",
       A_SOMEONE,self.outside,self,null,TO_REST);
  amount:=min_abi-activator.abilities[ABIL_STR];
  act ("You are not charismatic enough to use $3n. $2t charisma needed "+
       "to use it.", A_ALWAYS, self.outside, itoa (amount),
       self, TO_CHAR);
  return;
}
dilend

dilbegin abi_act3(min_abi:integer);
var
  amount:integer;
code {
  act ("$2n surges with pure evil and it burns you as " +
       "it flies from your hands.",
       A_ALWAYS,self.outside,self,null,TO_CHAR);
  act ("$1n's $2n surges with power and flies out of $1s hands.",
       A_SOMEONE,self.outside,self,null,TO_REST);
  amount:=min_abi-activator.abilities[ABIL_STR];
  act ("You are not high enough in magic to use $3n. $2t magic needed "+
       "to use it.", A_ALWAYS, self.outside, itoa (amount),
       self, TO_CHAR);
  return;
}
dilend

 
/* Not skilled enough */ 
 
dilbegin ex_act(min_abi:integer); 
var 
  amount:integer; 
code { 
  act ("$2n surges with pure evil and it burns you as " + 
       "it flies from your hands.", 
       A_ALWAYS,self.outside,self,null,TO_CHAR); 
  act ("$1n's $2n surges with power and flies out of $1s hands.", 
       A_SOMEONE,self.outside,self,null,TO_REST); 
  act ("You are not skilled enough to use $3n.", 
       A_ALWAYS, self.outside, null, self, TO_CHAR); 
  return; 
} 
dilend 
 
/* END Manum Altur restriction dils */ 
 
 
dilbegin enter_oracle();          /* Oracle enter dil */ 
 
var 
   pc           : unitptr; 
 
code  
{ 
:start: 
   heartbeat := PULSE_SEC*1; 
   wait(SFB_CMD,command(CMD_ENTER) and (("light" in argument) or ("oracle" in argument))); 
   block; 
   pc := activator; 
   secure(pc,lost); 

if(not(ORACLE_VISITED in pc.quests))
{
act("You cannot enter the Oracle yet!",  
      A_ALWAYS,pc,null,null,TO_CHAR); 
      goto lost;
}

   act("You enter the centre of the Oracle!",  
      A_ALWAYS,pc,null,null,TO_CHAR); 
   act("$1n enters the centre of the Oracle and vanishes.",  
      A_SOMEONE,pc,null,null,TO_REST); 
pause;
   link(pc,findroom("forest24@seren")); 
act("You emerge from the light into the Forest of Serenity.",  
      A_ALWAYS,pc,null,null,TO_CHAR); 
   act("A portal of light forms and $1n steps out of it. The portal closes suddenly.",  
      A_SOMEONE,pc,null,null,TO_REST); 
exec("look", pc); 
unsecure(pc); 
pause; 
   goto start; 
 
:lost: 
   unsecure(pc); 
   goto start; 
 
} 
dilend /* enter_oracle */ 
 
 
 
/* DREAM DILS */ 
 
dilbegin dream1(); /* dreamstone*/ 
 
var 
   wakey1  : integer; 
   wakey2  : integer; 
   wakey3  : integer; 
code { 
 
:start: 
 
heartbeat := PULSE_SEC*1; 
   wait(SFB_TICK,(self.equip==WEAR_HOLD)); 
 
   exec("sleep",self.outside); 
 
wakey1 := interrupt(SFB_COM,self.outside.position==POSITION_FIGHTING,awake); 
wakey2 := interrupt(SFB_TICK,self.outside.position!=POSITION_SLEEPING,awake); 
wakey3 := interrupt(SFB_CMD,(command(CMD_REMOVE)) and (("stone" in argument) or ("sphere" in argument)),awake); 
 
act("$1n's "+ 
"&c+rd&c+gr&c+ye&c+ba&c+mm&c+cs&c+rt&c+go&c+yn&c+be&cw " + 
"pulsates gently.", 
A_SOMEONE,self.outside,self,null,TO_REST); 
 
heartbeat := PULSE_SEC*3; 
 
pause; 
 
act("You drift slowly into unconsciousness.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
heartbeat := PULSE_SEC*11; 
 
act("A dense mist begins to form in the blackness and it gradually " + 
      "fills the universe that is your dream...", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
act("The mist begins to thin, slowly revealing a point of light which you seem to " + 
"be travelling towards. The light fills your vision and you are pulled into it!", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 

on rnd(0,3) goto sand, bubble, ignore, serenity;
 

:sand:

act("You are standing on a sandy beach which seems to stretch into infinity. The " +  "horizon is blue and the when you look up, this blue reveals itself to be the sky, " + "unblemished by a single puff of cloud.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You start walking along the beach, occasionally looking out over the featureless " + 
"sea which washes your feet with its refreshing touch. The sand grains tingle among " + "your toes and the water seems to remove all the pain from your body as you steadily " + 
"follow the water's edge.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("After a while, you suddenly come to the realisation that you aren't getting any " + "closer to the beach's end, it seems to be curving around, and looking back you can " + 
"see your footprints slowly being erased by the sea's actions. Surely there must be " +  
"an end to this.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You trudge on, ahead of you the same featureless beach seems to curve " + "unendingly around the water. Maybe you are doomed to circle this sea forever?", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("But wait, what lies beyond the beach? The beach slopes upward and reaches a " + "ridge that follows the curve of the water's edge around the sea, preventing you " + 
"from seeing what could possible be beyond it.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You lose all hope of ever reaching an end to this monotonous beach, and decide " + 
"to head for that ridge which surrounds this place. You start up the beach and as you " + "get closer to the ridge, the sand gets softer, and softer, and softer. You are wading " + "through the soft powdery sand. It offers barely any resistance to you, but you are " + "slowly sinking into it as you go.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("Something holds you to your course, and you keep going, until you are up to " + "your neck in this incredible sand. You are almost at the edge of the ridge, but you " + 
"can't see over the edge, it's just out of reach. You stretch, but as you do, your feet " + 
"lose their support and you slip through the sand!", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You are falling, free falling, you call out in a long scream of panic, but you don't " + "hit ground, you just fall. You peer upwards through the nothingness and see the " + 
"sand hanging in the blackness so far above you. Maybe you aren't moving? Maybe " + "the sand is just getting further away...", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("Then suddenly, beneath you, a white point appears. It seems to be travelling " + 
"with great speed towards you, or perhaps you are falling toward it? It gets bigger, " + 
"and bigger until you realise it is like the light you entered, so long ago. You begin " + 
"to scream, as you get closer to it, at this speed, it will crush you when you hit!", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You close your eyes in terror, and then open them just in time to see the light " + "surround you as you pass into it. Then it all stops.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 

goto over; 

:bubble:

act("You are floating in a clear blue sky. The blue surrounds you in every direction " +
"and seems crisp and clear in its beauty. Looking in the direction which seems to be " + "down, you can see a carving of lakes, mountains, seas and rivers.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("A tiny pinprick of light can be seen directly below you, getting bigger and bigger " + "and bigger as it gets closer to you. Suddenly, you're able to make out just what it is - " +
"a great bubble, transparent and glistening in the light from an unseen sun.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("The bubble grows ever closer, you know it's coming for you, then it touches you " + "and you are inside. You touch the walls, they are like glass, perfectly see-through " + 
"and hard. You begin to get the feeling that your are falling.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("After a few moments, you are positive that the bubble is rapidly falling from the " + "blue sky towards the carving below. The carving seems to become more real as you " + "get closer to it, and you begin to be able to make out the individual features on " +
"the landscape below.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("The bubble is your guide and your prison. Perhaps your tomb, as it hurtles ever " + "closer to the earth below. Not a carving at all, this earth is a lush green place, with " + "snow-capped mountains and azure seas. The bubble is plummeting towards a green " + "hillside.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("Then it stops. Dead stop. The bubble floats barely a metre off the ground, " +
"bobbing slightly in the air. This is an Alpine Valley, and you are at the head of it. " + 
"The bubble stops long enough for you to see the surroundings, then it starts down " +
"the Valley.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("Your 'craft' leads you to a young river as it flows down into a lake which glistens " + "far down in the Valley. The bubble assumes the course of the river and follows it " + "where it leads.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("The brilliant green of the Valley rushes past as the bubble gains speed. You can " + "see deer and other animals grazing and feeding all around you, as a testament to the " + "life here, but you don't have the luxury to stop, because your bubble flies onwards.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("The river gets wider, and it slows, unlike the bubble which continues even out " + "over the lake. The lake is more like a sea, for it is azure blue, like the sky, as if some " + "god took a tropical sea and placed it in the Valley.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("The bubble runs out over the lake and then stops. You can see the tall sides of " +
"the Valley reaching up towards the blue sky. The lake stretches onward into infinity. " + "Just as you are marvelling at the perfection around you, the bubble shudders, " +
"then bursts!", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 

act("Splash! You are flailing wildly in the lake. All knowledge or instinct of how to " + "swim has left you. You are drowning. A cold sense of helplessness is the last thought " + "that runs through your mind as you lose your 'unconsciousness'...", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 

goto over;

:ignore:

act("You open your eyes to discover yourself standing in the middle of a dreary street " + "in the middle of a rainstorm. The rain is pouring down, and there is no one about. " +
"The buildings that run along the street are tall and foreboding, and anything but " + "welcoming.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You start walking along the street, gradually being soaked the bone, but where " + "ever you look, not a sign of life is to be seen. The street begins to slope downwards, " + "and the water from the rain runs down great drains along the roadside.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You realise that the buildings to either side of the road are probably the homes " +
"of people, and that everyone in the town is hiding from the showers. Perhaps you " + "could get shelter from the rain, a seat by a warm fire and maybe, if you're lucky, a " + "warm meal.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You approach one of the house doors and knock upon it, in the hopes that " + "someone will answer. You pull your short collar up around your neck in the feeble " + "hope of keeping out the rain which is soaking through your clothes.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("An old face appears at the window beside the door and stares at you crossly. " + "'Who are you?! Well? Go away, we don't like vagrants harassing us you know.' The " + "face sneers and vanishes into the darkness of the room behind the window.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You wonder why that person called you a vagrant. Maybe you look so " + "bedraggled that no one would want to take pity on you. You try the next door. This " + "time someone opens it. A tall man, well-fed and red in the face greets you with a " +
"cold grimace.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("'What do you want??' This time you try to reply, but you don't seem to be able " + "to say a word, you just mouth them and no sound emerges. The man looks at you " + "with a start. 'Well if that's your attitude, please leave my doorstep.'", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You turn away, and then stop for a moment. Why couldn't you make a single " + "sound? You decide to give it another try and continue walking down the street. You " + "pass a few doorways that look cold and even less uninviting than the others you " + 
"have seen so far.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You finally reach one which has a sign hanging outside it saying, 'The Dreary " + "Inn.' Obviously the owner isn't too keen on custom! You enter within, and are " + "greeted with dirty looks and evil stares from the regulars. One of them gets up and " + "walks towards you.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You notice a mirror and pass it to see exactly what is so off-putting in your " + "appearance. You almost faint when you notice an orc face staring back at you. Just " + "as you recover some semblance of composure, you turn to feel a heavy fist impact " + "on the side of your head.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 

act("As you lose consciousness, the lasts words you here are, 'Filthy Orcish vermin. " + "When will they ever learn that no one can stand them but their own.'", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 

goto over;

:serenity:

act("A faint breeze greets you as you open your eyes. You are standing at the top " +
"of a ridge, seemingly at the head of a long green Valley. Somehow you know this " +
"to be the Valley of Serenity. You face southwards overlooking the fields which " +
"mark the northern extent of the Forest of Serenity.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("The sudden urge to explore the place arises within you. So, without further " + 
"delay, you set off down the path that leads into the trees. As you walk, you can " +
"smell of alpine flowers fills the air as you descend towards the Forest.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You reach the edge of the Forest. A large boulder sits at the entrance, but you " +
"ignore it and proceed into the trees, taking one brief glance back at the Valley, as " +
"it stretches up towards the northern horizon.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("As you walk along the path, butterflies flit in and out of the leaves above you in " + "the canopy, and the gentle breeze plays off the canopy, giving a dappling of sunlight " + "on the centre of the path. The sound of birdsong emanates from the trees around you.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You continue walking down the avenue. Every once and a while, a rabbit or " +
"other small creature runs off or on to the path. It seems so tranquil here, as if evil " +
"is a word unheard of here. As you walk southwards, the forest bends around to the " + "east, and you follow it.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("The path begins to bend back southwards. After walking for what seems like an " + "hour, you spot a large clearing to the south. You continue walking, all the while, " +
"your eyes fixed on the clearing. As it gets closer, you spy that there is a large " +
"fortified temple in the clearing.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You reach the clearing, and before you lies what you know to be the Temple of " + "Odin. The only way in is through a large set of gates, guarded by huge Elementals " +
"of Earth. Without fear, you stride through the gates, and the guardians let you " +
"pass unhindered.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You walk into the courtyard. The smell of hay and horses wafts to your nostrils " + "from the west breeze. Indeed, there are stables there, but you don't seem to be " + "concerned with that, and you just continue to the main temple doors.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("These too are guarded by the great elementals of earth. You throw open the " + "heavy wooden doors, and the sunlight streams into a torch lit antechamber. A large " + "set of doors set in the south wall of this chamber mark the entrance to the main " + "temple, and these too you fling open wide.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 
 
act("You walk slowly into the Temple of the Coven. To the north you spy the Altar " + "and statue of Odin, set on high, and to either side, the statues of Tyr and Thor, the " + "other Aesir. There are priests in the aisles, praying to their patron deity. You walk " + "up the west aisle, you pass the statue of Thor, the Thunder god, and proceed to " + 
"the Statue of Odin.", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 

act("Something drives you to kneel here. You get down on your knees before the " + "statue of Odin and look up at it. A voice sounds in your head, 'My child, though " +  "you dream this, I know you will come to this place. I have ordained it.' The eyes " +
"of the statue glow brightly and you are blinded!", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
pause; 

goto over;


:over:

act("You are in the white mist once again. It seems to thicken, and you realise that " + 
"sleep is losing its hold upon you...", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
 
heartbeat := PULSE_SEC*5; 
 
pause; 
 
exec("wake", self.outside); 
 
:awake: 
 
act("Your " + 
"&c+rd&c+gr&c+ye&c+ba&c+mm&c+cs&c+rt&c+go&c+yn&c+be&cw " + 
"pulsates and then vanishes into nothingness!", 
A_ALWAYS,self.outside,self,null,TO_CHAR); 
act("$1n's " + 
"&c+rd&c+gr&c+ye&c+ba&c+mm&c+cs&c+rt&c+go&c+yn&c+be&cw " + 
"pulsates and then vanishes into nothingness!", 
A_SOMEONE,self.outside,self,null,TO_REST); 
 
destroy(self); 
 
} 
dilend /* End dream1 */ 
 
dilbegin dream2(); /* Forest */ 
 
var 
   wakey1  : integer; 
   wakey2  : integer; 
   stone      : unitptr;
   pc          : unitptr;
code { 
 
:start: 
 
heartbeat := PULSE_SEC*10;
wait(SFB_CMD,command("sleep")); 
pc := activator;
secure(pc, lostem);
wakey1 := interrupt(SFB_COM,pc.position==POSITION_FIGHTING,lostem); 
wakey2 := interrupt(SFB_TICK,pc.position!=POSITION_SLEEPING,lostem); 

stone := findunit(activator, "dstone", FIND_UNIT_EQUIP, null); 
  if (stone) 
  { 
     goto start;
  } 

heartbeat := PULSE_SEC*3; 
 
pause; 

if (pc.position==POSITION_SLEEPING)
{
goto begind;
} 
goto start;

:begind:

act("Your sleep becomes a dream...", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
heartbeat := PULSE_SEC*11; 
 
act("A dense mist begins to form in the blackness and it gradually " + 
      "fills the universe that is your dream...", 
A_ALWAYS,pc,null,null,TO_CHAR); 

pause; 

act("The mist begins to thin, slowly revealing a point of light which you seem to " + 
"be travelling towards. The light fills your vision and you are pulled into it!", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 

on rnd(0,3) goto sand, bubble, ignore, serenity;
 

:sand:

act("You are standing on a sandy beach which seems to stretch into infinity. The " +  "horizon is blue and the when you look up, this blue reveals itself to be the sky, " + "unblemished by a single puff of cloud.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You start walking along the beach, occasionally looking out over the featureless " + 
"sea which washes your feet with its refreshing touch. The sand grains tingle among " + "your toes and the water seems to remove all the pain from your body as you steadily " + 
"follow the water's edge.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("After a while, you suddenly come to the realisation that you aren't getting any " + "closer to the beach's end, it seems to be curving around, and looking back you can " + 
"see your footprints slowly being erased by the sea's actions. Surely there must be " +  
"an end to this.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You trudge on, ahead of you the same featureless beach seems to curve " + "unendingly around the water. Maybe you are doomed to circle this sea forever?", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("But wait, what lies beyond the beach? The beach slopes upward and reaches a " + "ridge that follows the curve of the water's edge around the sea, preventing you " + 
"from seeing what could possible be beyond it.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You lose all hope of ever reaching an end to this monotonous beach, and decide " + 
"to head for that ridge which surrounds this place. You start up the beach and as you " + "get closer to the ridge, the sand gets softer, and softer, and softer. You are wading " + "through the soft powdery sand. It offers barely any resistance to you, but you are " + "slowly sinking into it as you go.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("Something holds you to your course, and you keep going, until you are up to " + "your neck in this incredible sand. You are almost at the edge of the ridge, but you " + 
"can't see over the edge, it's just out of reach. You stretch, but as you do, your feet " + 
"lose their support and you slip through the sand!", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You are falling, free falling, you call out in a long scream of panic, but you don't " + "hit ground, you just fall. You peer upwards through the nothingness and see the " + 
"sand hanging in the blackness so far above you. Maybe you aren't moving? Maybe " + "the sand is just getting further away...", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("Then suddenly, beneath you, a white point appears. It seems to be travelling " + 
"with great speed towards you, or perhaps you are falling toward it? It gets bigger, " + 
"and bigger until you realise it is like the light you entered, so long ago. You begin " + 
"to scream, as you get closer to it, at this speed, it will crush you when you hit!", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You close your eyes in terror, and then open them just in time to see the light " + "surround you as you pass into it. Then it all stops.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 

goto over; 

:bubble:

act("You are floating in a clear blue sky. The blue surrounds you in every direction " +
"and seems crisp and clear in its beauty. Looking in the direction which seems to be " + "down, you can see a carving of lakes, mountains, seas and rivers.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("A tiny pinprick of light can be seen directly below you, getting bigger and bigger " + "and bigger as it gets closer to you. Suddenly, you're able to make out just what it is - " +
"a great bubble, transparent and glistening in the light from an unseen sun.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("The bubble grows ever closer, you know it's coming for you, then it touches you " + "and you are inside. You touch the walls, they are like glass, perfectly see through " + 
"and hard. You begin to get the feeling that your are falling.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("After a few moments, you are positive that the bubble is rapidly falling from the " + "blue sky towards the carving below. The carving seems to become more real as you " + "get closer to it, and you begin to be able to make out the individual features on " +
"the landscape below.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("The bubble is your guide and your prison. Perhaps your tomb, as it hurtles ever " + "closer to the earth below. Not a carving at all, this earth is a lush green place, with " + "snow-capped mountains and azure seas. The bubble is plummeting towards a green " + "hillside.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("Then it stops. Dead stop. The bubble floats barely a metre off the ground, " +
"bobbing slightly in the air. This is an Alpine Valley, and you are at the head of it. " + 
"The bubble stops long enough for you to see the surroundings, then it starts down " +
"the Valley.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("Your 'craft' leads you to a young river as it flows down into a lake which glistens " + "far down in the Valley. The bubble assumes the course of the river and follows it " + "where it leads.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("The brilliant green of the Valley rushes past as the bubble gains speed. You can " + "see deer and other animals grazing and feeding all around you, as a testament to the " + "life here, but you don't have the luxury to stop, because your bubble flies onwards.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("The river gets wider, and it slows, unlike the bubble which continues even out " + "over the lake. The lake is more like a sea, for it is azure blue, like the sky, as if some " + "god took a tropical sea and placed it in the Valley.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("The bubble runs out over the lake and then stops. You can see the tall sides of " +
"the Valley reaching up towards the blue sky. The lake stretches onward into infinity. " + "Just as you are marvelling at the perfection around you, the bubble shudders, " +
"then bursts!", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 

act("Splash! You are flailing wildly in the lake. All knowledge or instinct of how to " + "swim has left you. You are drowning. A cold sense of helplessness is the last thought " + "that runs through your mind as you lose your 'unconsciousness'...", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 

goto over;

:ignore:

act("You open your eyes to discover yourself standing in the middle of a dreary street " + "in the middle of a rainstorm. The rain is pouring down, and there is no one about. " +
"The buildings that run along the street are tall and foreboding, and anything but " + "welcoming.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You start walking along the street, gradually being soaked the bone, but where " + "ever you look, not a sign of life is to be seen. The street begins to slope downwards, " + "and the water from the rain runs down great drains along the roadside.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You realise that the buildings to either side of the road are probably the homes " +
"of people, and that everyone in the town is hiding from the showers. Perhaps you " + "could get shelter from the rain, a seat by a warm fire and maybe, if you're lucky, a " + "warm meal.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You approach one of the house doors and knock upon it, in the hopes that " + "someone will answer. You pull your short collar up around your neck in the feeble " + "hope of keeping out the rain which is soaking through your clothes.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("An old face appears at the window beside the door and stares at you crossly. " + "'Who are you?! Well? Go away, we don't like vagrants harassing us you know.' The " + "face sneers and vanishes into the darkness of the room behind the window.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You wonder why that person called you a vagrant. Maybe you look so " + "bedraggled that no one would want to take pity on you. You try the next door. This " + "time someone opens it. A tall man, well-fed and red in the face greets you with a " +
"cold grimace.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("'What do you want??' This time you try to reply, but you don't seem to be able " + "to say a word, you just mouth them and no sound emerges. The man looks at you " + "with a start. 'Well if that's your attitude, please leave my doorstep.'", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You turn away, and then stop for a moment. Why couldn't you make a single " + "sound? You decide to give it another try and continue walking down the street. You " + "pass a few doorways that look cold and even less uninviting than the others you " + 
"have seen so far.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You finally reach one which has a sign hanging outside it saying, 'The Dreary " + "Inn.' Obviously the owner isn't too keen on custom! You enter within, and are " + "greeted with dirty looks and evil stares from the regulars. One of them gets up and " + "walks towards you.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You notice a mirror and pass it to see exactly what is so off-putting in your " + "appearance. You almost faint when you notice an orc face staring back at you. Just " + "as you recover some semblance of composure, you turn to feel a heavy fist impact " + "on the side of your head.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 

act("As you lose consciousness, the lasts words you here are, 'Filthy Orcish vermin. " + "When will they ever learn that no one can stand them but their own.'", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 

goto over;

:serenity:

act("A faint breeze greets you as you open your eyes. You are standing at the top " +
"of a ridge, seemingly at the head of a long green Valley. Somehow you know this " +
"to be the Valley of Serenity. You face southwards overlooking the fields which " +
"mark the northern extent of the Forest of Serenity.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("The sudden urge to explore the place arises within you. So, without further " + 
"delay, you set off down the path that leads into the trees. As you walk, you can " +
"smell of alpine flowers fills the air as you descend towards the Forest.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You reach the edge of the Forest. A large boulder sits at the entrance, but you " +
"ignore it and proceed into the trees, taking one brief glance back at the Valley, as " +
"it stretches up towards the northern horizon.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("As you walk along the path, butterflies flit in and out of the leaves above you in " + "the canopy, and the gentle breeze plays off the canopy, giving a dappling of sunlight " + "on the centre of the path. The sound of birdsong emanates from the trees around you.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You continue walking down the avenue. Every once and a while, a rabbit or " +
"other small creature runs off or on to the path. It seems so tranquil here, as if evil " +
"is a word unheard of here. As you walk southwards, the forest bends around to the " + "east, and you follow it.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("The path begins to bend back southwards. After walking for what seems like an " + "hour, you spot a large clearing to the south. You continue walking, all the while, " +
"your eyes fixed on the clearing. As it gets closer, you spy that there is a large " +
"fortified temple in the clearing.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You reach the clearing, and before you lies what you know to be the Temple of " + "Odin. The only way in is through a large set of gates, guarded by huge Elementals " +
"of Earth. Without fear, you stride through the gates, and the guardians let you " +
"pass unhindered.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You walk into the courtyard. The smell of hay and horses wafts to your nostrils " + "from the west breeze. Indeed, there are stables there, but you don't seem to be " + "concerned with that, and you just continue to the main temple doors.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("These too are guarded by the great elementals of earth. You throw open the " + "heavy wooden doors, and the sunlight streams into a torch lit antechamber. A large " + "set of doors set in the south wall of this chamber mark the entrance to the main " + "temple, and these too you fling open wide.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 
 
act("You walk slowly into the Temple of the Coven. To the north you spy the Altar " + "and statue of Odin, set on high, and to either side, the statues of Tyr and Thor, the " + "other Aesir. There are priests in the aisles, praying to their patron deity. You walk " + "up the west aisle, you pass the statue of Thor, the Thunder god, and proceed to " + 
"the Statue of Odin.", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 

act("Something drives you to kneel here. You get down on your knees before the " + "statue of Odin and look up at it. A voice sounds in your head, 'My child, though " +  "you dream this, I know you will come to this place. I have ordained it.' The eyes " +
"of the statue glow brightly and you are blinded!", 
A_ALWAYS,pc,null,null,TO_CHAR); 
pause; 

goto over;


:over:

act("You are in the white mist once again. Your sleep deepens, and you lose the dream...", 
A_ALWAYS,pc,null,null,TO_CHAR); 
 
heartbeat := PULSE_SEC*5; 
 
pause; 
 
:lostem: 
 
unsecure(pc);
goto start;

} 
dilend /* End dream2 */


 
/* END DREAM DILS */ 

dilbegin blockall(); /* Block Movement and look */

code 
{
:start:
   wait(SFB_CMD,((command("north") or command("south") or command("east") or command("west") or command("up") or command("down") or command("look")) and (activator.level<CREATOR_LEVEL)));
   block;
   goto start;
}
dilend /* blockall */

dilbegin recall well_lake();  /* Transfer from Temple well to the lake */

code 
{
:start:
   heartbeat := PULSE_SEC*11;
   act("You plunge into ice cold water which carries you south!", A_ALWAYS,self,null,null,TO_CHAR);
   pause;
   act("You have trouble keeping your head above the water. There "+
      "is very little air down here.",A_ALWAYS,self,null,null,TO_CHAR);
   pause;
   act("You are carried along by the current, through the blackness, " +
  "then suddenly out into a dark body of water!", A_ALWAYS,self,null,null,TO_CHAR);
   pause;
   act("You kick your feet to try and reach the surface before you " +
"drown!", A_ALWAYS,self,null,null,TO_CHAR);
   pause;
   act("As your lungs are about to give way, your head breaks the "+
      "surface and you take a deep breath.",A_ALWAYS,self,null,null,TO_CHAR);
pause;
   act("You are obviously out in the Lake of Remembrance. To your "+
      "north, the shore is just visible and you swim towards it.", A_ALWAYS,self,null,null,TO_CHAR);
pause;
link(self,findroom("forest30@seren")); 
   act("You scramble out of the water onto the land.", A_ALWAYS,self,null,null,TO_CHAR);
act("$1n scrambles out of the water on to the shore.", A_ALWAYS,self,null,null,TO_REST);

exec("look",self);
pause;
quit;
}
dilend /* well_lake */

dilbegin breeze();  /* Breeze action on Road/Ridge/path */
 
var 
   i    : integer; 
   pc  : unitptr;
code 
{ 
:init: 
   heartbeat := PULSE_SEC*10; 
 
:start: 
   wait(SFB_DONE,activator.type==UNIT_ST_PC); 
pc := activator;
secure(pc, lostem);
   pause;
   pause; 
   act("A light breeze blows from the west.", A_SOMEONE,pc,null,null,TO_CHAR); 
   act("A light breeze blows from the west.", A_SOMEONE,pc,null,null,TO_ROOM); 
   pause; 
   pause;
   pause;
   pause; 
   pause; 
   act("The breeze tosses your hair.", A_SOMEONE,pc,null,null,TO_CHAR); 
   act("The breeze tosses $1n's hair.", A_SOMEONE,pc,null,null,TO_ROOM); 
   pause; 
   pause; 
   pause; 
   pause; 
   pause; 
   pause; 
   goto start; 

:lostem:

unsecure(pc);

goto start;

} 
dilend /* breeze */ 


 
/* END DIL SECTION */ 
 
/* +++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++  R O O M S   S E C T I O N   +++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++*/
 
%rooms 
 
/*   
 
   Format of Rooms:  roadx       - The North Road and ridge. 
                     dreamx      - Dreamweaver's store and dreamroom. 
                     pathx       - South of Ridge. 
                     fieldx      - Fields East and West of pathx. 
                     forestx     - Forest of Serenity south of fieldx/pathx. 
                     lakex       - Southwest of forestx.  
                     templex     - Southern part of forestx. 
 
  
                     Overall Map of Zone 
                     =================== 
                             R
                             R                
                             R 
                          D-DR                  
                             R                            KEY 
                          FFFPFFF                         === 
                          FFFPFFF 
                          FFFPFFF                  R - North Road (4 rooms) 
                             Y                     D - Dreamseller's store 
        TOWER             YYYYYYY                  P - path down into Valley (4 rooms) 
        =====             YYYYY Y Y                F - Fields north of Forest (18 rooms) 
                          YTYYYYYYY                Y - Forest of Serenity (38 rooms) 
         T=T              Y  YYY Z                 T - Tower of the Oracle (2 rooms - side map) 
                          Y  Y*Y                   Z - Forest Clearing of Zolan. 
                          Y  YYY                   * - Temple of the Coven (Circa 75 rooms). 
                          LL                       L - Lake of Remembrance (18 rooms) 
                         LLLL                      - - Down 
                         LLLL                      = - Up 
                          LLLL 
                          LLLL 
 
 
*/ 

/* God room (somewhere to go on my own, no god-toys) */

			glade
names {"&c+gA lush green glade&cw", "&c+gEirinn's Glade&cw", "Eirinn's Glade", "eglade", "eg"}
title "&c+gA lush green glade&cw"
descr 
" Sunlight dappled by the canopy of leaves warms this lush glade in the Forest of Serenity. There are plants growing here the likes of which you have never seen before, all shaded by a ring of lofty oak trees which seem to exude both a sense of majesty and a feeling of power into the air around you. To the south, through a portal between two oaks, you can see Udgaard Square. A warm ray of light shines down from the heavens, you could almost follow it there.&n&c+nA great stone seat rests amidst the green tussocks of mossy grass.&cw"

extra {"plants", "plant"}
"The plants are green and healthy. They seem to be exotic varieties of the normal forest plants, but they seem so much more alive."

extra {"oaks", "trees", "oak", "tree"}
"The trees are tall and seasoned by many millenia. They stand taller than the other trees in the forest, and they bear an air of power and majesty. They are in full-leaf, and none of the leaves have been touched, they are exquisite in their perfection and beauty."

extra {"&c+ngreat stone seat&cw","stone chair","stone seat","chair","seat"}
"This stone chair is made from a solid block of grey stone. The moss from the ground has grown up and covered the stone, making a comfortable cushion upon which a god could sit. An inscription runs along the edge of the chair."

extra {"inscription"}
"&lThe inscription reads:
          
              'Let this monument be a reminder to all who 
               would see it of Eirinn's gratitude to all 
               those who aided him in his bid to create 
               a place in the Realm of Valhalla. You have 
               his respect, his friendship, and most of
               all his promise to return your help in 
               whatever way he can. Names mean nothing,
               they just serve to designate the person 
               from the people, and the people know who
               they are... thank you all.'"

extra {"moss"}
"The moss is green and almost furry. It makes an excellent carpet for the glade, and a very comfortable cushion for the stone seat."

extra {"portals", "portal"}
"The portals are great seams of light, hanging in the air. You could step into them easily, taking you to the place you see beyond."

extra {"ray of light", "light"}
"The light is about four metres above your head. If you could only reach it, maybe you could follow it to the Other side..."

flags {UNIT_FL_NO_WEATHER, UNIT_FL_PRIVATE, UNIT_FL_SACRED, UNIT_FL_NO_TELEPORT}

movement SECT_INSIDE

dilcopy birdies@seren();
dilcopy sit_chair@seren();
dilcopy direction_glade@seren();
dilcopy transfer_people@seren("glade@seren");  /* Allow me to transfer people into the room (This room and chat room only) at sub level 240 */

ALWAYS_LIGHT

south to glade descr "";

end /* Glade */

/* End God room */
 
/* Connection to the Etz-Nab woods */

				etzcon1
names {"old road"} 
title "The Southern Outskirts of the Ancient Etz-Nab Woods" 
 
descr 
" This place marks the southern outskirts of the Etz-Nab Woods. North from here, the trail leads under the ancient tall trees and deep into the woods. The trail is covered in leaves which crackle underfoot as you walk by. To the South, the trail leaves the woods and starts to become more like a road. A small trail can be seen leading off to the east and an old wooden sign nailed to a tree catches your eye." 

extra {"wooden sign","sign"}
"In blood you notice someone has made an effort to draw a skull and crossbones with an arrow pointing eastwards. The meaning is clear there is DANGER to the east. Only the most experienced warriors should attempt to travel in that direction."
 
extra {"trail", "path"}
"The trail from the woods southward is quite sandy and featureless, being only lightly worn here, but further south it becomes a proper road. Northward, it becomes less dusty, but shaded by the trees."

flags {UNIT_FL_NO_MOB} 
movement SECT_MOUNTAIN 
 
dilcopy breeze@seren();

north to c_trail15@etznab descr "The Central Trail Through the Etz-Nab Woods"; 
south to etzcon2 descr "South along an old road"; 
east to path1@gobtown descr "A small path branches off to the east";
 
end 

				etzcon2 
names {"old road"} 
title "South of the Etz-Nab Woods" 
 
descr 
" You are now south of the Etz-Nab woods. You are on an old road that leads from the woods to the north to a far off ridge to the south, which marks the north end of the Valley of Serenity. This is a peaceful place, quiet and unspoilt by the passage of travellers. The road becomes the central trail through the Etz-Nab woods to the north and to the south it widens into a fully-fledged highway, albeit in bad repair." 
 
extra {"pavement", "road"} 
"The pavement is hardly recognisable anymore, being just rubble and scattered debris with a few plants growing round about. For it to has lasted this long, the craftsmanship and skill of its creators must have been immeasurable." 
 
extra {"woods"} 
"The great Etz-Nab woods span the horizon to the north." 
 
extra {"ridge"} 
"The ridge is at the top of a rise - the road rises gradually as it leads southwards. The ridge blocks your view further south."

flags {UNIT_FL_NO_MOB} 
movement SECT_MOUNTAIN 
 
dilcopy breeze@seren();

north to etzcon1 descr "The Outskirts of the Etz-Nab Woods"; 
south to road1 descr "South along the old road"; 
 
end 

 
/* BEGIN NORTH ROAD - 2 rooms (possibly more later when Zone is taped onto the southern end of Mon's Etz-Nab woods */ 
 
                                road1 
names {"Old road"} 
title "An Old road" 
 
descr 
" This road is in very bad repair, yet it is amazing that even a trace of it remains after the long centuries since it was first built. You have to walk carefully along it because of the broken pavement and the low growing plants which come out of cracks in the road. Few, if any people have travelled this way in many a year. To the north you can see the Etz-Nab Woods in the distance, and to the south the road leads to a far-off ridge. There is a small cottage on the west side of the road here. It looks old, but it is in good condition. There are two windows, one either side of the door, and they both have window boxes full of flowers." 
 
extra {"pavement", "road"} 
"The pavement is hardly recognisable anymore, being just rubble and scattered debris with a few plants growing round about. For it to has lasted this long, the craftsmanship and skill of its creators must have been immeasurable." 
 
extra {"low growing plants", "plants", "plant"} 
"Grasses, stonecrops and creeping clovers seem to be the main vegetation growing on the road. They help to obscure it and it is a wonder you can recognise it as a road anymore." 
 
extra {"cracks", "crack"} 
"These abrasions on the pavement seem to have been caused not by wear, but by time and weather. A multitude of plants grow from them." 
 
extra {"cottage"} 
"This little cottage is enchanting to look at. You can enter it to the west." 
 
extra {"windows", "window"} 
"The windows are slightly opaque and look rather old." 
 
extra {"window boxes", "window box", "boxes", "box", "flowers", "flower"} 
"The window boxes are filled with flowers. There are pretty faced pansies and creeping Lobelias hanging down over the window sills." 
 
flags {UNIT_FL_NO_MOB} 
movement SECT_MOUNTAIN 
 
dilcopy breeze@seren();

north to etzcon2 descr "North along the road"; 
west to store1 open {EX_OPEN_CLOSE, EX_CLOSED} 
descr "The door of the cottage." keyword {"door"}; 
south to road2 descr "Further south along the old road"; 
 
end 
 
                                road2 
names {"Old road"} 
title "An Old road" 
 
descr 
" The road here is slightly less overgrown than the rest. In the distance to the south, you can see a ridge, and the road gently rising to meet it. This ridge blocks the view further south. To the North, the Road continues to the Etz-Nab woods. The road is in even worse repair (if that's possible) at this point. The bones of what appear to be a horse lie by the eastern side of the road. A spearhead lies in amongst the bones." 
 
extra {"pavement", "road"} 
"The pavement is hardly recognisable anymore, being just rubble and scattered debris with a few plants growing round about. For it to have lasted this long, the craftsmanship and skill of its creators must have been immeasurable." 
 
extra {"horse bones", "bones", "bone"} 
"It seems that this poor creature was caught in the open and killed mercilessly by some unknown aggressor. Little remains of the horse bones. Perhaps that spearhead could reveal more about the cause of death?" 
 
extra {"spearhead", "spear", "head"} 
"This cruelly shaped triangle of steel seems to be orcish, or perhaps goblin in origin." 
 
movement SECT_MOUNTAIN 

dilcopy breeze@seren();
 
north to road1 descr "North along the road to the New lands"; 
south to ridge descr "South to the ridge at the head of the Valley of Serenity"; 
 
end 
 
/* END NORTH ROAD */ 
 
/* DREAM SELLER - 2 rooms */ 
 
                                store1 
names {"dream store"} 
title "The Cottage of the Dreamweaver" 
 
descr 
" This is a small cottage, with a stairs leading down and a large one room space. There is a stove against the southern wall and a bed against the western wall. There is what looks like a store counter right in front of you, restricting your movement into the store. A sign on the wall grabs your attention. It is written in coloured writing and has a display of images on it. The colours are warm and inviting. This is a good place." 
 
extra {"stairway", "stairs", "stair"} 
" A small wooden stairway leads down into the room below to the south of the room near the stove." 
 
extra {"stove"} 
" Obviously for cooking, it must also warm the room and the whole cottage." 
 
extra {"counter"} 
" The stor counter is a dark wood of some sort, and about a metre in height." 
 
extra {"sign"} 
"&lThe sign says: 
 
      'Dreams come in many kinds. You can dream joyful, tearful, 
       romantic, mysterious, funny, humble and of course nightmare  
       dreams. Each dream is placed in a dreamstone, and to dream 
       the dream, just go to sleep holding the Stone. All that is 
       asked in exchange for one of these stones is some money. 
       You can dream your dream in the relative safety of the 
       Dreamroom below.' 
   
 
                       -Chani the Dreamweaver" 
 
extra {"bed"} 
"A small well made bed is against the western wall. The sheets are white and the pillow is cream coloured." 
 
extra {"floor"} 
"The Floor is dry and clean. The whole cottage is well kept." 
 
extra {"bell"} 
"The Bell is small and golden. You can ring it by typing 'ring bell'" 
 
flags {UNIT_FL_INDOORS, UNIT_FL_NO_WEATHER, UNIT_FL_NO_MOB} 
 
movement SECT_INSIDE 
ALWAYS_LIGHT 
 
east to road1 open {EX_OPEN_CLOSE, EX_CLOSED} 
descr "The door of the cottage." keyword {"door"}; 
down to store2 descr "Down the stairs"; 
 
end 
 
                                   store2 
names {"dreamroom"} 
title "The Dreamroom" 
 
descr 
" This room is larger than the one above, but the floor is carpeted with a comfortable, thick carpet, ideal for sleeping on. It is bare except for the Stairway back up the the main room of the Cottage. The carpet is covered with weird and wonderful symbols, and the entire room gives an overall sense of safety, comfort and magic. You can sleep here or go back up the stairway." 
 
extra {"carpet", "floor"} 
"The floor is carpeted with a colourful, thick rug and is very inviting. You feel like you could go to sleep in a second here. There are colourful spirals and shapes embroidered into the rug. It is like a tapestry spread out on the ground." 
 
extra {"stairway", "stairs", "stair"} 
" A small wooden stairway leads back up into the main room of the Cottage." 
 
flags {UNIT_FL_INDOORS, UNIT_FL_NO_WEATHER, UNIT_FL_NO_TELEPORT} 
 
movement SECT_INSIDE 
IN_ALWAYS_DARK 
 
up to store1 descr "Up to the main room of the Cottage"; 
 
end 
 
/* END DREAMSELLER */ 
 
/* BEGIN PATH BEFORE FOREST  - 4 rooms */ 
 
ridge 
names {"ridge"} 
title "A ridge at the head of the Valley" 
 
descr 
" To the South you can see the magnificent Valley of Serenity spread out before you. It's like something out of legend. A stream flows through the Valley from the Northwest and disappears into the lush green forest that lies lower down. South of the Ridge, the road turns into a path, and it can be seen winding its way down into the Forest. In the far south, beyond the Forest, a faint mist is just visible. You know this to be Lake of Remembrance. Something tells you that you shouldn't venture that far south if you want to live long. The path to the south descends into the forest. To the north, the road slopes down and runs straight to the Etz-Nab woods which cause a green haze on the horizon." 
 
extra {"ridge"} 
"The ridge is dry and wind swept. The exposure it has to the elements has removed any remnants of the road at this point. From here you can see the Valley to the South, and the old road stretching off to the north and the Etz-Nab Woods." 
 
extra {"valley of serenity", "valley"} 
"This is the most beautiful sight you have ever seen. The harmony of nature in all its glory." 
 
extra {"stream"} 
"The stream looks not to be very wide, but it does seem to be fast-flowing. The water is iridescent in the sunlight. It makes you smile." 
 
extra {"forest"} 
"A forest right out of fairy tales. The trees seem to be mainly deciduous, but some of them appear to be evergreens. Oaks, Elms and other hardwoods." 
 
extra {"path"} 
"The path is the remains of the old elven road that lies south of the ridge. It bears no real evidence that it was once a road, just a track. It disappears into the forest not too far down into the Valley." 
 
extra {"road"} 
"The pavement is hardly recognisable anymore, being just rubble and scattered debris with a few plants growing round about. For it to have lasted this long, the craftsmanship and skill of its creators must have been immeasurable. It leads north to the new lands." 
 
movement SECT_MOUNTAIN 

dilcopy breeze@seren();
 
north to road2 descr "Along the old road"; 
south to path1 descr "South down the path into the Valley"; 
 
end 
 
 
/* End Builders test rooms */ 
 
/* Begin real zone rooms */ 
 
                                        path1 
names {"southern path", "path"} 
title "Path near the ridge" 
 
descr 
" This path bears little resemblance to the road that was once here. It is dry and a little dusty, so there probably hasn't been much rain recently. The grass fields to the left and right, though featureless, are a healthy green and they seem to roll downhill to meet the edge of the forest further down in the Valley. To the North, the Ridge obscures the view. To the South, the Forest looms larger and further down in the Valley you can see the breeze play off the tree canopy. You can go east and west into the fields." 
 
extra {"path"} 
"The path, though dusty, is well marked and proceeds down south to meet the forest and northward to join the ridge." 
 
extra {"grass fields", "grass", "fields", "field"} 
"The fields are low growing, almost as if they were regularly cut. Perhaps there is some kind of grazing animal in these parts that regularly feeds here. Some kind of sheep probably." 
 
extra {"edge of forest", "forest edge", "forest"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"ridge"} 
"The ridge is dry and wind swept. The exposure it has to the elements has removed any remnants of the road at this point." 
 
extra {"tree canopy", "canopy", "tree"} 
"From here you can see the breeze as it plays across the tree canopy, dappled with sunlight, it seems to sparkle like a green sunlight sea." 
 
movement SECT_FIELD 

dilcopy breeze@seren();
 
flags {UNIT_FL_NO_MOB} 
 
north to ridge descr "To the Ridge"; 
south to path2 descr "Path before the Forest"; 
east to field10 descr "Into the fields"; 
west to field1 descr "Into the fields"; 
 
end 
 
                                        path2 
names {"southern path", "path"} 
title "Path near the Forest" 
 
descr 
" You can see the ridge far off in the distance to the North. Southwards lie the eaves of the Forest. Just before them you can see a large boulder, but it is too far from here to see if there is anything special about it. The path continues south to and into the forest. What looks like an avenue through the trees is barely visible from here. You can go east and west through the fields from here." 
 
extra {"path"} 
"The path, though dusty, is well marked and proceeds down south to meet the forest and northward to join the ridge." 
 
extra {"grass fields", "grass", "fields", "field"} 
"The fields are low growing, almost as if they were regularly cut. Perhaps there is some kind of grazing animal in these parts that regularly feeds here. Some kind of sheep probably." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"ridge"} 
"The ridge is dry and wind swept. The exposure it has to the elements has removed any remnants of the road at this point." 
 
extra {"avenue"} 
"What looks to be a natural avenue in the trees leads deep into the forest." 
 
movement SECT_FIELD 

dilcopy breeze@seren();
 
flags {UNIT_FL_NO_MOB} 
 
north to path1 descr "Nearer the Ridge"; 
south to path3 descr "Before the Forest"; 
east to field15 descr "Into the fields"; 
west to field6 descr "Into the fields"; 
 
end 
 
                                        path3 
names {"before the forest"} 
title "The Entrance to the Forest" 
 
descr 
" You stand in awe before the Forest of Serenity.  The trees here must be the 
lords of trees, if such beings existed.  They tower above you, oaks, ashes, 
beeches, elms, evergreens and some species that you are unfamiliar with.  You 
get an impression of concealed power from this place, power of goodness, as if 
anything evil would not survive long in the Forest.  North is the path towards 
the ridge, which is now barely visible on the horizon, above you.  You have 
descended right down into the Valley.  South lies the avenue through the trees. You can skirt the forest by going east or west into the fields from here." 
 
extra {"path"} 
"The path meets the forest here and northward it joins the ridge in the far distance, high on the horizon." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves", "oaks", "trees", "elms", "ashes", "beeches", "evergreens"} 
"The true splendour and majesty of the Forest is now apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"ridge"} 
"The ridge barely visible to the North. It prevents any eyes looking down into the Valley without being seen." 
 
extra {"avenue"} 
"What looks to be a natural avenue in the trees leads deep into the forest. Perhaps you should enter?" 
 
movement SECT_FIELD 

dilcopy breeze@seren();
 
flags {UNIT_FL_NO_MOB} 
 
north to path2 descr "North along the path towards the Ridge"; 
south to forest1 descr "Into the Forest of Serenity"; 
east to field16 descr "Into the fields"; 
west to field7 descr "Into the fields"; 
 
end 
 
/* END PATH BEFORE FOREST */ 
 
/* BEGIN FIELDS IN FRONT OF FOREST - 18 rooms */ 
 
                                        field1 
names {"meadow"} 
title "A wild meadow in the Valley of Serenity" 
 
descr 
" This meadow is very beautiful, with many flowers and plants growing all over it. Clover, buttercups, dandelions and lots of grasses, mainly sedges. The plants and the grasses are all quite low to the ground, having been grazed by some type of large animal. This is further evidenced by the odd patch of dung. You can go westward along the Valley rim through the fields, south down into the Valley over the fields, or east to the path." 
 
extra {"path"} 
"The path, though dusty, is well marked and proceeds down south to meet the forest and northward to join the ridge." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
extra {"valley rim", "rim"} 
"The Valley Rim is North of here, keeping out the world. The only entrance to the valley was over the ridge east." 
 
movement SECT_FIELD 
 
west to field2 descr "West along the rim"; 
east to path1 descr "Path before the Ridge"; 
south to field6 descr "Down south over the fields"; 
 
end 
 
                                        field2 
names {"meadow"} 
title "A wild meadow at the Valley Rim" 
 
descr 
" The Meadow is almost alpine in nature and it reaches right up to the rim of the Valley. This truly is a playground for the deer that live in this region of the Valley. The fields continue east, south and west." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful 
and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
extra {"valley rim", "rim"} 
"The Valley Rim is North of here, keeping out the world. The only entrance to the valley was over the ridge eastwards." 
 
movement SECT_FIELD 
 
west to field3 descr "West along the rim"; 
east to field1 descr "East along the rim"; 
south to field5 descr "Down south over the fields"; 
 
end 
 
                                        field3 
names {"meadow"} 
title "The Northwest corner of the Valley" 
 
descr 
" You have reached the north western most point that you can get to in the Valley - your way west is blocked by the stream. It is quite wide here, almost three metres and not so fast flowing. The other side is mainly rocky and very steeply sloped. You can go south or east from here." 
 
extra {"stream"} 
"The stream is coming down into the Valley here, you can follow its course south from here." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
extra {"valley rim", "rim"} 
"The Valley Rim is north and west of here, keeping out the world. The only entrance to the valley was over the ridge of here east." 
 
movement SECT_FIELD 
 
east to field2 descr "East along the rim"; 
south to field4 descr "Down south over the fields"; 
 
end 
 
                                        field4 
names {"meadow"} 
title "The Western-most Field" 
 
descr 
" The Meadow is pretty bare here, as it follows the course of the stream southwards. The deer must graze this part a lot, or more than the others, because the grasses are very short. You can go south towards the Forest, or north and east." 
 
extra {"stream"} 
"The stream is coming down into the Valley here, you can follow its course south from here." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful 
and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
extra {"valley rim", "rim"} 
"The Valley Rim is north and west of here, keeping out the world. The only entrance to the valley was over the ridge east of here." 
 
movement SECT_FIELD 
 
north to field3 descr "North towards the Rim"; 
east to field5 descr "East through the fields"; 
south to field9 descr "Down south over the fields"; 
 
end 
 
                                        field5 
names {"meadow"} 
title "The Western Field" 
 
descr 
" The Land is pronouncibly sloped here, down south towards the Forest. The green meadow brightens your spirits with its plain and simple beauty. You can go north, south, east and west from here through the fields." 
 
extra {"stream"} 
"The stream is coming down into the Valley west of here." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful 
and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
extra {"valley rim", "rim"} 
"The Valley Rim is north and west of here, keeping out the world. The only entrance to the valley was over the ridge east of here." 
 
movement SECT_FIELD 
 
north to field2 descr "North towards the Rim"; 
west to field4 descr "West towards the stream"; 
east to field6 descr "East through the fields"; 
south to field8 descr "Down south over the fields"; 
 
end 
 
                                        field6 
names {"meadow"} 
title "West of the path" 
 
descr 
" You are close to the path here, as it goes north-south through the centre of the Valley. The fields flow away north, south and west. If you go east, you'll hit the path again. You can hear a sky lark far above, soaring through the sky singing its heart out in happiness." 
 
extra {"path"} 
"The path, though dusty, is well marked and proceeds down south to meet the forest and northward to join the ridge." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful 
and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
movement SECT_FIELD 
 
north to field1 descr "North towards the Rim"; 
west to field5 descr "West across the meadows"; 
east to path2 descr "East to the path"; 
south to field7 descr "Field outside the Forest"; 
 
end 
 
                                        field7 
names {"meadow"} 
title "Southwest of the path" 
 
descr 
" You are at the edge of the Forest. A dense wall of trees extends east-west to the south of you. The path is east of here, and the fields continue west and north. The Forest looks very impressive and imposing from this viewpoint. You can hear a skylark calling far up in the sky." 
 
extra {"path"} 
"The path, though dusty, is well marked and proceeds down south to meet the forest and northward to join the ridge." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
movement SECT_FIELD 
 
north to field6 descr "North through the fields"; 
west to field8 descr "West skirting the Forest"; 
east to path3 descr "East to the path"; 
 
end 
 
                                        field8 
names {"meadow"} 
title "Skirting the Northwest of the Forest" 
 
descr 
" The Wall that is the Forest continues west and east from here, the fields flowing right up to meet the eaves of the Forest. From here, you can go north across the meadows, west to the Stream and east along the Forest edge." 
 
extra {"stream"} 
"The stream is coming down into the Valley west of here." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful 
and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
movement SECT_FIELD 
 
north to field5 descr "North through the fields"; 
west to field9 descr "West towards the Stream"; 
east to field7 descr "Skirting the Forest"; 
 
end 
 
                                        field9 
names {"meadow"} 
title "The South-western-most Field" 
 
descr 
" You are at the corner in the Meadows created by the stream to your west and the Forest rim to the South. The fields extend to the North and eastwards. This area is much more quiet than the others in the meadows. The stream is narrowing here as it plunges into the darkness beyong the rim of the forest." 
 
extra {"stream"} 
"The stream enters the Forest here, and narrows as it does so." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful 
and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
extra {"valley rim", "rim"} 
"The Valley Rim is north and west of here, keeping out the world. The only entrance to the valley was over the ridge east of here." 
 
movement SECT_FIELD 
 
north to field4 descr "North along the stream"; 
east to field8 descr "East skirting the Forest"; 
 
end 
 
                                        field10 
names {"meadow"} 
title "A wild meadow in the Valley of Serenity" 
 
descr 
" You are standing at the edge of a beautiful meadow. It is carpeted with beautiful flowers and other plants. You can see many kinds of clover, buttercups, dandelions and lots of grasses, mainly sedges. The grasses are all low growing, and some are quite wirey underfoot. You can go eastward along the Valley rim through the fields, south down into the Valley over the fields, or west to the path." 
 
 
extra {"path"} 
"The path, though dusty, is well marked and proceeds down south to meet the forest and northward to join the ridge." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful 
and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
extra {"valley rim", "rim"} 
"The Valley Rim is North of here, keeping out the world. The only entrance to the valley was over the ridge west of here." 
 
movement SECT_FIELD 
 
east to field11 descr "East along the rim"; 
west to path1 descr "Path before the Ridge"; 
south to field15 descr "Down south over the fields"; 
 
end 
 
                                        field11 
names {"meadow"} 
title "A wild meadow at the Valley Rim" 
 
descr 
" You can smell the pure air as the land breathes beneath you. There are scrapings in the ground here, probably the places where the deer lay down at night. These make the ground a little harder to cross, so you have to take care. The fields continue west, south and east." 
 
extra {"scrapings", "scraping"} 
"The grass has been scraped away to make a dip in the ground where the deer sleep and rest at night or when they're tired." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful 
and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
extra {"valley rim", "rim"} 
"The Valley Rim is North of here, keeping out the world. The only entrance to the valley was over the ridge west of here." 
 
movement SECT_FIELD 
 
west to field10 descr "West along the rim"; 
east to field12 descr "East along the rim"; 
south to field14 descr "Down south over the fields"; 
 
end 
 
                                        field12 
names {"meadow"} 
title "Northeast corner of the Valley" 
 
descr 
" You have reached the northeastern most area of the Valley. The Rim of the Valley is right north of you, and the Valley rises steeply to the east. There is a lot of debris from the side of the Valley here, it is quite sheer. You can go south from here or west." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
extra {"valley rim", "rim"} 
"The Valley Rim is North of here, keeping out the world. The only entrance to the valley was over the ridge west of here." 
 
movement SECT_FIELD 
 
west to field11 descr "West along the rim"; 
south to field13 descr "Down south over the fields"; 
 
end 
 
                                        field13 
names {"meadow"} 
title "Eastern-most field of the Valley" 
 
descr 
" The Meadow follows the eastern edge of the Valley south here. The field is rather overgrown, and this continues to the South. The deer seem to concentrate their grazing elsewhere. You can go north to the Rim, south to the forest edge, and west into the meadow." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
extra {"valley rim", "rim", "valley edge", "edge"} 
"The Valley Rim is East of here." 
 
movement SECT_FIELD 
 
west to field14 descr "West into the Meadow"; 
south to field18 descr "Down south to the forest edge"; 
north to field12 descr "North-eastern Meadow"; 
 
end 
 
                                        field14 
names {"meadow"} 
title "The Eastern Field" 
 
descr 
" The land is quite slippery here and there is a pronounced slope heading down south. It would be wise not to lose your footing here. The smell of the grass and the flowers brightens your spirits as you walk. You can go north, south, east and west from here through the fields." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
extra {"valley rim", "rim"} 
"The Valley Rim is north and east of here, keeping out the world. The only entrance to the valley was over the ridge east of here." 
 
movement SECT_FIELD 
 
north to field11 descr "North towards the Rim"; 
west to field15 descr "West towards the path"; 
east to field13 descr "East through the fields"; 
south to field17 descr "Down south over the fields"; 
 
end 
 
                                        field15 
names {"meadow"} 
title "East of the path" 
 
descr 
" The path goes north-south to your west through the centre of the Valley. The fields flow away north, south and east. If you go west, you'll hit the path again. You can still hear a skylark away in the distance westwards." 
 
extra {"path"} 
"The path, though dusty, is well marked and proceeds down south to meet the forest and northward to join the ridge." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
movement SECT_FIELD 
 
north to field10 descr "North towards the Rim"; 
west to path2 descr "West to the path"; 
east to field14 descr "West across the meadow"; 
south to field16 descr "A field outside the Forest"; 
 
end 
 
                                        field16 
names {"meadow"} 
title "South-east of the path" 
 
descr 
" You are at the eaves of the Forest. The trees along the Forest edge here are mainly beeches. The path is west of here, and the fields continue east along the Forest and north. The Forest looks very impressive and imposing from this viewpoint. There is the faint sound of birdsong coming from the Forest." 
 
extra {"path"} 
"The path, though dusty, is well marked and proceeds down south to meet the forest and northward to join the ridge." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
movement SECT_FIELD 
 
north to field15 descr "North through the fields"; 
west to path3 descr "West to the path"; 
east to field17 descr "East along the Forest edge"; 
 
end 
 
                                        field17 
names {"meadow"} 
title "Skirting the Northeast of the Forest" 
 
descr 
" The Forest continues west and east to the south of you. The beeches are gradually melting into a sea of Oaks. From here, you can go north across the meadows, east to the Eastern rim of the Valley and west along the Forest edge." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful 
and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
extra {"valley rim", "eastern rim", "rim"} 
"The Eastern edge of the Valley is marked by a steep slope upwards, and the meadow ends there." 
 
movement SECT_FIELD 
 
north to field14 descr "North through the fields"; 
west to field16 descr "West towards the path"; 
east to field18 descr "South-eastern corner of the fields"; 
 
end 
 
                                      field18 
names {"meadow corner"} 
title "The South-eastern corner of the fields" 
 
descr 
" This is the south-eastern corner of the fields. The corner is created by the eastern valley rim joining the Forest edge. Your only course from here is north along the rim, or west along the Forest edge towards the path again." 
 
extra {"grasses", "flowers", "grass", "flower", "clover", "buttercups", "dandelions", "sedges"} 
"There are many varieties of flowering plant here, all of which are small and a lot of which are very colourful 
and pleasing to the eye. What ever animals graze here seem to be merciful to the small flowers so the fields retain their beauty." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves"} 
"As you get closer to the ancient forest, its true splendour and majesty become apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"dung", "droppings", "dropping"} 
"There is a lot of what appears to be deer dung around these fields. Deer must graze in this Valley." 
 
extra {"valley rim", "eastern rim", "rim"} 
"The Eastern edge of the Valley is marked by a steep slope upwards, and the meadow ends there." 
 
movement SECT_FIELD 
 
north to field13 descr "North along the Rim"; 
west to field17 descr "West towards the path"; 
 
end 
 
/* END FIELDS IN FRONT OF FOREST */ 
 
/* BEGIN FOREST - 38 rooms */ 
 
 
                                        forest1 
names {"inside the forest"} 
title "Inside the Forest of Serenity" 
 
descr 
" You are now just inside the Forest, along the avenue which you saw from the outside. This path is around three metres wide and the trees to either side have branches which form a continuous arch over you as far as you can see along the path. The light here is equivalent to that at twilight on a summer's day, punctuated occasionally by a ray of sunshine, dappled with the shadows of leaves as they move in the breeze that plays with the tree canopy far above. The air seems to move with the breath of living beings, as if the trees themselves exude life into the air around them. This is a good place, where no one should fear, save those who have evil intentions. To the North the path leads out of the forest to the boulder. The avenue continues south through the forest if you care to follow it." 
 
extra {"path"} 
"The path runs through the forest, almost completely straight, but it's hard to tell because of the uniformity of the arch of branches." 
 
extra {"eaves of the forest", "edge of forest", "forest edge", "forest", "eaves", "oaks", "trees", "elms", "ashes", "beeches", "evergreens"} 
"The true splendour and majesty of the Forest is now apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"avenue"} 
"This natural road through the forest continues into the distance. Every once and a while a bird or small animal appears in it, and then scurries or flies off as you approach." 
 
extra {"leaves", "branches"} 
"The emerald leaves catch the sunlight every once and a while. Their simple beauty and perfection is something to wonder at. The branches of the trees are mainly high up and those near the road span it in a natural arch, giving shade to the avenue." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 
dilcopy dream2@seren();

north to path3 descr "Just outside the Forest"; 
south to forest2 descr "Further into the Forest"; 
 
end 
 
 
                                        forest2 
names {"deep in the forest"} 
title "Deep in the Forest" 
 
descr 
" You are now deep in the Forest. The Sunlight which penetrates the canopy is all that lights the avenue, which continues south. To the West and to the East are smaller ways through the trees. Both look less travelled than the main road. To the North, the Opening is visible in the distance." 
 
extra {"path", "avenue", "main road", "road"} 
"The avenue continues south and north from here." 
 
extra {"trees", "tree"} 
"The true splendour and majesty of the Forest is now apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"opening"} 
"To the North, you can see the entrance to the forest. It is like a portal of light into another world." 
 
extra {"canopy", "leaves", "branches"} 
"The emerald leaves catch the sunlight every once and a while. Their simple beauty and perfection is something to wonder at. The branches of the trees are mainly high up and those near the road span it in a natural arch, giving shade to the avenue." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
north to forest1 descr "Inside the Forest"; 
west to forest3 descr "A path through the forest"; 
east to forest6 descr "A shady path in the forest"; 
south to forest12 descr "Further into the Forest"; 
 
end  
 
                                        forest3 
names {"northern part of the forest"} 
title "Path in the Forest of Serenity" 
 
descr 
" The Birdsong here is slightly muffled. The air is much more still, as if this part of the Forest is sleeping gently and the birds are trying not to wake it. The Age of the trees impresses itself upon you, some south of the path having great wide trunks, wrinkled like a giants skin. Still the feeling of goodness, and of wholesomeness courses through the air. The path goes west and east." 
 
extra {"path", "road"} 
"The path runs east-west through this part of the Forest." 
 
extra {"trees", "tree"} 
"These trees are very old, the wrinkles in the bark and the width of the trunks give you some indication of this." 
 
extra {"wrinkles", "wrinkle"} 
"The great wrinkles in the trees to the south indicate that they are older and have endured more of the World's punishment than those to the North." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();

west to forest4 descr "A path further through the forest"; 
east to forest2 descr "A wider road through the forest"; 
 
end 
 
                                        forest4 
names {"northern part of the forest"} 
title "Path in the Forest of Serenity" 
 
descr 
" The path has widened somewhat and there is a three-way junction here. A little sunlight shines down from above and lights the way a little better than before. The leaves cast shadows that move in time to the breeze above the canopy. You can go west from here, east, or south to a clearing." 
 
extra {"path", "road"} 
"The path goes west, south and east from this part of the Forest." 
 
extra {"trees", "tree"} 
"These trees are very old, the majesty of their trunks and branches give you some indication of this." 
 
extra {"bushes", "bush"} 
"These bushes are low growing brambles. They appear to be thornless, but are without at fruit at this time of the year." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
west to forest5 descr "At the Northwest edge of the Forest"; 
east to forest3 descr "A path east into the Forest"; 
south to forest10 descr "South into the Forest"; 
 
end 
 
                                        forest5 
names {"north-west part of the forest"} 
title "North western edge of  the Forest of Serenity" 
 
descr 
" You have reached the Northwest part of the Forest of Serenity. Here the stream flows in and is somewhat smaller than you imagined, though it is very fast flowing. There are some willows growing along the stream. It is barely a metre wide, but seems somewhat sunken and it actually seems to go underground not far into the trees, though it's hard to see that far in this light. You can step over it and go south, or head east." 
 
extra {"path", "road"} 
"The path goes south and east from this part of the Forest." 
 
extra {"trees", "tree", "willows", "willow"} 
"These trees are very old, the majesty of their trunks and branches give you some indication of this. There are some willows growing by the stream." 
 
extra {"stream", "water"} 
"This is the stream you saw from the Ridge outside the Forest. It seems somewhat smaller than you imagined, but fast-flowing. It appears to go underground not far into the trees." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
east to forest4 descr "A path east into the Forest"; 
south to forest9 descr "Hop over the stream and go south along the western edge"; 
 
end 
 
                                        forest6 
names {"northern part of the forest"} 
title "Path in the Forest of Serenity" 
 
descr 
" You can hear the birds singing rather lively in the branches above you. The air is much more vigorous and the birds are trying to take part in the celebration of life. You can see from the trees that indeed, they are young, and are mainly young beeches, maybe 50 years old. This part of the Forest is out of keeping with the Rest. Perhaps someone is trying to help the Forest grow by planting these trees? The path continues east and also west to a wider road." 
 
extra {"path", "road"} 
"The path runs east-west through this part of the Forest." 
 
extra {"trees", "tree", "beeches", "beech"} 
"These trees are very young in comparison to the rest of the Forest. They seem to have been planted within the last 50 years." 
 
movement SECT_FIELD 

dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
west to forest2 descr "A wider road through the forest"; 
east to forest7 descr "A path further east through the forest"; 
 
end 
 
                                        forest7 
names {"northern part of the forest"} 
title "A wide path in the Forest of Serenity" 
 
descr 
" The trees either side of the road have given way to the sunlight in great patches. It dazzles you slightly as the light reflects off the dry path. The trees here are beeches too, but they are ancient in comparison to those west of here. This is the old forest again. The path leads east and west." 
 
extra {"path", "road", "patches", "patch"} 
"The path runs east-west through this part of the Forest. Great patches of sunlight beam down through the canopy to the path around you." 
 
extra {"trees", "tree", "beeches", "beech"} 
"These trees are much older in comparison to the ones you encountered west of here. No mortal hand planted these trees. They reach skyward as only beeches can, tall and proud." 
 
movement SECT_FIELD 

dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();

 
west to forest6 descr "Path in the Forest of Serenity"; 
east to forest8 descr "The north eastern edge of the Forest"; 
 
end 
 
                                        forest8 
names {"north eastern part of the forest"} 
title "North eastern part of the Forest of Serenity" 
 
descr 
" A wall of trees blocks the way eastward from here, but the path turns south and also west. The trees off to the east are immense. They seem to be mainly oaks, but you can see some elms in amongst these. The forest floor isn't really visible to the east, and the trees block out most of the sunlight." 
 
extra {"path", "road"} 
"The path bends from the west to the south through this part of the Forest." 
 
extra {"trees", "tree", "oaks", "oak", "elms", "elm"} 
"These trees are much older in comparison to the ones you encountered west of here. No mortal hand planted these trees. They reach skyward as only beeches can, tall and proud." 
 
extra {"forest floor", "floor"} 
"You can barely see the forest floor east of here amongst the old trees, it is so dark in there." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
west to forest7 descr "Path in the Forest of Serenity"; 
south to forest14 descr "Further south in the Forest of Serenity"; 
 
end 
 
                                        forest9 
names {"western part of the forest"} 
title "Western part of the Forest of Serenity" 
 
descr 
" The tree-line seems to stretch almost straight south from here and in the far distance, is well light. You can smell the wet earth from the underground stream away to the east in the undergrowth. The soil and the path underfoot is quite soft and flexible, probably due to the moisture from the stream. From here, you can go east, south and north." 
 
extra {"path", "road"} 
"The path forms a junction here which leads north, south and east." 
 
extra {"trees", "tree", "oaks", "oak", "elms", "elm"} 
"These trees are quite old in this area of the forest. They stretch off to the west, but are so close together that you can't move west through them." 
 
extra {"soil", "ground"} 
"The soil is very moist here. It's almost muddy." 
 
movement SECT_SWAMP 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
east to forest10 descr "Deeper into the Forest"; 
north to forest5 descr "The North western edge of the Forest"; 
south to forest15 descr "South through the Forest"; 
 
end 
 
                                        forest10 
names {"main forest"} 
title "A clearing deep in the Forest of Serenity" 
 
descr 
" You have entered a wide clearing deep in the Forest of Serenity. The Birdsong is louder than ever, though intermittent. The sun streams down from the sky which can be seen from the centre of the clearing. The ground is extremely moist and wet in this clearing. The underground stream must be causing this. In the centre of the Clearing where the sunlight reaches the ground, the ground is drier, probably because of the heat from the sunlight. There are four exits, north, south, east and west from this clearing." 
 
extra {"path", "road"} 
"The path forms a wide clearing here which leads north, south, east and west." 
 
extra {"trees", "tree", "oaks", "oak", "elms", "elm"} 
"These trees are quite old in this area of the forest. The leaves are greener too, the wet earth seems to help their vitality." 
 
extra {"soil", "ground" } 
"The soil is wet here. It's almost muddy." 
 
extra {"sky"} 
"The sky is relatively cloudless, the sun beaming down in all its glory." 
 
movement SECT_SWAMP 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
east to forest11 descr "Close to the centre of the Forest"; 
north to forest4 descr "The northern edge of the Forest"; 
south to forest17 descr "South through the Forest"; 
west to forest9 descr "West to the western edge of the Forest"; 
end 
 
                                        forest11 
names {"main forest"} 
title "Narrow path in the Forest" 
 
descr 
" The path narrows somewhat in this area. There is an immense oak to the north which seems to have been planted in such a way so as to force anyone who cares to venture through here to go around it. The darkness is spooky, yet the feeling of goodness is unwavering. There is no reason to fear. The path goes west and east from here." 
 
extra {"path", "road"} 
"The path narrows here and leads east-west." 
 
extra {"trees", "tree", "oaks", "oak", "elms", "elm"} 
"There is an immense oak here. Obviously older than anything around it. The rest of the trees are of mixed species, yet they still exude that feeling of pride and goodness even though they are old beyond reckoning." 
 
extra {"soil", "ground"} 
"The ground is dry here, though to the West it seems to moisten." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
east to forest12 descr "The Central Avenue through the Forest"; 
west to forest10 descr "West to the western edge of the Forest"; 
end 
 
                                        forest12 
names {"central avenue"} 
title "Further along the Central Avenue deep in the Forest" 
 
descr 
" From where you stand, you can see a bend in this central avenue through the forest. The entrance to the Forest is no longer visible to the North because the Avenue has bent  slowly around to the east, and the bend up south of here turns sharply in that direction. There are exits north, south, east and west." 
 
extra {"path", "avenue", "main road", "road"} 
"The avenue continues south and north from here." 
 
extra {"trees", "tree"} 
"The true splendour and majesty of the Forest is now apparent. It is truly magnificent, seemingly untouched by mortal hand - the avenue looks completely natural. This could be the last remnant of the great forest that once covered the World in days of yore." 
 
extra {"canopy", "leaves", "branches"} 
"The emerald leaves catch the sunlight every once and a while. Their simple beauty and perfection is something to wonder at. The branches of the trees are mainly high up and those near the road span it in a natural arch, giving shade to the avenue." 
 
extra {"bend"} 
"The bend south of here goes eastward and blocks the view further south." 
 
movement SECT_FIELD 

dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
north to forest2 descr "Inside the Forest"; 
west to forest11 descr "A path through the forest"; 
east to forest13 descr "A shady dead end in the forest."; 
south to forest19 descr "A bend in the Forest"; 
 
end 
 
 
                                        forest13 
names {"clearing"} 
title "A Dead end in the Forest" 
 
descr 
" You are now standing in a clearing just off the Main avenue through the Forest. It looks like some being has piled some dead wood against the tree wall to the east of the Clearing and burnt some of it in the middle. The remains of a large fire can be seen. Fire moss and other low growing vegetation have grown in the remains of the fire. This seems to suggest that the fire was many months ago, perhaps a year or two. In either case, the trees have let this clearing remain. The only exit is west." 
 
extra {"trees", "tree"} 
"The trees grow in a circle around the clearing where the fire once was." 
 
extra {"dead wood pile", "pile", "dead wood", "wood"} 
"The wood is rotting and full of insects. It has obviously been here for a long time." 
 
extra {"remains"} 
"The ground is charred where once there was a fire." 
 
extra {"fire moss", "plants", "vegetation"} 
"Fire moss and other plants have grown over the ground where the fire was." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
west to forest12 descr "Avenue through the forest"; 
 
end 
 
 
                                        forest14 
names {"corridor"} 
title "A Corridor through the trees" 
 
descr 
" You are now standing in a corridor through the trees, leading north-south. There is little room to manoeuvre because the path as narrowed a lot. The trees to the east have thinned slightly and you can see that the Land is stepped away eastward. The Valley must climb slightly in that direction. You can go north or south from here." 
 
extra {"trees", "tree"} 
"The trees have narrowed the path here. You wouldn't like to be caught in a fight here." 
 
extra {"path", "road"} 
"The path is very narrow here and leads north-south in a corridor through the Forest." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
north to forest8 descr "A bend in the Forest"; 
south to forest23 descr "Very deep in the Forest"; 
 
end 
 
                                        forest15 
names {"west forest"} 
title "The West part of the Forest of Serenity" 
 
descr 
" You are on a path that leads north-south along the western side of the Forest. You are not quite sure how close to the Edge you are, but from the bearings you got before entering the Forest, it seems it could be only a few hundred metres west of you at most. To the South, the path slopes down towards a distant point of light which is barely visible from here. You can go North to a damp area of Forest." 
 
extra {"path", "road"} 
"The path slopes downward from here to the South." 
 
extra {"trees", "tree", "oaks", "oak", "elms", "elm"} 
"The trees here are rather uniform, but those on the west seem to be mainly Ash and to the west, Evergreen." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
north to forest9 descr "A damp place in the Forest"; 
south to forest28 descr "The sloping path south";  
 
end 
 
 
                                        forest16 
names {"large clearing"} 
title "A Large Clearing in the Forest of Serenity" 
 
descr 
" This is a very large clearing. The trees have either been cut, or have just grown, very far back and left this open space. There is a great Stone Tower standing at the western edge of the Clearing. There is a brilliant red light visible from the second story window of the tower. It is made from a black crystal-like substance. There are no cracks in the Tower, but it appears to be ancient indeed, almost as old as the Forest itself. The only entrance to the tower is straight in front of you and to your surprise, wide open. It does not appear to be guarded in any way." 
 
extra {"path", "road"} 
"The path slopes downward from here to the South." 
 
extra {"trees", "tree", "oaks", "oak", "elms", "elm"} 
"The trees here are growing in a circle around the tower, giving it a wide berth." 
 
extra {"tower"} 
"The tower isn't very tall, but it is very imposing. It seems to have been sculpted from one large piece of black crystal and then placed here by the gods. The only entrance can be seen in front of you, wide open to the world. Inside is black as night, but you can see one opening on what looks like a second floor. A read light emanates from some source inside this opening. The only way out of the Clearing is east. The entrance to the tower does not look inviting, but nothing seems to be stopping you from entering it." 
 
extra {"entrance"} 
"The Entrance is dark and uninviting, almost ominous. Dare you enter?" 
 
movement SECT_FIELD 
 
flags {UNIT_FL_NO_MOB} 

dilcopy drag_block@seren(); 
 
dilcopy no_passage@seren(); 

dilcopy leaving_block@seren();

east to forest17 descr "The Forest of Serenity"; 
 
west to tower1 descr "Enter the Tower"; 
 
/* west to tower1 descr "Into the Tower"; */ 
 
end 
 
                                        forest17 
names {"near heart"} 
title "Near the Heart of the Forest of Serenity" 
 
descr 
" The path here is overgrown with some kind of creeping clover, but it has dark leaves and no flowers. This place is much darker than the rest of the Forest. It seems even a place of overwhelming good is never completely perfect. The path turns east, then west here, or you can go north." 
 
extra {"path", "road"} 
"The path splits east, then west in this part of the Forest and continues north too. It is rather overgrown here." 
 
extra {"trees", "tree", "oaks", "oak", "elms", "elm"} 
"The trees here seem darker of nature, but not evil. They are covered in some form of ivy which scars their wood." 
 
extra {"clover"} 
"A dark clover snakes its way around the path here, leaving it awkward to walk upon. You have to be careful not to trip." 
 
extra {"ivy"} 
"This dark ivy seems to choke the trees, and scar their trunks." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
north to forest10 descr "A damp place in the Forest"; 
west to forest16 descr "A large clearing"; 
east to forest18 descr "The Heart of the Forest of Serenity"; 
 
end 
 
 
                                        forest18 
names {"forest heart"} 
title "The Heart of the Forest" 
 
descr 
" You have entered an area of the Forest which seems to breathe with goodness. To the Evil this would be sickening, to the Good, it is soothing. The trees here are the oldest you have seen yet in the Forest. This place is truly serene. There is a tree growing in the path, and the path splits around it. This tree is immense and must be many millennia in age. You can't quite identify the species, but it seems to be some kind of Ash, perhaps the last of its race. Everything seems to converge on this tree, as if it's the heart and mind of the Forest. From here you can go east and west." 
 
extra {"path", "road"} 
"The path splits around the tree and goes east and west." 
 
extra {"trees", "tree", "oaks", "oak", "elms", "elm"} 
"This tree is the Heart of Serenity, the Heart of the Forest. It is Oldest of the Old." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
west to forest17 descr "An overgrown path"; 
east to forest21 descr "The Avenue through the Forest"; 
 
end 
 
                                        forest19 
names {"north bend"} 
title "A bend in the path" 
 
descr 
" Here the path bends sharply to the east if you're coming from the North. The trees at the Southern wall of the bend are mainly evergreens, some are larch, others pines. Perhaps they won't let the road proceed southwards. You can follow the bend to the east, or go north through the Forest." 
 
extra {"path", "road"} 
"The path bends here sharply here and narrows slightly." 
 
extra {"trees", "tree", "oaks", "evergreens", "evergreen", "larch", "pines"} 
"The evergreens are grouped together here, apart from the deciduous trees that dominate the Forest." 
 
movement SECT_FIELD 

dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
north to forest12 descr "The central path"; 
east to forest20 descr "The Forest bends again to its north-south path"; 
 
end 
 
                                        forest20 
names {"south bend"} 
title "Another bend in the path" 
 
descr 
" The path bends south again here. The path is also more narrow. Far off to the South you can see the Forest thin slightly. You are very deep in the Forest now. The trees are ancient. You feel the life within them, as if they are watching you with unseen eyes, but they seem to bear you no malevolence. The path leads south from here and west to another bend in the path." 
 
extra {"path", "road"} 
"The path bends here sharply here and narrows slightly to the South." 
 
extra {"trees", "tree", "oaks", "evergreens", "evergreen", "larch", "pines", "ashes"} 
"The trees are wondrous to behold. Life exudes from them, as does the majesty of age." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
west to forest19 descr "Another bend in the path"; 
south to forest21 descr "South to where the Forest starts to thin"; 
 
end 
 
                                        forest21 
names {"deep forest"} 
title "Deep in the Forest" 
 
descr 
" You are at a junction in the Forest. The trees suddenly thin out and end to the South. What appears to be an immense clearing is south from here. You can see what appears to be a fortified temple off to the distance in the South in the Clearing. West from you, a narrow path proceeds into the Heart of the Forest, east from here, the path proceeds through the Deep Forest, and northwards, the forest seems to bend off to the West." 
 
extra {"path", "road"} 
"The path continues north, south and west from here." 
 
extra {"trees", "tree", "evergreens", "evergreen", "larch", "pines", "ashes", "oaks"} 
"The trees are wondrous to behold. Life exudes from them, as does the majesty of age." 
 
extra {"clearing"} 
"This clearing seems to be a natural clear space in the centre of the Forest. There is what looks like a fortified building, perhaps a temple, away south in that Clearing." 
 
extra {"temple", "building"} 
"It seems to be a temple in nature, but it is to far off to tell for sure from here." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
west to forest18 descr "The Heart of the Forest"; 
north to forest20 descr "A bend in the Forest"; 
east to forest22 descr "Deep in the Forest"; 
south to forest32 descr "South to a large clearing";  
 
end 
 
                                        forest22 
names {"deep forest"} 
title "Deep in the Forest" 
 
descr 
" The path has led you to a part of the Deep Forest where no birdsong can be heard. All is quiet, peaceful and the Serenity is almost palpable. It is quite dark here, which only adds to the stillness. You can go west to the main north-south path through the Forest, or east to what appears to be a junction of sorts. " 
 
extra {"path", "road"} 
"The path continues east and west from here." 
 
extra {"trees", "tree",  "evergreens", "evergreen", "larch", "pines", "ashes", "oaks"} 
"The trees are wondrous to behold. Life exudes from them, as does the majesty of age." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
west to forest21 descr "The Main path through the Forest"; 
east to forest23 descr "Deep in the Forest"; 
 
end 
 
                                        forest23 
names {"deep forest"} 
title "Joining of the ways deep in the Forest" 
 
descr 
" The path widens out again here, and three different paths converge, one from the North, another from the West and yet another from the East. The birds are more attentive to their eternal task of enlivening the Forest air. The lilt of thrushes fills the air. This seems to continue to the East, as if there is something magical that way. North, the path passes by the Steppes of trees up the Northeast end of the Valley. To the West, the path narrows again." 
 
extra {"path", "road"} 
"The path leads north, east and west from here." 
 
extra {"trees", "tree",  "evergreens", "evergreen", "larch", "pines", "ashes", "oaks"} 
"The trees are wondrous to behold. Life exudes from them, as does the majesty of age." 
 
extra {"steppes", "steppe"} 
"The Steppes of the Northeast end of the Valley can be seen in the way the trees grow." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
west to forest22 descr "The path narrows in that direction"; 
north to forest14 descr "North through the Deep Forest"; 
east to forest24 descr "East further into the Eastern Forest"; 
 
end 
 
 
                                        forest24 
names {"ringdie", "eerie forest"} 
title "Eerie part of the Deep Forest" 
 
descr 
" This part of the Forest is very different from the rest. You can't quite understand the feeling, it just seems alien to you, and out of place with the rest of the Forest. Clearly some powerful being has sway on this part of the Forest, and his influence has changed even the trees. The feeling of goodness is as intense as before, but honed, as if the trees here are a step above the others that grow elsewhere. There is a light mist rising from the earth between the trees and this seems to be moving like some kind of creature. From here, you can go west, east and south." 
 
extra {"path", "road"} 
"The path leads east, south  and west from here." 
 
extra {"trees", "tree",  "evergreens", "evergreen", "larch", "pines", "ashes", " 
oaks"} 
"The trees here give the place an eerie feeling. They are as old as their ocunterparts elsewhere in the Forest, but they seem to be more aware of you than those you have already encountered." 
 
extra {"mist"} 
" A light mist is coming from the damp earth among the trees. It seems to course with vitality, everything seems to be alive here." 
 
movement SECT_FIELD 
 
flags {UNIT_FL_NO_MOB} 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
west to forest23 descr "Deep in Serenity Forest"; 
south to forest27 descr "A strange clearing deep in the Forest";  
east to forest25 descr "The Eastern edge of Serenity Forest"; 
 
end 
 
                                        forest25 
names {"east forest"} 
title "Eastern part of the Forest of Serenity" 
 
descr 
" You are close to the eastern side of the Valley here. The Ground to the east slopes steadily upwards, but is still covered with trees. From what you can see of the Valley side, the trees seem to stop growing a view hundred metres east of here. North from here, a small clearing can be seen with what look like statues in the middle of it. To the West, the eerie feeling increases." 
 
extra {"path", "road"} 
"The path leads west and north from here." 
 
extra {"trees", "tree",  "evergreens", "evergreen", "larch", "pines", "ashes", " 
oaks"} 
"The trees here give the place an eerie feeling. They are as old as their ocunte 
rparts elsewhere in the Forest, but they seem to be more aware of you than those 
 you have already encountered." 
 
extra {"valley side"} 
" You have reached the eastern borders of the Forest of Serenity. The Valley side rises up to the east." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
north to forest26 descr "Monument clearing"; 
west to forest24 descr "A strange path deep in the Forest"; 
 
end 
 
                                        forest26 
names {"monument clearing"} 
title "Monument Clearing" 
 
descr 
" You are now at a dead end in the eastern part of the Forest of Serenity. This clearing looks like it was cleared by hand, a long, long time ago. It has an almost tangible sense of power and magic pervading it. There is a flattened area at the centre of the clearing which has what looks like a monument to the history of the Valley. There are three statues and, in front of them, a plaque of black crystal, engraved with gold set in the ground before you. The statues look untouched by time, as does the plaque. You can only leave the clearing by going south from here."

extra {"path", "road"} 
"The path leads south from here." 
 
extra {"trees", "tree",  "evergreens", "evergreen", "larch", "pines", "ashes", " 
oaks"} 
"The trees here give the place an eerie feeling. They are as old as their ocunte 
rparts elsewhere in the Forest, but they seem to be more aware of you than those 
 you have already encountered." 

extra {"plaque"} 
"&lThe inscription says: 
 
       'May the World never forget our struggle and the Evil we  
        banished from this place. And let the Lake of Remembrance  
        be the only monument and warning to the Evil ones who  
        betrayed us.' 
                
                      - Roantilis, Prince of Elfdom" 
 
flags {UNIT_FL_NO_TELEPORT}
 
movement SECT_FIELD 
 
south to forest25 descr "A strange clearing deep in the Forest"; 
 
end 
 
 
                                        forest27 
names {"zoat clearing"} 
title "The Clearing of the Zoat" 
 
descr 
" You have entered a lush, well tended area of forest. There is a small open space ahead of you, and a great feeling of untold power here. This appears to be the lair, or should that be home, of a great creature. Everything here, the trees, the ground, the birds, demand respect and you know that they are aware of your intrusion. The great creature must imbue them with his sentience. Your instinct tells you to run from here, but the warrior within you insists that you stay and meet whatever creature rules this domain. Seven large slabs stand in a circle at the centre of the clearing. The only exit is north." 
 
extra {"stone circle", "circle", "slabs", "slab"} 
" The stones are all around two and a half metres tall. All seven form a circle, each stone set 2 metres apart, all facing inwards. The ground is bare in the centre and looks scorched, as if burnt by some magical ritual." 
 
extra {"trees", "tree",  "evergreens", "evergreen", "larch", "pines", "ashes", " 
oaks"} 
"The trees here give the place an eerie feeling. They are as old as their ocunterparts elsewhere in the Forest, but they seem to be more aware of you than those you have already encountered." 
 
flags {UNIT_FL_NO_TELEPORT} 
 
movement SECT_FIELD 
 
ALWAYS_LIGHT 
 
north to forest24 descr "A strange path in the Forest"; 
 
end 
 
                                        forest28 
names {"west forest"} 
title "The West part of the Forest of Serenity" 
 
descr 
" You are further along a path that leads north-south along the western side of the Forest. You can see the Valley begin to slope upwards to your west, but the path south continues to slope downhill. Away off in the distance to the South, you can see a point of light, obviously a clearing, or a way into the Open. The only problem is that you know the Lake of Remembrance is also to the South and from what you know of that place, it would probably be best to avoid it. The path also is north." 
 
extra {"path", "road"} 
"The path slopes downward from here to the South." 
 
extra {"trees", "tree", "oaks", "oak", "elms", "elm"} 
"The trees here are rather uniform, but those on the west seem to be mainly Ash 
and to the west, Evergreen." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 
 
north to forest15 descr "Along the western path"; 
south to forest29 descr "Further south on the western path"; 
 
end 
 
                                        forest29 
names {"west path"} 
title "The Southwest part of the Forest" 
 
descr 
" The path has finally begun to bottom out. The opening in the Forest is more readily seen from here. It bears that faint mist that could only be the Lake of Remembrance. The Forest ends abruptly not far south of here, but the path continues in that direction out into the distance. You can go north if you like and the Forest does seem more inviting in that direction." 
 
extra {"path", "road"} 
"The path slopes continues southward towards the end of the Forest." 
 
extra {"trees", "tree", "oaks", "oak", "elms", "elm"} 
"The trees here are rather uniform, but those on the west seem to be mainly Ash 
and to the west, Evergreen." 
 
movement SECT_FIELD 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
north to forest28 descr "Along the western path"; 
south to forest30 descr "Further south through the Forest"; 
 
end 
 
 
                                        forest30 
names {"forest end"} 
title "The End of the Forest" 
 
descr 
" You have reached the end of the Forest. The trees finish just ahead of you and you can see the edge of the Lake of Remembrance clearly, but rising from the waters of the lake is a dense fog clouding your view any further than the water's edge. The Forest guards the northlands from the evil that dwells in, at and around the Lake. You know from the elven histories that the Lake is all that was left of the Darkelf city and surrounding lands after the good elves cast down Altur and purged the land of his influence. They flooded the southern part of the Valley where the Darkelves dwelt. You can venture out on the lake if you have a boat by going south and leaving the Forest, however, the path north is far more inviting." 
 
extra {"path", "road"} 
"The Forest path ends here, and the Lake of Remembrance opens out in front of you." 
 
extra {"trees", "tree", "oaks", "oak", "elms", "elm"} 
"The trees come to an end here. Almost all of the trees here are some species of Ash. They guard the southern frontier of the Forest." 
 
extra {"lake"} 
"The Lake is thoroughly uninviting. Evil lurks out there, and only the foolhardy would seek it." 
 
movement SECT_FIELD 
 
flags {UNIT_FL_NO_MOB} 
 
dilcopy forest_bird_an@seren(); 

dilcopy dream2@seren();
 
north to forest29 descr "Along the western path into the Forest"; 
south to lake1 descr "Out on to the Lake of Remembrance";  
 
end 
 
                                        forest31 
names {"outside wall"} 
title "North West of the Temple walls" 
 
descr 
" You are now to the north-west of the Temple wall. It is about 4 metres high at this point, and that is fairly regular all the way around. you can't really scale it, and your only course is either south along the wall, or east to the entrance again." 
 
extra {"path", "road"} 
"The path continues around the ramifications of the Temple, south and east." 
 
extra {"trees", "tree", "evergreens", "evergreen", "larch", "pines", "ashes", "oaks"} 
"The trees are wondrous to behold. Life exudes from them, as does the majesty of age." 
 
extra {"clearing"} 
"This clearing seems to be a natural clear space in the centre of the Forest. Before the walls around the Temple were built, there must have been a lot of open space here." 
 
extra {"temple", "building"} 
"It seems to be a temple in nature, very old, and of wonderful craftsmanship." 
 
movement SECT_FIELD 
 
east to forest32 descr "Outside the gate"; 
south to forest34 descr "Along the walls"; 
 
 
/* south to temple1@seren1 descr "The Entrance to the Temple"; */ 
 
end 
 
              forest32 
 
names {"outside temple"} 
title "Outside the Entrance to the Temple of the Coven" 
 
descr 
" Before you is a large fortified Temple, almost like a keep. It has a double gateway and through it you can see a large courtyard with the main temple building inside. The Temple looks far older than the fortifications around it. Obviously the priests of the Temple saw fit to erect these fortifications recently, as the World has filled with adventurers and plunderers. There are slits on the walls, which probably means unseen guardians. You would be wise to be cautious. You can go west and east around the walls or you can try and enter into the courtyard through the Entrance. You can also go north into the main Forest." 
 
extra {"path", "road"} 
"The path merges with the clearing and continues around the ramifications of the Temple, west and east." 
 
extra {"trees", "tree", "evergreens", "evergreen", "larch", "pines", "ashes", "oaks"} 
"The trees are wondrous to behold. Life exudes from them, as does the majesty of age." 
 
extra {"clearing"} 
"This clearing seems to be a natural clear space in the centre of the Forest. 
Before the walls around the Temple were built, there must have been a lot of open space here."   
 
extra {"temple", "building"} 
"It seems to be a temple in nature, very old, and of wonderful craftsmanship." 
 
movement SECT_FIELD 
 
flags {UNIT_FL_NO_MOB} 
 
west to forest31 descr "West around the walls"; 
east to forest33 descr "East around the walls"; 
north to forest21 descr "Deep in the Forest"; 
south to temple1@seren1 open {EX_OPEN_CLOSE} keyword {"gates", "gate"} 
descr "The Entrance to the Temple"; 
 
end 
 
 
                                  forest33 
names {"outside wall"} 
title "North East of the Temple walls" 
 
descr 
" You are now to the north-east of the Temple wall. The Uniformity of this wall is very noticable - no building can weather this way without some kind of spell protection. It is about 4 metres high at this point, and that is fairly regular all the way around. you can't really scale it, and your only course is either south along the wall, or west to the entrance again." 
 
extra {"path", "road"} 
"The path continues around the ramifications of the Temple, south and west." 
 
extra {"trees", "tree", "evergreens", "evergreen", "larch", "pines", "ashes", "oaks"} 
"The trees are wondrous to behold. Life exudes from them, as does the majesty of age." 
 
extra {"clearing"} 
"This clearing seems to be a natural clear space in the centre of the Forest. Before the walls around the Temple were built, there must have been a lot of open space here." 
 
extra {"temple", "building"} 
"It seems to be a temple in nature, very old, and of wonderful craftsmanship." 
 
movement SECT_FIELD 
 
west to forest32 descr "West around the walls"; 
south to forest35 descr "South around the walls"; 
 
end 
 
                                  forest34 
names {"outside wall"} 
title "West of the Temple walls" 
 
descr 
" You are now to the west of the Temple wall. The Forest seems to be in transition to the West, from mainly oaks, to mainly evergreens. It is quite patchy in places. The walls are uniform as ever, The ground appears to be slightly wet underfoot - perhaps you have rediscovered the underground stream as it flows under the outer walls of the Temple. You can go east around the back of the Temple walls, or north around the walls." 
 
extra {"path", "road"} 
"The path continues around the ramifications of the Temple, east and north." 
 
extra {"trees", "tree", "evergreens", "evergreen", "larch", "pines", "ashes", "oaks"} 
"The trees are wondrous to behold. Life exudes from them, as does the majesty of age." 
 
extra {"clearing"} 
"This clearing seems to be a natural clear space in the centre of the Forest. Before the walls around the Temple were built, there must have been a lot of open space here." 
 
extra {"temple", "building"} 
"It seems to be a temple in nature, very old, and of wonderful craftsmanship." 
 
movement SECT_FIELD 
 
south to forest37 descr "Southwest of the Temple walls"; 
north to forest31 descr "North around the Temple walls"; 
 
end 
 
                                  forest35 
names {"outside wall"} 
title "East of the Temple walls" 
 
descr 
" You are now to the East of the Temple wall. The Forest comes really close to the walls here, in fact, if you could climb one of the trees, you might be able to slip over the Wall, but for the fact that the trees are so high, but then again, someone as agile as you might succeed. You can go south to the southi-eastern part of the clearing, or back north to the north-eastern part." 
 
extra {"path", "road"} 
"The path continues around the ramifications of the Temple, east and north." 
 
extra {"trees", "tree", "evergreens", "evergreen", "larch", "pines", "ashes", "oaks"} 
"The trees are wondrous to behold. Life exudes from them, as does the majesty of age." 
 
extra {"clearing"} 
"This clearing seems to be a natural clear space in the centre of the Forest. Before the walls around the Temple were built, there must have been a lot of open space here." 
 
extra {"temple", "building"} 
"It seems to be a temple in nature, very old, and of wonderful craftsmanship." 
 
movement SECT_FIELD 

dilbegin climber();          /* climb wall dil */

var
   pc           : unitptr;

code
{
:start:
   heartbeat := PULSE_SEC*1;
   wait(SFB_CMD,command("climb") and (("tree" in argument) or ("wall" in argument)));
   block;
   pc := activator;
   secure(pc,lost);
  
   act("You climb the tree and scramble on to the wall!",
      A_ALWAYS,pc,null,null,TO_CHAR);
   act("$1n climbs a tree and disappears over the wall.",
      A_SOMEONE,pc,null,null,TO_REST);
pause;
   link(pc,findroom("twall2@seren1"));
   act("$1n climbs on to the wall from a tree.",
      A_SOMEONE,pc,null,null,TO_REST);
exec("look", pc);
unsecure(pc);
pause;
   goto start;

:lost:
   unsecure(pc);
   goto start;

}
dilend /* climber */ 

south to forest38 descr "Southeast of the Temple walls"; 
north to forest33 descr "North around the Temple walls"; 
 
end 
 
 
                                  forest36 
names {"outside wall"} 
title "The rear of the Temple walls" 
 
descr 
" The soil here is very wet and muddy. The walls provide shade as do the tall pines to the rear of them. You find it hard to move without slipping here. The walls seem impregnably from all sides. It looks like you'll have to enter by the main gate if you want to gain entry to this place. You can go west around to the south-western part of the clearing, or east to the south-east corner." 
 
extra {"path", "road"} 
"The path continues around the ramifications of the Temple, east and north." 
 
extra {"trees", "tree", "evergreens", "evergreen", "larch", "pines", "ashes", "oaks"} 
"The trees are wondrous to behold. Life exudes from them, as does the majesty of age." 
 
extra {"clearing"} 
"This clearing seems to be a natural clear space in the centre of the Forest. Before the walls around the Temple were built, there must have been a lot of open space here." 
 
extra {"temple", "building"} 
"It seems to be a temple in nature, very old, and of wonderful craftsmanship." 
 
movement SECT_SWAMP 
 
west to forest37 descr "West around the Temple walls"; 
east to forest38 descr "East around the Temple walls"; 
 
end 
 
                                  forest37 
names {"outside wall"} 
title "Southwest of the Temple walls" 
 
descr 
" The southwest part of the Clearing is rather drab and unsightly. It seems this is a kind of compost site for the Temple, as the smell proves to your nose. They obviously must put waste material here and then let the waste decompose for use as compost in a garden somewhere. It has been well planned, being laid out in rows of waste, in various states of decomposition. You can head east around the rear of the Temple walls to the southern part of the clearing, or north outside the western wall." 
 
extra {"path", "road"} 
"The path continues around the ramifications of the Temple, south and west." 
 
extra {"trees", "tree", "evergreens", "evergreen", "larch", "pines", "ashes", "oaks"} 
"The trees are wondrous to behold. Life exudes from them, as does the majesty of age." 
 
extra {"clearing"} 
"This clearing seems to be a natural clear space in the centre of the Forest. Before the walls around the Temple were built, there must have been a lot of open space here." 
 
extra {"temple", "building"} 
"It seems to be a temple in nature, very old, and of wonderful craftsmanship." 
 
movement SECT_FIELD 
 
north to forest34 descr "West of the walls"; 
east to forest36 descr "South of the walls"; 
 
end 
 
                                  forest38 
names {"outside wall"} 
title "Southeast of the Temple walls" 
 
descr 
"The Forest is quite close the walls here, as it was north of here, but the trees are not quite as tall. They look almost climbable, but then again, they may well let you in by the front gate, perhaps that's worth a try? You can head west to the rear of the Temple walls, or north to the eastern part of the Clearing." 
 
extra {"path", "road"} 
"The path continues around the ramifications of the Temple, south and west." 
 
extra {"trees", "tree", "evergreens", "evergreen", "larch", "pines", "ashes", "oaks"} 
"The trees are wondrous to behold. Life exudes from them, as does the majesty of age." 
 
extra {"clearing"} 
"This clearing seems to be a natural clear space in the centre of the Forest. Before the walls around the Temple were built, there must have been a lot of open space here." 
 
extra {"temple", "building"} 
"It seems to be a temple in nature, very old, and of wonderful craftsmanship." 
 
movement SECT_FIELD 
 
west to forest36 descr "South of the Temple walls"; 
north to forest35 descr "East of the Temple walls"; 
 
end 
 
/* END FOREST */ 
 
/* BEGIN TOWER - 2 rooms */ 
 
                                  tower1 
names {"floor0"} 
title "The Tower of the Oracle" 
 
descr 
" Your light reflects off the polished walls of the tower, dimly lighting up part of the room, but mostly dazzling your eyes. You can make out a stairs, made from the same black crystal as the rest of the tower. You look at the ground where you are about to put your foot and notice that it is black crystal too. There are no joins where the floor meets the walls and the stairs seems to flow into the floor and the feeling, as if the whole tower came from some great mold. You suspect some form of magic was used to make this tower from a very large crystal. A red glow emmanates from the opening where the stairs becomes the floor above you. It is the same light that you could see from the Window outside. It doesn't reflect off the crystal tower it just casts its glow. The entrance by which you entered the tower is nowhere to be seen behind you! It seems to have vanished. The only way you can go now is up to the next floor of the tower." 
 
extra {"red light", "red glow", "light", "glow"} 
"The red glow is very strange - it doesn't seem to reflect off the black crystal. It seems to be magical in nature." 
 
extra {"walls", "crystal"} 
"This crystal seems magical in nature. It only reflects certain types of light and yet you can't see anything from the light it reflects." 
 
extra {"stairs", "stair"} 
"The Stairway is one with the ceiling and floor, just like the rest of the Tower, made of that black crystal." 
 
extra {"floor", "ceiling"} 
"The floor and ceiling are both part of the one solid piece of black crystal. It isn't slippery, in fact it grips very well." 
 
flags {UNIT_FL_INDOORS, UNIT_FL_NO_WEATHER, UNIT_FL_NO_MOB, UNIT_FL_NO_TELEPORT} 
 
movement SECT_INSIDE 

special SFUN_FORCE_MOVE "tower2!You feel drawn by the light...@$1n walks upstairs towards the light." time 100
 
up to tower2 descr "Up the steps to towards the Red Light"; 
 
end 
 
                                  tower2 
names {"floor0"} 
title "The Tower of the Oracle" 
 
descr 
" As your head rises above floor when you climb the stairs, your jaw drops in sheer awe. This room is as bare as the one below it, but in the centre is a black crystal slab, rounded, and one with the floor. About a metre above the slab, a globe of orange light hangs in the air, rotating on itself, and pulsing slightly. It is giving off red light, which is quite startling, because it is a different colour. The Window you saw from outside the tower is nowhere to be seen. The stairs down seems to have vanished too! Whatever power conceived this tower, they wanted to be sure you couldn't exit of your own accord, or did they..."  
 
extra {"walls", "crystal"} 
"This crystal seems magical in nature. It only reflects certain types of light and yet you can't see anything from the light it reflects." 
 
extra {"stairs", "stair"} 
"The Stairway is one with the ceiling and floor, just like the rest of the Tower, made of that black crystal." 
 
extra {"floor", "ceiling"} 
"The floor and ceiling are both part of the one solid piece of black crystal. It isn't slippery, in fact it grips very well." 
 
flags {UNIT_FL_INDOORS, UNIT_FL_NO_WEATHER, UNIT_FL_NO_MOB, UNIT_FL_NO_TELEPORT} 
 
movement SECT_INSIDE 

dilcopy enter_oracle@seren();
 
end 
 
/* END TOWER */ 
 
/* BEGIN LAKE OF REMEMBRANCE - 18 rooms 
 
 
      MAP 
      === 
   
     F            F = Forest 
     S            S = Shore 
     LL           L = Lake 
    LLLL 
    LLLL 
     LLLL 
     LLLL 
 
 
*/ 
 
                                     lake1 
names {"lake"} 
title "On the Lake of Remembrance" 
 
descr 
" You are now close to the shore of the lake of Remembrance. As you get further from land, the shore is swallowed up by the fog banks. When you look over the edge of the craft, you can see your reflection in the watery mirror. The water is black and unrevealing. Any light that hits the water is unable to penetrate the glassy surface and give light to the darkness. Ripples extend slowly away from the boat as it moves, vanishing beneath the thick fog which hangs over the lake in almost perfect stillness. There is a no noticeable wind and this just adds to the eeriness and the overwhelming sense of evil that dwells in this ominous lake. You can sail east or south from this part of the lake. North takes you  to where the shore was." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}

north to forest30 descr "The Lake Shore"; 
east to lake2 descr "East across the Lake"; 
south to lake4 descr "South over the lake"; 
 
end 
 
                                     lake2 
names {"lake"} 
title "Northern bay of the Lake of Remembrance" 
 
descr 
" You are sailing parallel to the northern shore of the Lake. You can just make out the trees of the Forest of Serenity right on the shore of the lake. You can't land there. The legacy of the Darkelves' evil is almost tangible. Occasionally, a dimple extends outwards from it - perhaps some kind of fish inhabits this lake, but you can only guess what twisted effect that the water has had upon them. You can sail west to the landing, or south along the eastern shore." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}
 
west to lake1 descr "West across the Lake"; 
south to lake5 descr "South over the Lake"; 
 
end 
 
                                     lake3 
names {"lake"} 
title "West bay of the Lake" 
 
descr 
" The western bay seems to be less tainted than the rest of the Lake. There doesn't seem to be any particular reason for this, but it is a very welcome change. The Fog is much thinner here and the visibility enables you to make out the Forest surrounding the Lake to the West. You have no way of telling the water's depth but you can guess from the slope of the Valley that the lake must be very deep in the South. Occasionally, when you look at the water, faint shadows of cold fair elven faces coalesce before your eyes, causing a shudder to run through your body, then they vanish. These images make you realise that is it is a monument, a relic of their deaths so long ago." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}
 
east to lake4 descr "East across the Lake"; 
south to lake7 descr "South along the Western shore"; 
 
end 
 
                                     lake4 
names {"lake"} 
title "On the Lake of Remembrance" 
 
descr 
" You are now far from land, all you can see is water, and then fog, extending in all directions. You wonder how far out in the Lake you are now. The banks of fog seem to move independently of any breeze or air movements, as if the very fog itself is alive and in control of itself. You can travel in all directions from here, north, south, east and west." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}
 
north to lake1 descr "North in the Lake"; 
east to lake5 descr "East across the Lake"; 
west to lake3 descr "West into the Fog"; 
south to lake8 descr "South in the Lake"; 
 
end 
 
                                     lake5 
names {"lake"} 
title "Northern part of the Lake of Remembrance" 
 
descr 
" As your boat glides through the dark water, you wonder what would happen should you fall in? would you ever get out? And even if you did, what effect would the water have on you. Even those starved of water wouldn't drink of this foul lake. You can go north, south, east and west from here." 
 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}
 
north to lake2 descr "On the northern edge of the Lake"; 
east to lake6 descr "Towards the eastern edge of the Lake"; 
west to lake4 descr "West on the Lake of Remembrance"; 
south to lake9 descr "South to the middle of the Lake"; 
 
end 
 
                                     lake6 
names {"lake"} 
title "North eastern part of the Lake" 
 
descr 
" The north eastern shore slowly emerges from the Fog to the east as the waters behind you are covered once again by the blanket of fog. The Forest of Serenity seems to encircle the Lake - you can see pine trees growing right at the water's edge. They are dark, with almost black needles, as if the lake exerts a great influence on them. You can go west and south."  
 
extra {"pines", "pine"} 
" These look like Scot's pine, but are very dark in the needle. They fit the character of the Lake perfectly. Whatever life the Lake touches, it seems to change." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}
 
west to lake5 descr "West on the Lake"; 
south to lake10 descr "South along the Eastern shore"; 
 
end 
 
                                     lake7 
names {"lake"} 
title "Along the Western part of the Lake" 
 
descr 
" The Western shore can be seen clearly from here. The fog seems to have receded slightly, as if the evil is withdrawing for a while. Your boat has caused waves to lap against the shore, and the faint sound of the waves whispers across the water to you. This seems to be a small bay, with the shore curving around and running east-west to the south. You can go east out into the lake, and north parallel to the shore." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 
 
flags {UNIT_FL_NO_TELEPORT}

east to lake8 descr "East on the Lake"; 
north to lake3 descr "North along the Eastern shore"; 
 
end 
 
                                     lake8 
names {"lake"} 
title "Out on the Lake" 
 
descr 
" The water here is darker, if that's possible. This could mean that the lake reaches a great depth here, or that whatever power of evil courses through the lake is more concentrated at this point. There are clouds of biting flies, like mosquitoes, only a lot larger and aggressive. It makes you want to go to the shore just to get away from them. You may sail north, south, east and west from here." 
 
extra {"clouds", "cloud", "flies", "fly", "mosquito", "mosquitoes"} 
" These flies buzz over the water in clouds, each cloud a million tiny mouths, all yearning to taste your flesh. If only they weren't so aggressive..." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}
 
west to lake7 descr "Near the western shore"; 
north to lake4 descr "On the Lake"; 
east to lake9 descr "The Centre of the Lake"; 
south to lake11 descr "South along the Eastern shore"; 
 
end 
 
                                                lake9 
names {"lake"} 
title "The Middle of the Lake" 
 
descr 
" You are now around the Middle of the Lake. Ahead of you in the fog, a small island, barely a metre in diameter emerges from the water. Surprisingly, the water doesn't seem to be any shallower around the island, it just seems to be a pillar from the lake bottom, or perhaps a floating mass. You can go north, south, east and west from here." 
 
extra {"island"} 
" This small island is bare, hard earth, or rock. It is very small and seems to float in the centre of the Lake." 
 
LAKE_EXTRAS 
 
flags {UNIT_FL_NO_MOB, UNIT_FL_NO_TELEPORT}
 
movement SECT_WATER_SAIL 
 
west to lake8 descr "West on the Lake"; 
north to lake5 descr "On the Lake"; 
east to lake10 descr "Towards the eastern shore"; 
south to lake12 descr "The Southern reaches of the Lake"; 
 
end 
 
                                                         lake10 
names {"lake"} 
title "Near the Eastern Shore" 
 
descr 
" You are nearing the Eastern Shore of the Lake of Remembrance. You can make out the shape of a high cliff with tree trunks growing from its top. Tree roots protrude from the cliff face. This must be close to the side of the Valley where the land slopes sharply upwards. You can go north along the shore, west further out onto the lake and south." 
 
extra {"cliff"} 
" The cliff is sandy and quite high. Trees grow from its top." 
 
extra {"trees", "tree roots", "tree", "root"} 
" The trees seem to be deciduous and are growing right up to the cliff overhang - their roots can be seen emerging from the cliff face which juts out over the lake." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}
 
west to lake9 descr "West on the Lake"; 
north to lake6 descr "Along the east shore"; 
south to lake13 descr "The Southern reaches of the Lake"; 
 
end 
 
                                                    lake11 
names {"lake"} 
title "The South Western Shore" 
 
descr 
" The western shore can be seen from here. There are no trees to be seen on it, just a high bank that seems to rise the further west it goes which leads you to believe that's the western side of the Valley, sloping steadily upwards. You can go north, east and south." 
 
extra {"shore", "bank"} 
" The shore is rocky, and quite steep. As you have gone southwards, the Valley seems to have thinned somewhat." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}
 
east to lake12 descr "East on the Lake"; 
north to lake8 descr "North away from the shore"; 
south to lake15 descr "The South-east corner of the Lake"; 
 
end 
 
                                        lake12 
names {"lake"} 
title "The Southern reaches of the Lake" 
 
descr 
" There seems to be a current in this part of the lake. You can't imagine what could be causing it, but the current seems to be flowing from there to the southeast. You are far from land here. The lake extends in all directions, north, south, east and west." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 
 
flags {UNIT_FL_NO_TELEPORT}

dilcopy current@seren(); 
 
east to lake13 descr "East on the Lake"; 
west to lake11 descr "West towards the western shore"; 
north to lake9 descr "The Centre of the Lake"; 
south to lake16 descr "The Southern Bay of the Lake"; 
 
end 
 
                                        lake13 
names {"lake"} 
title "The Southern part of the Lake" 
 
descr 
" Your craft drifts on the black waters. You can make out an end to the fog some ways south of here. To your east, what looks to be a small bay takes shape through the fog. You can go in any direction you choose from here, north, south, east and west." 
 
extra {"bay"} 
" The bay seems to extend eastwards." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}
 
east to lake14 descr "South Eastern Bay of the Lake"; 
west to lake12 descr "Southern reaches of the Lake"; 
north to lake10 descr "Along the eastern shore"; 
south to lake17 descr "The Southern Bay of the Lake"; 
 
end 
 
                                        lake14 
names {"lake"} 
title "The South Eastern Bay" 
 
descr 
" You have reached the Eastern extent of the Lake. The Fog is less dense in this region of the Lake and off to the South, you can make out the Shore, marking the end of the Lake, and indeed, the Valley itself. You can go south and west from here." 
 
extra {"bay"} 
" This bay marks the easternmost part of the Lake." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}
 
west to lake13 descr "Southern reaches of the Lake"; 
south to lake18 descr "The Southeast corner of the Lake"; 
 
end 
 
                                        lake15 
names {"lake"} 
title "Close to the South Western Shore" 
 
descr 
" The Southern Shore of the lake runs almost straight east from here. The Valley can be seen rising sharply to the South, where it ends. You can't land on the southern shore and besides, there doesn't seem to be anywhere to go except up a very steep hill. You can follow the shore eastwards or head north from here." 
 
extra {"shore"} 
" The Shore is quite rocky, and very steep, even if you could land, there wouldn't be much point to it, because this is the southern end of the Valley." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}
 
east to lake16 descr "Along the line of the southern Shore"; 
north to lake11 descr "Southwest part of the Lake"; 
 
end 
 
                                        lake16 
names {"lake"} 
title "Near the Southern Shore" 
 
descr 
" The Valley of Serenity south of here, sloping upwards to some distant peak. All around this area, the Fog seems to have lifted slightly. The Gravity of what you have done passes through your mind - you have sailed over the ancient darkelf city that was once full of life, albeit evil. The Good elves were not perhaps as good as they would like to think they are, after almost stamping out an entire race of people. You can follow the line of the Shore west, east or you can journey north out onto the Lake." 
 
extra {"shore"} 
" The Shore is quite rocky, and very steep, even if you could land, there wouldn't be much point to it, because this is the southern end of the Valley." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}
 
east to lake17 descr "Along the line of the southern Shore"; 
west to lake15 descr "Along the line of the southern Shore"; 
north to lake12 descr "North out onto the Lake"; 
 
end 
 
                                        lake17 
names {"lake"} 
title "Close to the Southern Shore" 
 
descr 
" You are now following the southern shore of the Lake of Remembrance, at the southern end of the Valley of Serenity. This Lake isn't so serene, just silent, deathly silent. It does  live up to its name though, remembering the race of people which was almost eradicated so long ago. You can follow the shoreline east and west, or travel north further out on the Lake." 
 
extra {"shore"} 
" The Shore is quite rocky, and very steep, even if you could land, there wouldn't be much point to it, because this is the southern end of the Valley." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}
 
east to lake18 descr "The southeast corner of the Lake"; 
west to lake16 descr "Along the line of the southern Shore"; 
north to lake13 descr "North out onto the Lake"; 
 
end 
 
                                        lake18 
names {"lake"} 
title "The Southeast Corner of the Lake" 
 
descr 
" You are now at the furthest point from where you entered the Lake. The Fog seems to have almost completely lifted from this area of the Lake and it is a more wholesome place to look upon. It is part of the South eastern Bay, which goes north from there. You can also go west parallel to the southern shore." 
 
extra {"bay"} 
" This bay marks the easternmost part of the Lake." 
 
extra {"shore"} 
" The Shore is quite rocky, and very steep, even if you could land, there wouldn't be much point to it, because this is the southern end of the Valley." 
 
LAKE_EXTRAS 
 
movement SECT_WATER_SAIL 

flags {UNIT_FL_NO_TELEPORT}
 
west to lake17 descr "Along the line of the southern Shore"; 
north to lake14 descr "North in the Bay"; 
 
end 
 
/* END LAKE OF REMEMBRANCE */ 
 



				well_room
names {"well_room"}
title "After Jumping in the Well"
descr "You are travelling down an underground stream out into the lake of serenity."

dilbegin well_look();  /* Stop the pc looking around */

var
   pc   : unitptr;

code 
{
:start:
   heartbeat := PULSE_SEC*1;
   wait(SFB_CMD,command(CMD_LOOK));
   block;
   pc := activator;
   secure(pc,lostem);
   act("You are too worried about getting enough air to breathe!!!", A_ALWAYS,pc,null,null,TO_CHAR);
   unsecure(pc);
   goto start;
    
:lostem:
   goto start;

}
dilend /* well_look */

flags {UNIT_FL_INDOORS, UNIT_FL_NO_WEATHER, UNIT_FL_NO_TELEPORT}

movement SECT_INSIDE

ALWAYS_LIGHT

end /* well_room */

/* END TEMPLE OF THE COVEN */ 
 

/* +++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++  M O B I L E S   S E C T I O N   ++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++*/
 
%mobiles 
 
/* Real mobs */ 
 
				chani 
names {"chani", "elf", "maiden"} 
title "Chani the Dreamweaver" 
descr "A beautiful elf maiden is here, smiling at you." 
extra {} 
"Before you stands a beautiful elf maiden. Her smile is like sunshine, her eyes like the stars, her hair is the fabric of dreams. She is the Dreamweaver. You can buy dreamstones from her." 
 
race RACE_ELF 
sex SEX_FEMALE 
height 210 
weight 140 
level 85 
alignment 1000 
exp 100 /* no bonus allowed */ 
money 4 SILVER_PIECE 
 
NATURAL_DEF(WPN_FIST, ARM_CLOTHES) 
MSET_ABILITY(10,10,10,23,15,22,10,0) 
MSET_WEAPON(0,0,0,0,10,0) 
MSET_SPELL(0,7,7,7,7,7,5,35,5,5,5) 
 
dilcopy combat_mag@function("icestorm","",0,1); 
 
flags {UNIT_FL_NO_TELEPORT, CHAR_DETECT_INVISIBLE} 
 
dilcopy shopkeeper@function(CHANI_PROD, CHANI_MSG, OPEN_TIMES, CHANI_ITEM_TYPE, CHANI_SELL_PROFIT, CHANI_BUY_PROFIT, CHANI_MAX_CASH, "", "");

/*
special SFUN_SHOP_INIT 
"&lProfit sell = 110 
Profit buy = 10 
Production = ~dreamstone1@seren~ 
Trade types = "+ITEM_TREASURE+" 
Msg1 = ~$1n says, 'I don't have that so sell'~ 
Msg2 = ~$1n says, 'Why you haven't got it, $3n?'~ 
Msg3 = ~$1n says, 'Do you wish to buy something or not?'~ 
Msg4 = ~$1n says, 'I won't buy that, it's not good enough'~ 
Msg5 = ~$1n says, '$2n is to expensive for you, $3n.'~ 
Msg6 = ~$1n says, 'That's %s for a $2n.'~ 
Msg7 = ~$1n says, 'That will be %s for your $2n.'~ 
Hours1 = 4 12 
Hours2 = 13 23" 
 
*/

dilcopy chani_action@seren(); 
 
end /* Chani the dreamweaver */ 
 
zolan 
names {"Zolan the Guardian Zoat", "guardian zoat", "zolan", "guardian", "zoat", "father"} 
title "Zolan the Guardian Zoat" 
descr "Zolan the Guardian Zoat is standing here." 
 
extra {} 
"Before you stands a massive, green, centauroid reptile, with a scaley, heavily muscled  torso mounted on the body of some kind of armoured monitor lizard. Its head is human-like, but rounded like that of a snake, or turtle, with a domed skull and piercing yellow eyes. The head sits on top of shoulders fused as one great plate. This great creature embodies both bruth strength and devastating intellect. The Zoats were once thought to be the first intelligent beings on Earth, some even thought they came from the stars, when the other races were but children, but no one knows for certain. Zolan is the first, and is the greatest of his race. He was the only being powerful enough to guard the Elf-slayer Manum Altur, after the fall of the darkelves. Now he holds Vox Altur." 
 
extra {"torso"} 
"The creature's torso is not unlike that of a human, but it is very muscular and scaled like the skin of a reptile. It is the colour of the leaves of the Forest, and the two great arms that extend from the torso are like those of a very strong human." 
 
extra {"body"} 
"Zolan's body is plated and scaled like that of a great dragon, just not as large. It has four legs on the lower part of the body, and two arms on the torso. The feet are very reptilian, and his tale is like that of a lizard." 
 
extra {"head"} 
"The head of Zolan is a large, domed structure, probably to accomodate the large brain which he posesses. The mouth is quite wide, and fixed in a wry expression because of the plated skull. His two yellow eyes seem to stare into eternity, all-seeing, all-knowing." 
 
extra {"shoulders", "shoulder"} 
"The shoulders are fused into one single plate from which the neck and head emerge." 
 
extra {"tail"} 
"The tail is quite long, like that of a lizard, scaled and quite active." 
 
ZOAT_GREATER(SEX_MALE,135) 

flags {UNIT_FL_NO_TELEPORT, CHAR_DETECT_INVISIBLE}
 
alignment 1000 
 
money 2 GOLD_PIECE 
 
dilcopy zombie_kill@seren(); 
dilcopy mob_kill@seren();
dilcopy fam_block@seren();
dilcopy block_summ@seren();
dilcopy block_animate@seren(); 
dilcopy disarm_block@seren(); 
dilcopy filch_block@seren(); 
dilcopy steal_block@seren(); 

/*
    Zolan requires that you have seen the Oracle of Serenity before he offers
    the quest. He requires a red orb, a crystal shard, a flaming katana and ishlors 
    plate. In return, he gives the zoat_plate (backplate) which gives +2 str, +2 dex.
*/

dilcopy block_summ@seren();
dilcopy busy_questor@seren();

dilbegin zolan_quest(); /* All of Zolan's stuff */

var
   pc    : unitptr;
   item  : unitptr;
   qname : extraptr;
   i : integer;
code
{

:init:
   heartbeat:=PULSE_SEC*10;

i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,in_fight); 

:start:
   wait(SFB_DONE,( ((activator.type==UNIT_ST_PC) and (command("north") or command("south") or command("west") or command("east") ) ) or ((target==self) and (command("give")) and (activator.type==UNIT_ST_PC))));
   pc:=activator;
   secure(pc,lost_pc);

   if ((command("give")) and (target==self)) goto checkitem1;  
    
   if(not (ORACLE_VISITED in pc.quests)) goto lost_pc;

   if(ZOLAN_QUEST_ONGOING in pc.quests) goto lost_pc;
   if(ZOLAN_QUEST_FINISHED in pc.quests) goto lost_pc;

   heartbeat:=PULSE_SEC*4;

   pause;
   exec("emote seems to be interested in something.", self);
   pause;
   exec("examine " + pc.name, self); 
   pause;
   exec("emote ponders deeply what to do.",self); 
   pause;
   heartbeat:=PULSE_SEC*7;
   exec("say " + pc.name + ", I need someone to help me in my " +
        "guardianship.",self); 
   pause;
   exec("say I know the Oracle has told you something of it, so " +
        "you must be capable of aiding me." ,self); 
   pause;
   exec("say Long ago, when the world was young, I came to this " +
        "world with some of my people in the hopes of finding a " +
        "better life." ,self); 
   pause;
   exec("say The elves were at the height of their splendour, but " +
           "then the dark ones came and tainted the world." ,self);
   pause;
   exec("sigh",self); 
   pause;
   exec("say The thing of evil which the dark ones had created " +
            "was too much for them to guard.", self); 
   pause;
   exec("say As far as they knew, it couldn't be destroyed or hidden, " +
        "just kept from those who would use it. So I have guarded this " +
        "thing for an eternity.", self);
   pause;
   exec("say Now however, the evil has changed. It now manifests itself as "+
        "an evil staff, and it must still be destroyed. I need your help " +
        "to do so.", self);
   pause;
   exec("say NOD if you will accept, or SHAKE if you decline my request.", self);
   wait(SFB_DONE,((command("nod") or command("shake")) and (activator==pc)));
   if (command("shake"))
   {
   goto rejection;
   }

   addextra(pc.quests,{ZOLAN_QUEST_ONGOING},""); /* You're it sucka */
   exec("say You are indeed courageous.", self); 
   pause;

/* Ok, here's what I want */
   exec("say I require the following items in order to attempt to destroy " +
        "my burden.", self); 
   pause;
   exec("say They are four in all.", self); 
   pause;
   exec("say In order to store the power necessary, I need an object of " +
        "power retention. I believe the dragon people in the northeast " +
        "of the world hold such a thing.", self); 
   pause;
   exec("say Next I need something to focus this power. A Dragon from the " +
        "ranks of Tiamat's children keeps a crystal that will do this.", self);
   pause;
   exec("say Thirdly, I need an object to deliver the power to its target. " +
        "For this, the great weapon of the Fire Goddess will serve.", self); 
   pause;
   exec("say And finally, I need to contain the after-effects of the thing's " +
        "destruction, and only the plate of the four-eyed demon Lord can " +
        "absorb that.", self); 
   pause;
   exec("say Not that you want it, but I am capable of rewarding you well on " +
        "completion of your quest. Go now and fetch these items for me.", self); 
   unsecure(pc);
   goto start;

:rejection:
   unsecure(pc);
   exec("sigh", self);
   pause;
   exec("say You are not the one, but there may be another...", self);
   heartbeat := PULSE_SEC*20;
   pause;
   heartbeat := PULSE_SEC*5;
   goto start;

:checkitem1:
   if (ZOLAN_QUEST_ONGOING in pc.quests) goto checkitem2;
   exec("say I do not want this.", self);
   pause;
   exec("drop " + medium.name, self);
   unsecure(pc);
   goto start;

:checkitem2:
   if((medium.title=="A Red Orb") and 
      ("orb" in medium.names))
   {
      if("gotkorb" in pc.quests)
      {
         exec("say One Orb is enough for this, I don't need a second.", self);
         exec("give " + medium.name + " " + activator.name, self);
      }
      else
      {
          destroy(medium); /* Tick */

          qname:=ZOLAN_QUEST_ONGOING in pc.quests;
          addstring(qname.names, "gotkorb");
          exec("say Thank you " + pc.name + ". I will begin storing the " +
               "necessary power.", self);
      }
   }
   else if((medium.title=="A crystal shard") and 
           ("shard" in medium.names))
   {
      if("gotdshard" in pc.quests)
      {
         exec("say A single shard is all I need to focus the power.", self);
         exec("give " + medium.name + " " + activator.name, self);
      }
      else
      {
         destroy(medium); /* Tick */

         qname:=ZOLAN_QUEST_ONGOING in pc.quests;
         addstring(qname.names, "gotdshard");
         exec("say I can focus the power adequately with this.", self);
      }
   }
   else if((medium.title=="The Flaming Katana") and 
           ("katana" in medium.names))
   {
      if("gotpkat" in pc.quests)
      {
         exec("say I have no use for a second Katana. The Fire Goddess " +
              "can have this one back.", self);
         exec("give " + medium.name + " " + activator.name, self);
      }
      else
      {
         destroy(medium); /* Tick */

         qname:=ZOLAN_QUEST_ONGOING in pc.quests;
         addstring(qname.names, "gotpkat");
         exec("say This will deliver the power needed to perform the " +
              "destruction.", self);
      }
   }
   else if((medium.title=="Ishlors plate") and 
           ("plate" in medium.names))
   {
      if("gotiplate" in pc.quests)
      {
         exec("say I have already recieved this item from you.",self);
         exec("give " + medium.name + " " + activator.name, self);
      }
      else
      {
         destroy(medium);
         qname:=ZOLAN_QUEST_ONGOING in pc.quests;
         addstring(qname.names, "gotiplate");
         exec("say Evil contained by evil. Quite ironic.", self);
      }
   }
   else
   {
      exec("say I didn't ask for this.", self);
      exec("drop " + medium.name, self);
     }
:check_quest:
   if(("gotkorb" in pc.quests) and
      ("gotdshard" in pc.quests) and
      ("gotpkat" in pc.quests) and
      ("gotiplate" in pc.quests)) goto all_got;
   unsecure(pc);
   goto start;

:all_got:  /* REWARD & FINISH */
   exec("emote puts the equipment away in his carapace.", self);
   pause;
   exec("say I will honour my part of the bargain. In exchange for your " +
        "help, I give you this, a backplate made from my scales. It will " +
        "protect you like nothing else can.", self);
   item:=load("zoat_plate@seren");  
   link(item, pc);
   act("Zolan gives you the " + item.name + ".", 
          A_ALWAYS,pc,null,null,TO_CHAR);
   subextra(pc.quests, ZOLAN_QUEST_ONGOING);
   addextra(pc.quests, {ZOLAN_QUEST_FINISHED}, "");
   experience(2000,pc);
   pause;
   exec("say Farewell " + pc.name + ".", self);
   exec("shout Hail " + pc.name + ", Zoat Friend!!!", self);      
   unsecure(pc);
   goto start;

:in_fight:  /* DO NOTHING UNTIL FIGHT IS OVER */
   heartbeat:=PULSE_SEC*2;
   while(self.position==POSITION_FIGHTING) pause;
   heartbeat:=PULSE_SEC*5;
   goto start;

:lost_pc:
   unsecure(pc);
   goto start;
}
dilend /* Zolan's dils */
 
dilbegin zolan_hail(); 
 
var 
   pc   : unitptr; 
code 
{ 

:init: 	
   heartbeat := PULSE_SEC*1; 
:start: 
  wait(SFB_CMD,((command(CMD_SAY)) and ("hail master of serenity!" in argument) and (activator.type==UNIT_ST_PC)));
pc := activator;
secure(pc,lostem);
pause;
exec("shout Hail " + pc.name + "!", self);
goto lostem;

:lostem:
unsecure(pc);
goto start;
} 
dilend  
 
end /* Zolan the Zoat */ 
 
/* 
 
 Field mobs : Syneen Deer - a race of fairly large deer  
 
*/ 
 
                                syneen_doe 
names {"syneen doe", "syneen deer", "deer", "doe"} 
title "a Syneen deer" 
descr "A tall sleek deer is grazing here." 
 
extra {} 
"This deer is quite tall, but also lithe. It is obviously female, not having any antlers with which to display, like the male deer." 
 
extra {"head"} 
"The head looks delicate. The eyes are quite large." 
 
extra {"eyes", "eye"} 
"The dark brown eyes glint as the deer moves its head." 
 
extra {"body"} 
"The body is lithe and well built. This animal looks like it could run extremely fast if it wanted to." 
 
extra {"legs","leg"} 
"The deer's legs are long, but in perfect proportion to its body." 
 
SYNEEN_DEER(SEX_FEMALE,77) 
special SFUN_RANDOM_ZONE_MOVE time 200 bits SFB_RANTIME 
special SFUN_AGGRES_REVERSE_ALIGN "$1n attacks the evil $3n!" time 100 bits SFB_RANTIME
flags {UNIT_FL_NO_TELEPORT} 
alignment +700 
money 3 SILVER_PIECE 
 
dilbegin sdoe_action(); 
 
var 
   i    : integer; 
 
code { 
 
:init: 
   heartbeat := PULSE_SEC*10; 
 
   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight); 
:start: 
   wait(SFB_DONE,(activator.type==UNIT_ST_PC and (self.position!=POSITION_SLEEPING and self.position!=POSITION_RESTING))); 
   pause; 
   exec("emote glances at you, then continues grazing.", self); 
   pause; 
   pause; 
   pause; 
   exec("emote chews its mouthful of grass.", self); 
   pause; 
   pause; 
   exec("emote continues grazing.",self); 
   pause; 
   pause; 
   pause; 
   goto start; 
 
:fight: 
   heartbeat := PULSE_SEC*3; 
   while (self.position == POSITION_FIGHTING) pause; 
   exec("emote goes back to grazing again.",self); 
   heartbeat := PULSE_SEC*10; 
   goto start; 
 
} 
dilend /* sdoe_action */ 

end /* syneen_doe */ 
 
                                syneen_stag 
names {"syneen deer", "deer", "stag"} 
title "a Syneen stag" 
descr "A tall antlered deer is standing here." 
 
extra {} 
"This Deer is a of a proud intelligent race. It is quite tall, and has a set of antlers that could be dangerous if used in a fight. It has knowing eyes - this beast is not to be trifled with." 
 
extra {"antlers", "antler"} 
"The antlers have traces of velvet on them. The ends are very sharp." 
 
extra {"head"} 
"The head looks delicate. The eyes are quite large." 
 
extra {"eyes", "eye"} 
"The dark brown eyes glint as the deer moves its head." 
 
extra {"body"} 
"The body is lithe and well built. This animal looks like it could run extremely fast if it wanted to." 
 
extra {"legs","leg"} 
"The deer's legs are long, but in perfect proportion to its body." 
 
SYNEEN_DEER(SEX_MALE,78) 
special SFUN_RANDOM_ZONE_MOVE time 170 bits SFB_RANTIME 
special SFUN_AGGRES_REVERSE_ALIGN "$1n attacks the evil $3n!" time 100 bits SFB_RANTIME
flags {UNIT_FL_NO_TELEPORT} 
alignment +700 
money 3 SILVER_PIECE 
 
dilbegin sstag_action(); 
 
var 
   i    : integer; 
 
code { 
 
:init: 
   heartbeat := PULSE_SEC*15; 
 
   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight); 
:start: 
   wait(SFB_DONE,(activator.type==UNIT_ST_PC and (self.position!=POSITION_SLEEPING and self.position!=POSITION_RESTING))); 
   pause; 
   exec("emote tears at a bush with its antlers.", self); 
   pause; 
   pause; 
   pause; 
   exec("emote chews some grass.", self); 
   pause; 
   pause; 
   exec("emote spots a tasty plant and eats it.",self); 
   pause; 
   pause; 
   pause; 
   goto start; 
 
:fight: 
   heartbeat := PULSE_SEC*3; 
   while (self.position == POSITION_FIGHTING) pause; 
   exec("emote rubs its antlers along the grass to clean them after the fight.",self); 
   heartbeat := PULSE_SEC*10; 
   goto start; 
 
} 
dilend /* sstag_action */

end /* syneen_stag */ 
 
                                syneen_fawn 
names {"syneen deer", "deer", "fawn"} 
title "a Syneen fawn" 
descr "A young deer is playing here." 
 
extra {} 
"This young deer has a lighter coat than its older brothers and sisters. It is dabbled with light spots of fawn on its brown fur." 
 
extra {"head"} 
"The head looks delicate. The eyes are quite large." 
 
extra {"eyes", "eye"} 
"The dark brown eyes glint as the deer moves its head." 
 
extra {"body"} 
"The body is lithe and well built. This animal looks like it could run extremely fast if it wanted to." 
 
extra {"legs","leg"} 
"The deer's legs are long, but in perfect proportion to its body." 
 
SYNEEN_DEER(SEX_MALE,75) 
special SFUN_RANDOM_ZONE_MOVE time 120 bits SFB_RANTIME 
special SFUN_AGGRES_REVERSE_ALIGN "$1n attacks the evil $3n!" time 100 bits SFB_RANTIME
flags {UNIT_FL_NO_TELEPORT} 
alignment +700 
money 3 SILVER_PIECE 
 
dilbegin sfawn_action(); 
 
var 
   i    : integer; 
 
code { 
 
:init: 
   heartbeat := PULSE_SEC*6; 
 
   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight); 
:start: 
   wait(SFB_DONE,(activator.type==UNIT_ST_PC and (self.position!=POSITION_SLEEPING and self.position!=POSITION_RESTING))); 
   pause; 
   exec("emote bounds about the meadow playfully.", self); 
   pause; 
   pause; 
   pause; 
   exec("emote stops and stares at you with great curiosity in its eyes.", self); 
   pause; 
   pause; 
   exec("emote jumps, suddenly startled by something.",self); 
   pause; 
   pause; 
   pause; 
   goto start; 
 
:fight: 
   heartbeat := PULSE_SEC*3; 
   while (self.position == POSITION_FIGHTING) pause; 
   exec("emote shudders and looks like it wishes its mother was around more often.",self); 
   heartbeat := PULSE_SEC*10; 
   goto start; 
 
} 
dilend /* sfawn_action */


end /* syneen_fawn */ 
 
/* 
        END FIELD MOBS  
*/ 
 
 
/* 
        BEGIN FOREST MOBS 
*/ 
 
/* Grey Elk and Mucin. Grey Elk are a race of Ancient Deer. Mucin are like 
   giant boars. */ 
 
                                grey_elk_stag 
names {"grey elk stag", "grey elk", "elk", "stag"} 
title "the Grey Elk Stag" 
descr "A magnificent Grey Elk stands here, towering over you." 
 
extra {} 
"This animal is huge! You have never seen a deer as tall and strong as this one. The fur on its body is a silvery-grey colour that seems to shimmer if it moves. Its antlers are long and ancient, as if it has never shed them. From its eyes, a great intelligence radiates. This creature seems to be quite sentient. It doesn't flinch as you approach." 
 
extra {"antlers", "antler"} 
"The antlers are thick and sturdy to look at. This powerful beast could do great damage with them if it tried." 
 
extra {"head"} 
"The animal holds its head proudly, as if it knows how magnificent it is. It doesn't flinch or blink when you look at it." 
 
extra {"eyes", "eye"} 
"The dark brown eyes glint as the deer moves its head." 
 
extra {"body"} 
"The body is powerfully and perfectly built. It has a short main running down its throat under its neck." 
 
extra {"legs","leg"} 
"The deer's legs are long, but in perfect proportion to its body." 
 
GREY_ELK(SEX_MALE,85)
exp 110
NATURAL_DEF(WPN_KICK,ARM_HLEATHER)
flags {UNIT_FL_NO_TELEPORT} 
alignment +1000 
money 4 SILVER_PIECE 
 
special SFUN_TEAMWORK "grey_elk_hart" 
 
special SFUN_AGGRESSIVE "The Stag fears for his harem and attacks!" time 100 bits SFB_RANTIME

dilbegin estag_action(); 
 
var 
   i    : integer; 
 
code { 
 
:init: 
   heartbeat := PULSE_SEC*15; 
 
   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight); 
:start: 
   wait(SFB_DONE,(activator.type==UNIT_ST_PC and (self.position!=POSITION_SLEEPING and self.position!=POSITION_RESTING))); 
   pause; 
   exec("emote thrusts its antlers against a tree trunk.", self); 
   pause; 
   pause; 
   pause; 
   exec("emote gazes at you, unafraid.", self); 
   pause; 
   pause; 
   exec("emote holds its head proudly.", self); 
   pause; 
   pause; 
   pause; 
   goto start; 
 
:fight: 
   heartbeat := PULSE_SEC*3; 
   while (self.position == POSITION_FIGHTING) pause; 
   exec("emote cries out as it revels in the victory.", self); 
   heartbeat := PULSE_SEC*10; 
   goto start; 
 
} 
dilend /* estag_action */


end /* grey_elk_stag */ 
 
                                grey_elk_hart 
names {"grey elk hart", "grey hart", "elk", "hart"} 
title "a Grey Elk Hart" 
descr "A Grey Elk Hart stands here, watching you." 
 
extra {} 
"This deer is very large. It stands nigh on 7 and a half feet tall. It is of an ancient race which lived with the elves in their forest so long ago. These deer are one of the last remnants of the elves golden age left in this part of the world." 
 
extra {"head"} 
"The animal holds its head proudly, as if it knows how magnificent it is. It doesn't flinch or blink when you lo 
ok at it." 
 
extra {"eyes", "eye"} 
"The dark brown eyes glint as the deer moves its head." 
 
extra {"body"} 
"The body is powerfully and perfectly built. It has a short main running down its throat under its neck." 
 
extra {"legs","leg"} 
"The deer's legs are long, but in perfect proportion to its body." 
 
GREY_ELK(SEX_FEMALE,84) 
exp 105
flags {UNIT_FL_NO_TELEPORT} 
alignment +1000 
money 4 SILVER_PIECE 
 
special SFUN_RANDOM_ZONE_MOVE time 200 bits SFB_RANTIME 
special SFUN_AGGRES_REVERSE_ALIGN "$1n attacks the evil $3n!" time 100 bits SFB_RANTIME 

dilbegin ehart_action(); 
 
var 
   i    : integer; 
 
code { 
 
:init: 
   heartbeat := PULSE_SEC*7; 
 
   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight); 
:start: 
   wait(SFB_DONE,(activator.type==UNIT_ST_PC and (self.position!=POSITION_SLEEPING and self.position!=POSITION_RESTING))); 
   pause; 
   exec("emote nibbles on some low growing leaves.", self); 
   pause; 
   pause; 
   pause; 
   exec("emote looks through you as if you weren't there.", self); 
   pause; 
   pause; 
   exec("emote continues nibbling on the leaves.", self); 
   pause; 
   pause; 
   pause; 
   goto start; 
 
:fight: 
   heartbeat := PULSE_SEC*3; 
   while (self.position == POSITION_FIGHTING) pause; 
   exec("strut", self); 
   heartbeat := PULSE_SEC*10; 
   goto start; 
 
} 
dilend /* ehart_action */

end /* grey_elk_hart */ 
 
 
/* MUCIN - giant wild boar */ 
 
                                mucin_boar 
names {"mucin boar", "mucin", "boar"} 
title "a Boar Mucin" 
descr "A large boar is here, seemingly unaware of you." 
 
extra {} 
"This is a large wild boar, with sleek dark brown fur, mottled with lighter brown spots. It has beady black eyes on the sides of its head and 2 large tusks protruding from its mouth. It is a formidable beast." 
 
extra {"tusks", "tusk"} 
"The tusks seem to be ivory, but they are stained from whatever the boar was last eating or nosing through." 
 
extra {"head"} 
"The head is quite large in proportion to the body, and like all pigs, it has no neck. Its head is covered in that thick brown fur which seems to grow over all of its body." 
 
extra {"eyes", "eye"} 
"The eyes are black and they don't seem to reflect any light." 
 
extra {"body"} 
"The body is large, and tall, but then you have never seen a boar this big before." 
 
extra {"legs","leg"} 
"The legs hug the underside of the body." 
 
MUCIN(SEX_MALE,80) 
 
alignment +349 
money 3 SILVER_PIECE 
flags {UNIT_FL_NO_TELEPORT} 
special SFUN_RANDOM_ZONE_MOVE time 150 bits SFB_RANTIME 
 
dilbegin boar_action(); 
 
var 
   i    : integer; 
 
code { 
 
:init: 
   heartbeat := PULSE_SEC*15; 
 
   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight); 
:start: 
   wait(SFB_DONE,(activator.type==UNIT_ST_PC and (self.position!=POSITION_SLEEPING and self.position!=POSITION_RESTING))); 
   pause; 
   exec("emote grubs around in the dirt with its nose.", self); 
   pause; 
   pause; 
   exec("emote grunts as it searches for food.", self); 
   pause; 
   pause; 
   pause; 
   goto start; 
 
:fight: 
   heartbeat := PULSE_SEC*3; 
   while (self.position == POSITION_FIGHTING) pause; 
   exec("grunt", self); 
   heartbeat := PULSE_SEC*10; 
   goto start; 
 
} 
dilend /* boar_action */

end /* mucin_boar */ 
 
                                mucin_sow 
names {"mucin sow", "mucin", "sow", "boar"} 
title "a Sow Mucin" 
descr "A large sow is here, nosing around in the dirt." 
 
extra {} 
"This is a large wild boar sow. She is nosing around in the dirt beside the path here, trying to grub up something to eat probably. She doesn't have any tusks unlike the males of her species." 
 
extra {"head"} 
"The head is quite large in proportion to the body, and like all pigs, it has no neck. Its head is covered in t 
hat thick brown fur which seems to grow over all of its body." 
 
extra {"eyes", "eye"} 
"The eyes are black and they don't seem to reflect any light." 
 
extra {"body"} 
"The body is large, and tall, but then you have never seen a wild boar this big before." 
 
extra {"legs","leg"} 
"The legs hug the underside of the body." 
 
MUCIN(SEX_FEMALE,79) 
flags {UNIT_FL_NO_TELEPORT} 
alignment +349 
money 3 SILVER_PIECE 
 
special SFUN_RANDOM_ZONE_MOVE time 170 bits SFB_RANTIME 
 
dilbegin sow_action(); 
 
var 
   i    : integer; 
 
code { 
 
:init: 
   heartbeat := PULSE_SEC*13; 
 
   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight); 
:start: 
   wait(SFB_DONE,(activator.type==UNIT_ST_PC and (self.position!=POSITION_SLEEPING and self.position!=POSITION_RESTING))); 
   pause; 
   exec("emote snuffles. Maybe it has found something to eat?", self); 
   pause; 
   pause; 
   exec("emote uses its feet to aid the search.", self); 
   pause; 
   pause; 
   pause; 
   goto start; 
 
:fight: 
   heartbeat := PULSE_SEC*3; 
   while (self.position == POSITION_FIGHTING) pause; 
   exec("emote grunts loudly.", self); 
   heartbeat := PULSE_SEC*10; 
   goto start; 
 
} 
dilend /* sow_action */

end /* mucin_sow */ 
 
/*  
    END FOREST MOBS 
*/ 
 
 
 
/*  
    BEGIN Lake Mobs (Fog and elf statue)  
*/ 
 
                                fog_ele 
names {"fog elemental", "entity", "fog", "elemental"} 
title "an entity of fog" 
descr "A huge bank of fog is hanging over the water here." 
 
extra {} 
"As far as fog goes, you have never seen any as thick or menacing as this - it seems to engulf everything. It seems to course with evil and to exude an almost palpable displeasure at your prescence here. Could it be alive?" 

FOG(81)
 
alignment -1000 
 
money 3 SILVER_PIECE 
flags {UNIT_FL_NO_TELEPORT} 

dilcopy fog_move@seren();
 
special SFUN_AGGRESSIVE "$1n engulfs $3n!" time 100 bits SFB_RANTIME 
 
end /* fog_ele */ 
 
                                darkelf_statue 
names {"darkelf statue", "statue", "darkelf", "elf", "prince"} 
title "Statue of a cruelly evil Darkelf" 
descr "A Statue of a Darkelf prince stands on the tiny island." 
 
extra {} 
"This statue is made from Black Crystal. It depicts a darkelf prince standing tall and proud, with his hands on his sword hilt. There is a menacing look in his eyes, which seem to glint as if the statue is watching you as your boat travels along." 
 
extra {"sword hilt", "sword", "hilt"} 
"The sword is part of the statue, as is the hilt. Both are made from dark crystal." 
 
race RACE_GOLEM 
level 85 
sex SEX_MALE 
height 600 
weight 800 
NATURAL_DEF(WPN_FIST, ARM_PLATE) 
alignment -1000 
MSET_ABILITY(30,20,1,20,20,0,9,0) 
MSET_WEAPON(10,10,5,10,10,5) 
MSET_SPELL(5,0,0,0,0,0,0,0,40,5,0) 
exp 105 

money 3 SILVER_PIECE 
flags {UNIT_FL_NO_TELEPORT}
dilcopy combat_mag@function("lightning bolt","",0,1);
 
special SFUN_AGGRESSIVE "$1n comes alive and attacks $3n!" time 200 bits SFB_RANTIME 

dilcopy steal_block1@seren();
 
end /* darkelf_statue */ 
 
 
/* 
    ORACLE in the Tower 
*/ 
 
				oracle
names {"Oracle of Serenity", "oracle", "light", "globe"}
title "the Oracle of Serenity"
descr "A globe of brilliant orange light hangs motionless above the stone slab."


extra {}
"This is the source of the light you saw below and from outside. It is an orange globe of light, with a yellow centre, hanging above the stone slab. It gives off that eerie red light and it seems to be rotating in the air. There doesn't seem to be any support to hold it in the air the way it is. This is the legendary Oracle of Odin. Legend has it, Odin, as a gift to the elves who first lived here, before the dark times, cast a bolt of lightning down to earth and as it was about to hit the ground, it flowed into one great globe of light. The elves took th
e oracle and set it here, in this tower, safe from all those that would use it for evil. The Oracle is one of impartiality, it tells the truth, foretells the future. It doesn't lie, or twist things. Be warned, the oracle tells the future and the present as it sees them and not as others see it."

race RACE_ELEMENTAL_AIR
level 85
sex SEX_NEUTRAL
height 180
weight 0
NATURAL_DEF(WPN_CRUSH, ARM_PLATE)
alignment 0
MSET_ABILITY(0,15,0,30,40,0,15,0)
MSET_WEAPON(10,10,5,10,10,5)
MSET_SPELL(5,0,0,0,0,0,0,0,40,5,0)

dilcopy combat_mag@function("lightning bolt","",0,1);
dilcopy kill_block@seren();
dilcopy spell_block@seren();

dilbegin oracle_talk(); /* Oracle of Serenity blurb */

var
   pc    : unitptr;
   item  : unitptr;
   qname : extraptr;
   i : integer;
   result : integer;
code
{

:init:
   heartbeat:=PULSE_SEC*10;
i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,in_fight); 

:start:
   wait(SFB_DONE,(activator.type==UNIT_ST_PC));
   pc:=activator;
   secure(pc,lostem);

   if(ORACLE_VISITED in pc.quests) goto already;

   pause;
   exec("emote glows brightly.", self);
   pause;
   act("A voice sounds inside your head, and you begin to make " +
       "out words.",A_ALWAYS,pc,null,null,TO_CHAR);
   pause;
   exec("say Welcome " + pc.name + ". I am the Oracle of Serenity " +
        "and I shall be your guide for a while.", self); 
   pause;
   exec("emote begins to pulsates rapidly and then it subsides.",self); 
   pause;
   exec("say " + pc.name + ", you have been deemed worthy to " +
        "see time through me. However, you are one who can " +
        "only dwell in the present.",self); 
   pause;
   exec("say I will show you the past, and the present, and " +
        "help you choose your future." ,self); 
   pause;
   act("A picture, like a window, coalesces in the globe of light " +
       "and you see fair elven people doing battle...",
       A_ALWAYS,pc,null,null,TO_ALL);
   pause;
   act("A race of elves, tainted with evil is cast down, and the " +
       "scenes depict the recovery of the elven race after the " +
       "times.",A_ALWAYS,pc,null,null,TO_ALL);
   pause;
   act("A young elf lord leads his people into their new future " +
       "but he must first rid them of their bain, the evil " +
       "sword, Manum Altur, elf-slayer.",A_ALWAYS,pc,null,null,TO_ALL);
   pause;
   act("You catch a glimpse of the sword, cruel, and evilly " +
       "beautiful. The elf lord bears it in a search for one who " +
       "can guard it from the evil ones who would use it against " +
       "the elves again.",A_ALWAYS,pc,null,null,TO_ALL);
   pause;
   act("After a long journey, the elf lord finds a great reptile " +
       "like none you have ever seen - it is shaped like a " +
       "centaur, but is completely reptilian, towering above the " +
       "young elf.",A_ALWAYS,pc,null,null,TO_ALL);
   pause;
   act("The creature accepts the sword and he keeps it. The elf " +
       "leads his people out of that land to a new one, far away " +
       "in order to leave the past behind.",A_ALWAYS,pc,null,null,TO_ALL);
   pause;
   act("The great centauroid reptile then begins its long task of " +
       "keeping the sword out of the hands of the evil ones.",
        A_ALWAYS,pc,null,null,TO_ALL);
   pause;
   exec("emote pulsates rapidly, and the window on time closes " +
        "before your eyes." ,self); 
   pause;
   exec("say That was countless generations ago, when the world " +
        "was still young. The elves went into decline, but the " +
        "Zoat, for that was the creature you saw, lives yet, " +
        "still carrying its burden." ,self); 
   pause;
   exec("say But now, the Zoat thinks he may have found a solution " +
        "- he may be able to destroy Manum Altur and free himself " +
        "from his task, but he needs a brave adventurer to help " +
        "him do so." ,self);
   pause;
   exec("say That is why I have told you of his plight. You can " +
        "help him, all you need is my blessing, and I give it " +
        "freely.", self);
   addextra(pc.quests,{ORACLE_VISITED},""); /* Seen Oracle Tag */
   pause;
   act("A portal forms in the Oracle and you can see a part of " +
       "the Forest of Serenity through it.",
       A_ALWAYS,pc,null,null,TO_CHAR);
   pause;
   exec("say To get out, enter me.", self);
   heartbeat := PULSE_SEC*10;
   pause;
   exec("enter oracle", pc);
   heartbeat := PULSE_SEC*5;
   pause;
   unsecure(pc);
   goto start;

:already:
   exec("say I have already seen you. Begone!", self);
   exec("enter oracle", pc);
   pause;
   unsecure(pc);
   goto start;

:in_fight:  /* DO NOTHING UNTIL FIGHT IS OVER */
   heartbeat:=PULSE_SEC*2;
   while(self.position==POSITION_FIGHTING) pause;
   heartbeat:=PULSE_SEC*5;
   goto start;

:lostem:
unsecure(pc);
goto start;
}
dilend /* Oracle dil */

end /* oracle */


/*             TEMPLE MOBS              Olayans, priests, horses                   */

                                heart_olayan /* Olayan with heart for Quest */
names {"olayan"}
title "an Olayan"
descr "A silent Olayan stands here in its unending vigil."

extra {}
"This great creature is vaguely humanoid in shape, but seems to be made up entirely of a hard clay, or rock-like substance. It stands almost three metres tall. A servant of Tyr, the God of War, this awesome entity is unarmed, except for its great hammer like fists."

extra {"fists", "fist"}
"The Olayan's fists are like huge hammers of stone. They look well able to crush you into the ground if they so wished."

OLAYAN(85)

money 4 SILVER_PIECE

special SFUN_TEAMWORK "olayan"

special SFUN_AGGRES_REVERSE_ALIGN "$1n pounds the evil $3n!!!" time 100 bits SFB_RANTIME

dilcopy steal_block2@seren();

end /* Heart Olayan */

				guard_olayan
names {"olayan"} 
title "an Olayan" 
descr "A silent Olayan stands here in its unending vigil." 
 
extra {} 
"This great creature is vaguely humanoid in shape, but seems to be made up entirely of a hard clay, or rock-like substance. It stands almost three metres tall. A servant of Tyr, the God of War, this awesome entity is unarmed, except for its great hammer like fists." 
 
extra {"fists", "fist"}
"The Olayan's fists are like huge hammers of stone. They look well able to crush you into the ground if they so wished."

OLAYAN(85)

money 4 SILVER_PIECE

special SFUN_TEAMWORK "olayan"

dilcopy olayan_action@seren();

end /* guard_olayan */

				patrol_olayan
names {"olayan"} 
title "an Olayan" 
descr "A silent Olayan patrols the area to find any intruders." 
 
extra {} 
"This great creature is vaguely humanoid in shape, but seems to be made up entirely of a hard clay, or rock-like substance. It stands almost three metres tall. A servant of Tyr, the God of War, this awesome entity is unarmed, except for its great hammer like fists." 
 
extra {"fists", "fist"}
"The Olayan's fists are like huge hammers of stone. They look well able to crush you into the ground if they so wished."

OLAYAN(84)

money 4 SILVER_PIECE

special SFUN_TEAMWORK "olayan"
special SFUN_RANDOM_ZONE_MOVE time 200 bits SFB_RANTIME

dilcopy olayan_action@seren();

end /* patrol_olayan */


/* HORSES */

				stallion
names {"stallion", "horse"} 
title "a stallion" 
descr "A proud stallion is standing here." 
 
extra {} 
"A fine horse, this stallion is quite tall and it holds its head in pride. It has brown hair, a fine main, and a great black tail. The priests obviously keep the horses for when they need to send a message or must go on errands into the populated regions of the world." 

extra {"main"}
"The main of the horse is fine and thick. It runs down the back of its neck on to the back."

extra {"tail"}
"The tail is fine and wirey, consisting of the same black hair as the main."

TEMPLE_HORSE(SEX_MALE,76)

alignment +350

money 3 SILVER_PIECE

special SFUN_RANDOM_ZONE_MOVE time 150 bits SFB_RANTIME

dilbegin stallion_action(); 
 
var 
   i    : integer; 
 
code 
{ 
:init: 
   heartbeat := PULSE_SEC*10; 
 
   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight); 
:start: 
   wait(SFB_DONE,activator.type==UNIT_ST_PC); 
   pause; 
   exec("emote scrapes the ground with its feet.",self); 
   pause; 
   pause; 
exec("emote neighs loudly.",self); 
   pause; 
   pause; 
   pause;
   pause;
   goto start; 
 
:fight: 
   heartbeat := PULSE_SEC*3; 
   while (self.position == POSITION_FIGHTING) pause; 
   exec("emote neighs in pride.",self); 
   pause; 
   heartbeat := PULSE_SEC*10;
   goto start; 
 
} 
dilend /* stallion_action */ 


end /* stallion */

				mare
names {"mare", "horse"} 
title "a mare" 
descr "A stately grey mare is standing here." 
 
extra {} 
"This horse's hair is a mottled grey and black colour. It is very beautiful, and such a beast would be worth a great deal of money at market. Its eyes are a deep brown colour, and they shine when you look into them. It has a dark brown main and tail." 

extra {"eyes", "eye"}
"The mare's eyes sparkle as the light catches them. They are a deep brown colour and when you look into them, they are like wells."

extra {"main"}
"The main of the horse is fine and thick. It runs down the back of its neck on to the back."

extra {"tail"}
"The tail is fine and wirey, consisting of the same black hair as the main."

TEMPLE_HORSE(SEX_FEMALE,75)

alignment +350

money 3 SILVER_PIECE

special SFUN_RANDOM_ZONE_MOVE time 180 bits SFB_RANTIME

dilbegin mare_action(); 
 
var 
   i    : integer; 
 
code 
{ 
:init: 
   heartbeat := PULSE_SEC*11; 
 
   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight); 
:start: 
   wait(SFB_DONE,activator.type==UNIT_ST_PC); 
   pause; 
   exec("emote whinnies loudly.",self); 
   pause; 
   pause; 
exec("emote gazes at you in great curiosity.",self); 
   pause; 
   pause; 
   pause;
   pause;
   goto start; 
 
:fight: 
   heartbeat := PULSE_SEC*3; 
   while (self.position == POSITION_FIGHTING) pause; 
   exec("strut",self); 
   pause; 
   heartbeat := PULSE_SEC*11;
   goto start; 
 
} 
dilend /* mare_action */

end /* mare */

/* PRIESTS IN THE TEMPLE */

                                grunt_priest
names {"priest", "man"}
title "an Odinist priest"
descr "A hooded priest is here."

extra {}
"This priest is heavily robed, and a large hood covers his face. He walks with his arms folded within the sleeves of his brown robes. He is about two metres tall and he seems to move in a strange state of grace."

extra {"hood"}
"The hood covers the priest's face, preventing you from telling much about him."

PRIEST(SEX_MALE, 82)

money 3 SILVER_PIECE

special SFUN_RANDOM_ZONE_MOVE time 300 bits SFB_RANTIME

dilbegin grunt_action();

var
   i    : integer;
   pc   : unitptr;
code
{
:init:
   heartbeat := PULSE_SEC*11;

   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight);
:start:
wait(SFB_DONE,((activator.type==UNIT_ST_PC) and (self.position!=POSITION_SLEEPING) and ((command("north")) or (command("west")) or (command("east")) or (command("south"))) and (self.position!=POSITION_SLEEPING)));   

pc := activator;
secure(pc,lostem);
   pause;
   exec("examine " + pc.name,self);
   pause;
   pause;
   pause;
   pause;
   pause;
   pause;
   goto lostem;

:fight:
   heartbeat := PULSE_SEC*3;
   while (self.position == POSITION_FIGHTING) pause;
   exec("emote blesses himself.",self);
   pause;
   heartbeat := PULSE_SEC*11;
   goto lostem;
:lostem:
unsecure(pc);
goto start;

}
dilend /* grunt_action */

dilcopy combat_mag@function("harm","heal",10,1);

end /* grunt_priest */

                                guard_priest
names {"priest", "man", "guard"}
title "an Odinist priest"
descr "A young priest is here, on guard duty."

extra {}
"This priest's hood is not over his head. He is a handsome man, maybe thirty seaons old. He has shoulder length hair tied back behind his head. There is a stern look of wisdom in his eyes, and his brow bears the marks of the hardships he has had to endure."

PRIEST(SEX_MALE, 83)

money 3 SILVER_PIECE

special SFUN_RANDOM_ZONE_MOVE time 250 bits SFB_RANTIME

dilbegin guard_action();

var
   i    : integer;
   pc   : unitptr;
code
{
:init:
   heartbeat := PULSE_SEC*8;

   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight);
:start:
wait(SFB_DONE,((activator.type==UNIT_ST_PC) and (self.position!=POSITION_SLEEPING) and ((command("north")) or (command("west")) or (command("east")) or (command("south"))) and (self.position!=POSITION_SLEEPING)));
pc := activator;
secure(pc,lostem);
   pause;
   exec("say Observe our rules while you are here " + pc.name + ".",self);
   pause;
   exec("examine " + pc.name,self);
   pause;
   pause;
   pause;
   pause;
   goto lostem;

:fight:
   heartbeat := PULSE_SEC*3;
   while (self.position == POSITION_FIGHTING) pause;
   exec("say May Odin have mercy on your soul!",self);
   pause;
   heartbeat := PULSE_SEC*8;
   goto lostem;
:lostem:
unsecure(pc);
goto start;
}
dilend /* guard_action */

dilcopy combat_mag@function("harm","heal",10,1);

end /* guard_priest */

                                cook_priest
names {"priest", "man", "cook"}
title "the Temple Cook"
descr "A jolly old priest is here, pottering about the kitchen."

extra {}
"This priest is older than most, but he has a look of happiness and jolliness written all over his face. He is busy trying to prepare the next meal for the rest of the priests."

PRIEST(SEX_MALE, 83)

money 3 SILVER_PIECE

dilbegin cook_action();

var
   i    : integer;
   pc   : unitptr;
code
{
:init:
   heartbeat := PULSE_SEC*6;

   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight);
:start:
wait(SFB_DONE,((activator.type==UNIT_ST_PC) and (self.position!=POSITION_SLEEPING) and ((command("north")) or (command("west")) or (command("east")) or (command("south"))) and (self.position!=POSITION_SLEEPING)));

pc := activator;
secure(pc,lostem);
   pause;
   exec("say Hello " + pc.name + ". Welcome to my kitchen.",self);
   pause;
   exec("say I really should be more careful with my ingredients you know.",self);
   pause;
   pause;
   exec("say Now how many cloves of garlic did I put in there...",self);
   pause;
   exec("ponder",self);
   pause;
   exec("say Well at least we won't have any vampires in the Temple.",self);
   pause;
   exec("giggle",self);
   pause;  
   exec("say I really shouldn't speak of such evil things though.",self);
   pause; 
   exec("emote blesses himself.",self);
   pause;
   exec("say Oh well, on with the work",self);
   pause;
   pause;
   pause;
   pause;
   pause;
   pause;
   pause;
   pause;
  goto lostem;

:fight:
   heartbeat := PULSE_SEC*3;
   while (self.position == POSITION_FIGHTING) pause;
   exec("say Oh I do wish they wouldn't be so violent.",self);
   pause;
   heartbeat := PULSE_SEC*8;
   goto lostem;
:lostem:
unsecure(pc);
goto start;
}
dilend /* cook_action */

dilcopy combat_mag@function("harm","heal",10,1);

end /* cook_priest */

                                high_priest
names {"Father Ziehl", "Ziehl", "high priest", "priest", "man"}
title "High Priest Ziehl"
descr "The High Priest, Father Ziehl is working here."

extra {}
"This man is very old, but he looks kind, and full of life. His head is almost completely bald, probably from age as opposed to baldness. There is a look of wisdom in his eyes which you have never seen in another before. This man must be very old indeed. He looks upon you with a look of friendship in his eyes - he means you no harm. He is the Master of the Coven."

PRIEST(SEX_MALE, 85)

dilcopy combat_mag@function("harm","heal",25,1);

money 4 SILVER_PIECE

/*
    Ziehl wants help contacting Odin. He needs the following objects: 
    an olayan hearstone, a dreamstone, a hand of black crystal, and a 
    glowing helmet from the Garden of time. In return, he gives two
    Serenity Earstones (earrings) which give +1 str +1 cha each.
*/

dilcopy busy_questor@seren();

dilbegin ziehl_quest(); /* High Priest's Quest */

var
   pc    : unitptr;
   item  : unitptr;
   qname : extraptr;
   i  : integer;
code
{

:init:
   heartbeat:=PULSE_SEC*5;

i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,in_fight); 

:start:
   wait(SFB_DONE,((activator.type==UNIT_ST_PC) or ((target==self) and (command("give")) and (activator.type==UNIT_ST_PC))));
   pc:=activator;
   secure(pc,lost_pc);

   if ((command("give")) and (target==self)) goto checkitem1;  
    
   if(COVEN_QUEST_ONGOING in pc.quests)  goto start;
   if(COVEN_QUEST_FINISHED in pc.quests) goto start;

   pause;
   exec("examine " + pc.name, self);
   pause;
   exec("smile " + pc.name, self);
   pause;
   exec("emote ponders deeply what to do.",self); 
   pause;
   exec("say Hello young " + pc.name + ", heh, well almost all are " +
        "young to me you know.",self); 
   pause;
   exec("say I am one of the founding fathers of the Order, the last " +
        "one left in this life don't you know." ,self); 
   pause;
   exec("say I haven't ventured outside the Temple for a long time " +
        "and since Tyr gave us the gift of the Olayans, Odin's Temple " +
        "has never been so peaceful." ,self); 
   pause;
   exec("say Speaking of Tyr, I wonder if you could help me with " +
        "something." ,self); 
   pause;
   exec("smile " + pc.name,self);
   pause;
   exec("say Tyr is the guardian of our Temple you see. He was in " +
        "bad favour with Odin once, and so he decided to give us " +
        "a gift in order to placate the mighty Skyfather.", self); 
   pause;
   exec("say That's where we got the Olayans, but now I'm babbling, " +
        "because I already said that, didn't I!", self);
   pause;
   exec("emote smiles and his eyes sparkle.", self);
   pause;
   exec("say Let me get the the nub of the problem. The Olayans were " +
        "supposed to be our guardians and to obey my will, or that of " +
        "my successors.", self);
   pause;
   exec("say But you see, they won't do what I'm telling them sometimes " +
        "and that's very frustrating when a large mountain of rock is " +
        "standing in your way, for that basically is what an Olayan is.",
         self);
   pause;
   exec("say Talorus thinks it's because the Olayans are sleepy and " +
        "losing their contact with Tyr and I have to say that I agree " +
        "with him.", self);
   pause;
   exec("say So I've decided to try and send a 'message', if you will, " +
        "to Tyr telling him of our plight - our prayers to him go " +
        "unanswered you see.", self);
   pause;
   exec("say To accomplish this, I need some items to bind the 'message' " +
        "to, in order to send it.", self);
   pause;
   exec("say NOD if you will help me, or SHAKE if you would prefer " +
        "not to.", self);
   wait(SFB_DONE,((command("nod") or command("shake")) and (activator==pc)));
   if (command("shake"))
   {
      goto rejection;
   }

   addextra(pc.quests,{COVEN_QUEST_ONGOING},""); /* My aren't we gullible */
   exec("say Thank you child of Odin!", self); 
   pause;

/* Ok, here's what I want */
   exec("say I need you to bring me the following items: ", self); 
   pause;
   exec("say There are four things:", self); 
   pause;
   exec("say In order to attune the 'message' for it to be sent to Tyr, " +
        "I need the heartstone of an Olayan.", self); 
   pause;
   exec("say Secondly, to get his 'attention' so to speak, I need an item " +
        "of old evil, one of the last remnants of the evil that lived " +
        "south of here should do nicely.", self);
   pause;
   exec("say Thirdly, I need a dreamstone, for it is in a dream that the " +
        "'message' shall be sent.", self); 
   pause;
   exec("say And finally, I need the helmet from a godly statue, which " +
        "I must wear to dream the 'message'.", self); 
   pause;
   exec("say I will reward you well when your bring these things to me", 
        self); 
   pause;
   exec("wave " + pc.name, self);
   unsecure(pc);
   goto start;

:rejection:
   unsecure(pc);
   exec("sigh", self);
   pause;
   exec("say We must look to another to fulfill the quest.", self);
   heartbeat := PULSE_SEC*20;
   pause;
   heartbeat := PULSE_SEC*5;
   goto start;

:checkitem1:
   if(COVEN_QUEST_ONGOING in pc.quests) goto checkitem2;
   exec("say I don't need this " + pc.name + ", thanks all the same." , self);
   pause;
   exec("drop " + medium.name, self);
   unsecure(pc);
   goto start;

:checkitem2:
   if((medium.title=="a heartstone") and 
      ("heartstone" in medium.names))
   {
      if("olayheart" in pc.quests)
      {
         exec("say You already gave me one of these.", self);
         exec("give " + medium.name + " " + activator.name, self);
      }
      else
      {
          destroy(medium); /* Tick */

          qname:=COVEN_QUEST_ONGOING in pc.quests;
          addstring(qname.names, "olayheart");
          exec("say Thank you " + pc.name + ". I'll use this to tune " +
               "the dream.", self);
      }
   }
   else if((medium.title=="a hand made from Black Crystal") and 
           ("statue hand" in medium.names))
   {
      if("ghand" in pc.quests)
      {
         exec("say I already have a thing of evil from you.", self);
         exec("give " + medium.name + " " + activator.name, self);
      }
      else
      {
         destroy(medium); /* Tick */

         qname:=COVEN_QUEST_ONGOING in pc.quests;
         addstring(qname.names, "ghand");
         exec("say This will indeed get Tyr's attention.", self);
      }
   }
   else if((medium.title=="A Glowing helmet") and 
           ("helmet" in medium.names))
   {
      if("ghelmg" in pc.quests)
      {
         exec("say I only have one head you know!", self);
         exec("give " + medium.name + " " + activator.name, self);
      }
      else
      {
         destroy(medium); /* Tick */

         qname:=COVEN_QUEST_ONGOING in pc.quests;
         addstring(qname.names, "ghelmg");
         exec("say Wearing this, I can dream the dream for Tyr.", self);
      }
   }
   else if((medium.title=="a &c+rd&c+gr&c+ye&c+ba&c+mm&c+cs&c+rt&c+go&c+yn&c+be&cw") and 
           ("dreamstone" in medium.names))
   {
      if("gdstone" in pc.quests)
      {
         exec("say I have already recieved this item from you.",self);
         exec("give " + medium.name + " " + activator.name, self);
      }
      else
      {
         destroy(medium);
         qname:=COVEN_QUEST_ONGOING in pc.quests;
         addstring(qname.names, "gdstone");
         exec("say The source of the dream.", self);
      }
   }
   else
   {
      exec("say I didn't ask for this.", self);
      exec("drop " + medium.name, self);
     }
:check_quest:
   if(("olayheart" in pc.quests) and
      ("ghand" in pc.quests) and
      ("ghelmg" in pc.quests) and
      ("gdstone" in pc.quests)) goto all_got;
   unsecure(pc);
   goto start;

:all_got:  /* REWARD & FINISH */
   pause;
   exec("say That is all of the items! Thank you " + pc.name + ".", self); 
   pause;
   exec("say I can now use these to contact Tyr.", self); 
   pause;
   exec("emote puts the items inside his robes and smiles happily.", self);
   pause;
   exec("say Now for your reward.", self); 
   pause;
   exec("say In return for your great service to my order, I give you these, " +
        "the earstones of Serenity. Wear them as you would earrings and " +
        "they will aid your abilities.", self); 
   pause;
   item:=load("earstone@seren");  
   exec("give " + item.name + " " + pc.name, self);   
   item:=load("earstone@seren");  
   exec("give " + item.name + " " + pc.name, self);   
   exec("drop " + item.name, self);  /* in case they can't carry them */
   exec("drop " + item.name, self);
   subextra(pc.quests, COVEN_QUEST_ONGOING);
   addextra(pc.quests, {COVEN_QUEST_FINISHED}, "");
   experience(2500,pc);
   pause;
   exec("emote smiles at you.", self);
   pause;
   exec("say Goodbye " + pc.name + ", thank you for helping us.", self);
   pause;
   exec("wave " + pc.name, self);      
   unsecure(pc);
   goto start;

:in_fight:  /* DO NOTHING UNTIL FIGHT IS OVER */
   heartbeat:=PULSE_SEC*2;
   while(self.position==POSITION_FIGHTING) pause;
   heartbeat:=PULSE_SEC*5;
   goto start;

:lost_pc:
   unsecure(pc);
   pause;
   pause;
   goto start;
}
dilend /* Ziehl Quest */

end /* high_priest */

                                steward_priest
names {"Brother Talorus", "Talorus", "steward priest", "steward", "priest", "man"}
title "Talorus the Steward"
descr "Brother Talorus, the Steward of the Temple, is here."

extra {}
"Brother Talorus looks after the day-to-day running of the Temple. He makes most of the decisions, and only troubles Father Ziehl with the most important business. Talorus is the life of the Temple. He looks to be a middle-aged man, perhaps fourty five years old. He has a full head of hair and a warm, but serious, smile. He doubles as the temple mail-man."

PRIEST(SEX_MALE, 84)

special SFUN_POSTMAN

dilcopy combat_mag@function("harm","heal",25,1);

money 4 SILVER_PIECE

dilbegin steward_action();

var
   i    : integer;
   pc   : unitptr;
code
{
:init:
   heartbeat := PULSE_SEC*5;

   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight);
:start:
wait(SFB_DONE,((activator.type==UNIT_ST_PC) and (self.position!=POSITION_SLEEPING) and ((command("north")) or (command("west")) or (command("east")) or (command("south"))) and (self.position!=POSITION_SLEEPING)));
pc := activator;
secure(pc,lostem);
   pause;
   exec("say Hello " + pc.name + ". Is there any way in which I can help you?",self);
   pause;
   exec("smile " + pc.name,self);
   pause;
   exec("say I'm the Steward of this Temple, and I look after the day to day running of it. I answer only to the High Priest.", self);
   pause;
   exec("say So you see, if you have any problems, I'm here to help you.", self);
pause;
   exec("wave " + pc.name,self);
pause;
   exec("say And please, don't disturb anything in the Temple.", self);
   pause;
   pause;
   pause;
   pause;
   goto lostem;

:fight:
   heartbeat := PULSE_SEC*3;
   while (self.position == POSITION_FIGHTING) pause;
   exec("sigh",self);
   pause;
   exec("say There goes another one.",self);
   pause;
   heartbeat := PULSE_SEC*5;
   goto lostem;
:lostem:
unsecure(pc);
goto start;
}
dilend /* steward_action */

end /* steward_priest */

                                scribe_priest
names {"Brother Darcher", "Darcher", "scribe priest", "scribe", "priest", "man", "Dave"}
title "Darcher the Scribe"
descr "Brother Darcher, the Scribe, is working here."

extra {}
"This man is old and bent from spending years over his work. He is quite small compared to the other priests you have seen. He is the Temple Scribe and spends many a night pouring over his work, as he slowly and steadily illuminates the manuscript and copies the texts of the Coven."

PRIEST(SEX_MALE, 83)

money 3 SILVER_PIECE

dilbegin scribe_action();

var
   i    : integer;
   pc   : unitptr;
code
{
:init:
   heartbeat := PULSE_SEC*8;

   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight);
:start:
wait(SFB_DONE,((activator.type==UNIT_ST_PC) and (self.position!=POSITION_SLEEPING) and ((command("north")) or (command("west")) or (command("east")) or (command("south"))) and (self.position!=POSITION_SLEEPING)));
pc := activator;
secure(pc,lostem);
   pause;
   exec("say Please " + pc.name + ", I'm trying to work. I don't wish to be disturbed.",self);
   pause;
   pause;
   exec("say Please go away " + pc.name + "!",self);
   pause;
   exec("emote sighs over his work.", self);
   pause;
   exec("emote painstakingly illuminates a large letter on the page.", self);
   pause;
   pause;
   pause;
   goto lostem;

:fight:
   heartbeat := PULSE_SEC*3;
   while (self.position == POSITION_FIGHTING) pause;
   exec("say May the afterlife be kinder to you!",self);
   pause;
   heartbeat := PULSE_SEC*8;
   goto lostem;
:lostem:
unsecure(pc);
goto start;

}
dilend /* scribe_action */


end /* scribe_priest */

                                initiate
names {"young initiate", "initiate"}
title "the Initiate"
descr "A young initiate of the Order is here."

extra {}
"This young man is a new addition to the Order. He has not yet been fully initiated into the Coven, because he is still trying to adjust to the way of life here in the Temple. A life of abstanance and chastity is a hard one to live, and he has to become used to the life and be happy with it before he will become a full priest."

PRIEST(SEX_MALE, 82)

money 3 SILVER_PIECE

dilbegin initiate_action();

var
   i    : integer;
   pc   : unitptr;
code
{
:init:
   heartbeat := PULSE_SEC*8;

   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight);
:start:
wait(SFB_DONE,((activator.type==UNIT_ST_PC) and (self.position!=POSITION_SLEEPING) and ((command("north")) or (command("west")) or (command("east")) or (command("south"))) and (self.position!=POSITION_SLEEPING)));
pc := activator;
secure(pc,lostem);
   pause;
   exec("say Hi " + pc.name + ". Are you joining the order too?", self);
   pause;
   exec("examine " + pc.name,self);
   pause;
   exec("say You don't look like the priest-type.", self);
   pause;
   exec("say Oh well, good luck.", self);
   pause;
   pause;
   pause;
   goto lostem;

:fight:
   heartbeat := PULSE_SEC*3;
   while (self.position == POSITION_FIGHTING) pause;
   exec("say I hope his next life is better.",self);
   pause;
   heartbeat := PULSE_SEC*8;
   goto lostem;
:lostem:
unsecure(pc);
goto start;

}
dilend /* initiate_action */

end /* initiate */

                                stable_priest
names {"Brother Isaac", "Isaac", "priest", "man"}
title "Brother Isaac, the Stable Master"
descr "A young priest is standing here with a smile on his face."

extra {}
"Brother Isaac is the priest appointed to look after the Temple Stables and the well being of the horses that live in them. He is a youngish man, perhaps thirty five years of age, with short brown hair. He seems to be a good man."

PRIEST(SEX_MALE, 83)

dilcopy combat_mag@function("harm","heal",25,1);

money 3 SILVER_PIECE

dilbegin stpriest_action();

var
   i    : integer;
   pc   : unitptr;
code
{
:init:
   heartbeat := PULSE_SEC*9;

   i := interrupt(SFB_COM,self.position==POSITION_FIGHTING,fight);
:start:
wait(SFB_DONE,((activator.type==UNIT_ST_PC) and (self.position!=POSITION_SLEEPING) and ((command("north")) or (command("west")) or (command("east")) or (command("south"))) and (self.position!=POSITION_SLEEPING)));
pc := activator;
secure(pc,lostem);
   pause;
   exec("emote stops what he is doing.", self);
   pause;
   exec("examine " + pc.name,self);
   pause;
   exec("say Hello " + pc.name + ".", self);
   pause;
   exec("say I am the Stable master. The stable is below us.", self);
   pause;
   exec("say If you care to have a look, just go down the stairs outside.", self);
   pause;
   exec("wave " + pc.name,self);
   pause;
   pause;
   pause;
   pause;
   goto lostem;

:fight:
   heartbeat := PULSE_SEC*3;
   while (self.position == POSITION_FIGHTING) pause;
   exec("say If only there had been another way.",self);
   pause;
   heartbeat := PULSE_SEC*8;
   goto lostem;
:lostem:
unsecure(pc);
goto start;

}
dilend /* Stable Priest */

end /* stable_priest */

/* END real mobs */ 
 

/* +++++++++++++++++++++++++++++++++++++++++++++++++
++++++++++++  O B J E C T S   S E C T I O N   ++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++*/
 
%objects 
 

/* REAL OBJECTS */ 

/* Tool for colour items  - gods only */

colour_object
names {"colour object", "colour", "object"}
title "a &c+rc&c+yo&c+gl&c+bo&c+mu&c+cr&cw object"
descr "A colourful object lies on the ground here."

extra {}
"   This object is for adding colour titles and names to objects. With it, you can also execute any command in colour. In the future it will also give colour titles to player characters too, but for the near future that facility is disabled. &c+rPlease use restraint in your colour schemes - we wish to avoid gawdy 
titles/names&cw. The syntax for its use is as follows:
&l

   To add a colour title to an object: 

                      ctitle objectname title
                  eg: ctitle enforcer &c+m&&&cwc+bMy &c+m&&&cwc+ggreen &c+m&&&cwc+raxe

   To add a colour name (this should be done as little as possible because 
   weapons may disrupt fight sequence colours) to an object:

                      cname objectname newname
                  eg: cname enforcer &c+m&&&cwc+ggreen &c+m&&&cwc+raxe
   
   To give a player a colour title, the procedure is identical to giving 
   an object a colour title, except use the person's name instead of the 
   objectname.

   (&c+rThis feature is disabled until further notice due to formatting 
    problems in room looks &cw) - &c+gEirinn clarej@tcd.ie&cw.

   To execute a command in colour, do the following:

                      carg command arguments
                  eg: carg shout &c+m&&&cwc+rRed Shout!

   Only level 240+ gods may use the colour object for naming and titling 
   because its facilities are variants of the set command. The object 
   may however be used by 235+ gods to execute normal commands (eg shout, 
   tell, etc).
 
   You do not need to append the &c+m&&&cwcw code to the end of the 
   titles/names - it is done automatically. &c+cFor a full list of colour 
   codes take a look at control.txt in the Builder's library - 
   http://www.valhalla.com"

dilcopy colour_title@seren();
dilcopy colour_arg@seren();


manipulate {MANIPULATE_TAKE,MANIPULATE_HOLD}

weight 1
type ITEM_OTHER

end

/* End Colour tool */

                                        boulder 
names {"a large boulder", "boulder", "sign"} 
title "a large inscribed boulder" 
descr "&c+yA large boulder with writing inscribed upon it has been placed here. &cw" 
extra {} 
"&lThe inscription says: 
 
      'Welcome to the Valley of Serenity. If you are of good spirit you may 
       pass within the Forest. Those who are tainted by evil be warned that 
       this place will not stand your kind to dwell within it. '" 
  
weight 1000 
type ITEM_NOTE 
 
end 
 
 
                                   bell 
names {"golden bell", "bell"} 
title "a golden bell"  
descr "A &c+ygolden bell&cw sits on the counter." 
 
extra {} 
"A small bell made of polished brass or maybe gold. The command 'ring bell' is used to ring the bell." 
 
weight 20 
 
type ITEM_OTHER 
 
/* Dil to make the Bell ring */ 
 
dilbegin ringbell(); 
 
var 
    targ : unitptr; 
code 
{ 
:start: 
      unsecure(targ); 
      wait(SFB_CMD,command("ring")); 
      targ := activator; 
      secure(targ,start); 
      block; 
      act("You ring the &c+ygolden bell&cw and it tinkles softly.", 
          A_ALWAYS,targ,null,null,TO_CHAR); 
      act("$1n rings the &c+ygolden bell&cw and it tinkles softly.", 
          A_SOMEONE,targ,null,null,TO_REST); 
sendtoall("ringring","chani@seren"); 
      goto start; 
} 
dilend /* ring_bell */ 
 
end 
 
/* 
	MANUM ALTUR - THE ELF SLAYING GREAT SWORD 

	Ok I think this sword deserves some explanation. It is, to my knowledge, the most active sword ever made for the MUD. It can only be obtained from Zolan the zoat, a level 150 mob which casts harm and heal. He doesn't wield it, he can't be stolen from, filched from, disarmed, and undead can't be used to kill him. He can't be gated, and other mobs can't be gated to him either. He has been designed so that only a large group of players may kill him. Now the sword. Manum Altur (literally 'Hand of Altur') is a great sword weapon. It needs a level 50 player, with 105 strength (110 with the bonuses) and 90% great sword skill to wield it. It is a slayer of RACE_ELF, and it also gives the wielder the CHAR_DETECT_INVISIBLE flag. Spell level is set to 60 to prevent easy wiz eye of the weapon. It has 11 dils on it (yeah 11), none of which are damaging combat dils which the player may call, and as limits.txt states 'If an item does dil damage It will NOT have a race slayer.' The dils are !
as follows:

1)  Pulse dil - makes the sword pulse when left on the ground.
2)  Hilt description dil - lets the bearer see who owns the sword (see below).
3)  Claim dil - lets the owner claim the weapon as their own - the sword adds an extra to itself which bears the pc's name. If anyone other than that pc tries to wield it, they are shocked and lose 50 hitpoints (over ruled for sub 50 players by level restriction dil).
4)  Charger dil - the weapon charges once for PULSE_SEC*SECS_PER_MUD_DAY/12, which leaves the number of charges within the limit of 12 for 12 hours. These charges cause the wielder to lose 10 points in alignment per charge, eventually turning the player's alignment to -1000. The charges are used for the flee dil.
5)  Flee dil ('FUGO') - this dil is intended for use in combat. When the wielder uses the keyword 'FUGO', the sword links them out of the room to a random adjacent room (if one exists, if it doesn't, they stay put). It will transport them through locked/closed doors, if one exists in the direction.
6)  Fatality dil - this is the so-called 'INSTANT-DEATH' dil. If the opponent's hitpoints go below 10, the next hit from the weapon sets the hitpoints of the opponent to -10, thus making the next hit fatal. 
7)  Random attack dil - when wielded by a level 50 BoB player, the sword randomly attacks another 50 BoB player every 1 in 10 times, once every 50 seconds. If wielded by an immortal, the sword will not randomly attack. This dil adds a bit of variety to the game - imagine someone saying, 'It was the sword, not me, honest!'
8)  This is a restriction dil, as are the remaining two dils. Level 50+ restriction dil.
9)  Destruction of multiples dil (+ recursive search)
10)  See above. Strength restriction dil 120+ str.
11)  See above. Weapon skill restiction dil 90% Great sword.
  
*/

				manum_altur2
names {"Manum Altur","manum","great sword","sword", "jpcsword"} 
title "&c+bManum Altur&cw" 
descr "A magnificent sword made from black crystal is lying here." 
 
extra {} 
"This sword pulsates with ancient evil. Crafted by the Darkelven Lord Altur at the height of Darkelf civilization, this sword was conceived of evil, wrought of evil, and bound with evil. The double-edged blade seems to be made from a black crystal and it curves slightly along its length. The hilt is made from cold tempered steel, and the the pommel is a perfectly round, faceted crystal, like that in the blade." 
 
extra {"double-edged blade","blade"} 
"The blade is about a metre and a half long and made solely from black crystal which has been endowed with some evil magic which causes it to glow &cbdark blue&cw. One edge is keener than the other, and the light glints off the mirror-like edge. Between the two blades, a long strip of darkelven runes are etched into the crystal." 
 
extra {"hilt"} 
"The hilt is made from cold tempered steel, which has been bound with a black leather-like substance, but it is easier to grip. It takes the two hands of a very strong being to wield this sword effectively. There is engraving running down the hilt." 
 
extra {"pommel"} 
"The crystal that has been set as the pommel appears to be perfect - it is made of the same type of crystal as the blade, but is perfectly spherical. There is a twisting haze suspended in the crystal that seems to pulse in time with the blade." 
 
extra {"$wear_s"} 
"Your soul chills as the evil which courses through &c+bManum Altur&cw becomes one with your being." 
 
extra {"$wear_o"} 
"A &c+bbrilliant blue&cw flame suddenly kindles within $1n's eyes." 
 
extra {"$rem_s"} 
"You manage to let go of &c+bManum Altur&cw and your mind eases slightly." 
 
extra {"$rem_o"} 
"A &c+bbrilliant blue&cw flame flickers in $1n's eyes then grows dim." 
 
extra {"$identify"} 
"This great sword endows any who could wield it with great strength and dexterity, both of which are needed to control it. The sword aids the wielder in fighting with great sword, thus increasing that skill as long as it is in hand. A great power surges within &c+bManum Altur&cw - it pulsates with a lust for the blood of one race and it grants the wielder improved sight. The great power of the sword seems to twist anything it comes into contact with towards evil." 
 
extra {"$improved identify"} 
"&c+bManum Altur&cw has the power to endow its wielder with &c+g+1 strength&cw, &c+g+1 dexterity&cw, and &c+g+4% great sword skill&cw. It has a Craftmanship Modifier of &c+g7&cw and a Magical Modifier of &c+g7&cw. &c+bManum Altur&cw is a race slayer - it slays any of those with elven blood, but not darkelves. Elves may wield it due to the fact that the hilt is not endowed with slaying power. The sword has been known to force the wielder to attack others of its own volition. The wielder is also granted the ability to see those who are invisible. As well as the afore-mentioned powers, the command &c+rFUGO&cw will cause &c+bManum Altur&cw to transport its wielder through another dimension to another point in space. To see how many charges it has left, type &c+rCHARGES&cw while wielding it. If the owner wields the sword and shouts '&c+rI claim the evil for myself!&cw' the sword will bind to them and will not bear to be wielded by another. To see who owns the sword, look engraving'!
 on the hilt."
 
extra {"$no_engrave"}
"This item already has an engraving - look engraving to see it."

WEAPON_DEF(WPN_GREAT_SWORD,7,7) 
MATERIAL_METAL("Black Crystal and Tempered Steel") 
 
weight 25
 
manipulate {MANIPULATE_TAKE,MANIPULATE_WIELD,MANIPULATE_HOLD} 
 
STR_TRANSFER(+1) 
DEX_TRANSFER(+1) 
WEAPON_TRANSFER(WPN_GREAT_SWORD,+4) 
 
flags {UNIT_FL_MAGIC} 
 
CHAR_FLAG_TRANSFER(CHAR_DETECT_INVISIBLE) /* Allows the detect invis */ 
 
WEAPON_SLAYER(RACE_ELF) 
 
spell 60 /* Prevent easy wiz eye */ 
 
cost 340 IRON_PIECE 
rent 170 IRON_PIECE
 
dilcopy level_restrict@function(50,0,0,"level_act@seren"); 
dilcopy abi_restrict@function(ABIL_STR,105,25,0,"abi_act@seren"); 
dilcopy weap_restrict@function(WPN_GREAT_SWORD,90,0,0,"ex_act@seren"); 

dilcopy pulsate@seren();
dilcopy hilt_desc@seren();
dilcopy claim_dil@seren();
dilcopy shock_get@seren();
dilcopy sword_charge@seren();
dilcopy fugo@seren();
dilcopy fatality@seren();
dilcopy random_attack@seren();

end /* Manum_altur */ 

				vox_altur
names {"&c+bV&c+cox &c+wAl&c+ctu&c+br&cw", "Vox Altur", "staff", "vox", "altur", "voice of altur"}
title "a staff named '&c+bV&c+cox &c+wAl&c+ctu&c+br&cw'"
descr "An ornate staff lies on the ground here, tempting you."

extra {}
" This staff is about two metres long and about seven centimetres thick. 
It is made from dark ash. Mounted atop the staff is a great &c+bi&c+cc&c+we 
g&c+ce&c+bm&cw,
over which electricity snakes occasionally. The staff tapers out so that 
its end is a point about a centimetre in width. This staff seems unbreakable,
as if some power greater than any mortal binds it together. There is an 
inscription running down the top half of the staff."

extra {"&c+bi&c+cc&c+we g&c+ce&c+bm&cw", "ice gem", "gem"}
"This gem is perfectly clear. It is faceted like a great diamond, and it's 
bigger than your fist. There is no clear point of attachment, it is just simply
atop the staff. Every once and a while, an arc of electricity shoots across the
surface of the gem, and it crackles softly."

extra {"inscription"}
"The inscription reads&l

           'The Voice of Altur shall never fade'

It has been written in an ancient script which you are unfamiliar with, 
but in your heart, you know the meaning."

extra {"$identify"}
"This staff is the ultimate magic user's tool. Though it reduces divinity 
and constitution, it gives brain, magic and charisma to the holder."
extra {"$improved identify"}
"This staff gives &c+y+1 brain&cw, &c+c+1 magic&cw, and &c+m+2 charisma&cw. 
It takes &c+r-10 divinity&cw,
and &c+r-10 consitution&cw. It casts the spells Acid ball and Lightning at 
one time
and it holds 3 charges. You must be &c+glevel 50&cw, in a &c+gmagic user's 
guild&cw, &c+gevil&cw, 
have &c+g40 magic&cw, &c+g60 charisma&cw, and &c+g90 brain&cw. To use the power, simply 
'&c+bUse staff&cw'. There is a world maximum of &cr3&cw."

extra {"$wear_o"}
"An arc of electricity runs through $1n's body as $1e takes 
&c+bV&c+cox &c+wAl&c+ctu&c+br&cw in $1s hand."

extra {"$wear_s"}
"An arc of electricity runs through your body as you take
&c+bV&c+cox &c+wAl&c+ctu&c+br&cw in your hand."

extra {"$rem_s"}
"&c+bV&c+cox &c+wAl&c+ctu&c+br&cw crackles with electricity as you stop holding
it."

extra {"$rem_o"}
"&c+bV&c+cox &c+wAl&c+ctu&c+br&cw crackles with electricity as $1n stops holding
it."

extra {"$get_s"}
"A bolt of electricity runs into your body as you pick up 
&c+bV&c+cox &c+wAl&c+ctu&c+br&cw."

extra {"$get_o"}
"A bolt of electricity runs through $1n's body as $1e picks up
&c+bV&c+cox &c+wAl&c+ctu&c+br&cw."

manipulate {MANIPULATE_TAKE, MANIPULATE_HOLD}

DIV_TRANSFER(-10)
CON_TRANSFER(-10)
BRA_TRANSFER(+1)
MAG_TRANSFER(+1)
CHA_TRANSFER(+2)

spell 65 /* Prevent easy wiz eye */ 

STAFF_DEF(65,3,SPL_ACIDBALL_3,SPL_LIGHTNING_3)
flags {UNIT_FL_MAGIC}
weight 10
cost 1 PLATINUM_PIECE
rent 1 GOLD_PIECE

dilcopy level_restrict@function(50,0,0,"");
dilcopy anti_guild@function ({GUILD_PALADIN,GUILD_UDG_FIGHTER,GUILD_UDG_THIEF,GUILD_ASSASSIN},0,75,"");
dilcopy ali_restrict@function (-350,-1000,0,75,"");
dilcopy abi_restrict@function(ABIL_CHA,60,0,75,"");
dilcopy abi_restrict@function (ABIL_BRA,90,0,75,"");
dilcopy abi_restrict@function (ABIL_MAG,40,0,75,"");

dilbegin spare_dil(); /* Just in case I need a new dil - I don't want to 
                         have to slime it */
code
{
:init: 
   heartbeat:=PULSE_SEC*60;
:start:
pause;
goto start;
}
dilend /* spare_dil */

dilbegin vox_use(); /* Pre-empt the use command */

code
{
:start: 
   wait(SFB_CMD,((command("use")) and ("staff" in argument) and 
       (activator==self.outside) and (self.equip==WEAR_HOLD)));

act("An acid storm coalesces above your head as you summon " +
    "the power of Altur!",
     A_SOMEONE,self.outside,null,null,TO_CHAR);
act("An acid storm coalesces above $1n's head as $1e summons " + 
    "the power of Altur!",
     A_SOMEONE,self.outside,null,null,TO_REST);
}
dilend /* vox_use */

dilbegin  vox_move(); /* Do things. */

code
{
:init:
   heartbeat := PULSE_SEC*5;

:start:
   wait(SFB_TICK,( (self.outside.type == UNIT_ST_ROOM) or 
((self.outside.type == UNIT_ST_PC) and (self.equip==WEAR_WIELD)) ));
pause;

if (self.outside.type == UNIT_ST_ROOM)
{
   on rnd(0,3) goto a,b,finish,finish;

:a:
 act(self.title + " glows brightly as cold electricity plays off it.",
      A_SOMEONE,self,null,null,TO_ROOM);
   goto finish;

:b:
 act("A bolt of electricity arcs out from " + self.title + " and sends " +
     "tremors out through the ground!",
      A_SOMEONE,self,null,null,TO_ROOM);
   goto finish;
}

if ((self.outside.type == UNIT_ST_PC) and (self.equip==WEAR_WIELD))
{
   if (rnd(0,59) != 1) goto finish;

act(self.title + " pulsates powerfully in your hand as electricity " +
    "snakes down its length.",
     A_SOMEONE,self.outside,null,null,TO_CHAR);
act("$1n's " + self.title + " pulsates powerfully in $1s hand as electricity " +
    "snakes down its length.",
     A_SOMEONE,self.outside,null,null,TO_REST);
}

:finish:
   pause;
   pause;
   pause;

   goto start;
}
dilend /* vox_move */

end /* vox_altur */
 
                                        dreamstone1 
names {"dreamstone", "stone", "sphere", "dstone"} 
title "a &c+rd&c+gr&c+ye&c+ba&c+mm&c+cs&c+rt&c+go&c+yn&c+be&cw" 
descr "A tiny shifting sphere of colour is lying on the ground here." 
 
extra {} 
"This tiny globe of colour shifts through the spectrum of colour, from Red to Violet. It fits comfortably in the palm and seems to radiate a magic all of its own. When you try to touch it, you can't quite feel it - it's as if it has some kind of field around it which prevents you from touching the stone itself." 
 
extra {"$identify"} 
"This is a &c+rd&c+gr&c+ye&c+ba&c+mm&c+cs&c+rt&c+go&c+yn&c+be&cw. When its owner holds one in their hand, it brings deep sleep and then fills their unconsciousness with images and experiences beyond comprehension. It can only be used one time. Once the sleeper awakens, the stone vanishes into nothingness." 
 
manipulate {MANIPULATE_TAKE, MANIPULATE_HOLD} 

flags {UNIT_FL_MAGIC}
 
spell 70

weight 1

cost 2 PLATINUM_PIECE 
 
type ITEM_TREASURE 
 
MATERIAL_MAGIC("Pure magic") 
 
dilcopy dream1@seren(); 
dilcopy dream_action@seren(); 
 
end /* DREAMSTONE1 */ 

                                        passage_ring 
names {"ring of passage", "ring", "jpcring"} 
title "a ring of passage" 
descr "A plain gold ring is lying here." 
 
extra {} 
"This ring is made from a band of gold. It looks well worn, but there doesn't seem to be anything special about it. There is a small inscription just visible around the inside." 
extra {"inscription"} 
"The inscription simply says 'Oracle'." 
 
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_FINGER} 
 
cost 5 IRON_PIECE
 
type ITEM_TREASURE 
 
end /* passage_ring */ 
 
/* Chani's cloak */ 
 
				chani_cloak 
names {"hooded cloak", "cloak"} 
title "a hooded cloak" 
descr "A grey cloak is lying on the ground here." 
 
extra {} 
"This cloak is made of a light, strong greyish-green material which seems to shimmer slightly in the light. It is very long, and has a large hood." 
 
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_ABOUT} 
 
MATERIAL_CLOTH("elven cloth") 
 
weight 10 
cost 100 IRON_PIECE
 
end /* chani_cloak */ 
 
                                zolan_mace 
names {"a zoat mace","mace"} 
title "a zoat's mace" 
descr "A great mace-like weapon lies on the ground here." 
 
extra {} 
"This weapon is like a great mace, made from a long wooden pole with a great metal bound barrel of black crystal at one end. The Metal binding on the barrel of crystal is inscribed with what appear to be magical ruins, but they are intelligable to you. This weapon is very heavy." 
 
WEAPON_DEF(WPN_MACE,5,0) 
MATERIAL_WOOD("A dark wood") 
MATERIAL_METAL("Black Crystal bound with Metal") 
 
weight 30 
 
manipulate {MANIPULATE_TAKE,MANIPULATE_WIELD,MANIPULATE_HOLD} 
 
cost 60 IRON_PIECE
 
end /* Zolan's mace */ 

/* STATUES in the clearing (forest26) */ 

zolan_statue 
names {"zoat", "statue"} 
title "the statue of the Guardian Zoat" 
descr "A statue of a great Zoat stands here, looking on." 
 
extra {} 
"This statue is three metres in height. It is of a massive, centauroid, reptilian creature, with a scaled torso mounted on the body of some kind of heavily armoured monitor lizard. Its head is human like, but rounded like that of a turtle. This is is one of the most legendary and mysterious creatures known. His statue looks on as the others fight, almost indifferent to it, as if it means nothing in the scale of things. There is a plaque on the ground here, made of the same Black Crystal as the statues. This was, and maybe still is, the only being powerful enough to guard the Elf-slayer Manum Altur after the fall of the Darkelves." 

weight 1000

MATERIAL_STONE("Black Crystal")

end /* zolan_statue */ 

matulin_statue 
names {"Matulin","elf", "statue"} 
title "the statue of Matulin, Ancient king of the elves" 
descr "A statue of an elf king locked in eternal combat is here." 
 
extra {} 
"This statue is more than two metres tall. It appears to be made from black crystal. It depicts Matulin, Lord of the Old elves, locked in combat with another elf statue. Matulin is extremely handsome - you have never seen an elf as wondrous as he. These statues commemorate the darkest period in Elf history."

weight 1000

MATERIAL_STONE("Black Crystal")

end /* matulin_statue */

altur_statue 
names {"Altur","darkelf", "statue"} 
title "the statue of Altur, Lord of the Darkelves" 
descr "A statue of the Darkelf Lord Altur is locked in eternal combat here." 
 
extra {} 
"This statue has been crafted in the likeness of Altur, founder of the darkelf cult, and their first master. He was the progenitor of the darkelves. It is about the same height as that of Matulin, more than two metres. Altur shows his evil intelligence on his brow, as he stares at Matulin in a cold expression of loathing and hatred. Altur wields the great Elf-slayer, that he himself created to combat the good elves. All knowledge of this weapon, known as Manum altur, 'The Hand of Altur', was lost millennia ago. Legend has it, Matulin's son, Roantilis gave the weapon to Zolan, the only being of enough power to keep it safely from the forces of evil."

weight 1000

MATERIAL_STONE("Black Crystal")

end /* altur_statue */

				hay
names {"bail of hay", "bail", "hay"} 
title "a bail of hay" 
descr "A small bail of hay lies here." 
 
extra {}
"It is a relatively small bail of hay and it seems to be reasonably fresh. Horses would like this stuff."

manipulate {MANIPULATE_TAKE} 

weight 25

cost 1 IRON_PIECE
 
end /* hay */

				
				well
names {"a well", "well", "water"} 
title "a well" 
descr "&c+cA well is in the centre of the courtyard here.&cw" 
extra {} 
"The well is made from the same paving slabs as the courtyard itself, only cut smaller. It has a large bucket attached to a winch, which can be lowered down into the darkness. The mouth of the well is wide enough for a person to enter it. This must be the main source of water for the Temple. You can drink from the well." 

extra {"bucket"}
"The bucket is made of wood, with metal strips around the outside. It is attached to a winch."

extra {"winch"}
"The winch is designed so the user can lower the bucket down to collect water."

weight 1000 

LIQ_DEF(LIQ_WATER, 1000, -1, 10, 0) 

MATERIAL_STONE("Granite")

dilbegin drink_well();          /* Drink from the well */ 
 
var 
   pc           : unitptr; 
   result        : integer;
code  
{ 
:start: 
   heartbeat := PULSE_SEC*5; 
wait(SFB_CMD,command("drink"));

if (findunit (activator,argument,FIND_UNIT_SURRO,null)!=self) goto start;
   block;
   pc := activator; 
   secure(pc,lost); 
    
   act("You lower the bucket down into the darkness.",  
      A_ALWAYS,pc,null,null,TO_CHAR); 
   act("$1n lowers the bucket down into the darkness.",  
      A_SOMEONE,pc,null,null,TO_REST); 
pause;
act("The bucket reaches bottom, and then you bring it back up.",  
      A_ALWAYS,pc,null,null,TO_CHAR); 
   act("$1n starts winching the bucket back up.",  
      A_SOMEONE,pc,null,null,TO_REST); 
pause;
act("The bucket reaches the top, it is full of crystal clear water.",  
      A_ALWAYS,pc,null,null,TO_CHAR); 
   act("The bucket reaches the top, it is full of crystal clear water.",  
      A_SOMEONE,pc,null,null,TO_REST); 
pause;
exec ("drink "+self.name,pc);
unsecure(pc); 
goto start; 
 
:lost: 
   unsecure(pc); 
   goto start; 

} 
dilend /* drink_well */ 

dilbegin enter_well();          /* Enter the well */ 
 
var 
   pc           : unitptr; 
  result : integer;
code  
{ 
:start: 
   heartbeat := PULSE_SEC*1; 
   wait(SFB_CMD,(command(CMD_ENTER) and ("well" in argument))); 
   block; 
   pc := activator; 
   secure(pc,lost); 
   dilcopy("blockall@seren",pc);
   
   act("You climb over the edge of the well and fall down into the darkness!",  
      A_ALWAYS,pc,null,null,TO_CHAR); 
   act("$1n climbs into the well and vanishes into the darkness!",  
      A_SOMEONE,pc,null,null,TO_REST); 
pause;
link(pc,findroom("well_room@seren")); 
result := dildestroy("blockall@seren",pc);
dilcopy("well_lake@seren",pc);
unsecure(pc); 
goto start; 
 
:lost: 
   unsecure(pc); 
   goto start; 
 
} 
dilend /* enter_well */ 

end /* well */

				holy_font
names {"a holy water font", "font", "thepoint", "water"} 
title "the holy water font" 
descr "&c+cA holy water font has been mounted on the wall here.&cw" 
extra {} 
"This font of water has been attached to the west wall beside the door. It is made from a grey marble and has been filled with a sparkling crystal clear, probably blessed water. You can drink it using 'drink water'." 

extra {"water"}
"The water looks perfectly wholesome. It is crystal clear."

weight 100

LIQ_DEF(LIQ_WATER, 1000, -1, 10, 0) 

MATERIAL_STONE("Marble")

dilbegin drink_font();          /* Drink from the font and be healed */ 
 
var 
   pc           : unitptr; 

code  
{ 
:start: 
   heartbeat := PULSE_SEC*5; 
   wait(SFB_DONE,(command("drink"))); 
   pc := activator; 
   secure(pc,lost); 

if (findunit (activator,argument,FIND_UNIT_SURRO,null)!=self) goto start;

pc.hp := pc.hp + 10;
if (pc.hp > pc.max_hp)
{
pc.hp := pc.max_hp;
}
position_update(pc);
act("After drinking the water, you feel very refreshed!",  
      A_ALWAYS,pc,null,null,TO_CHAR); 
   act("$1n looks quite refreshed!",  
      A_SOMEONE,pc,null,null,TO_REST); 
unsecure(pc); 
goto start; 
 
:lost: 
   unsecure(pc); 
   goto start; 
} 
dilend /* drink_font */ 

end /* holy_font */

				tyr_statue
names {"statue of tyr", "statue", "tyr"} 
title "the statue of Tyr, the God of War" 
descr "A statue of Tyr, the God of War, has been set here." 
 
extra {} 
"This statue of Tyr depicts the God of War in full battle dress, as if he is marshalling a great confrontation. He is the third of the Aesir, very handsome, but very cold to look upon. The statue stands almost three metres tall, and it faces towards the Altar of Odin, to the west."

weight 1000

MATERIAL_STONE("Marble")

end /* tyr_statue */

				thor_statue 
names {"statue of thor","statue", "thor"} 
title "the statue of Thor, the Thunder God" 
descr "A statue of Thor, the Thunder God, stands here." 
 
extra {} 
"This statue has been made in the likeness of Thor, the Thunder God. He stands facing east towards the Altar and statue of Odin. He wields in a two-handed grip the great hammer of thunder, with which he cleaves the sky. Thor is second of the Aesir."

extra {"hammer"}
"The Hammer of Thunder is huge, and this replica bears out the legend. It could quite literally cleave the skies."

weight 1000

MATERIAL_STONE("Marble")

end /* thor_statue */

				odin_statue 
names {"statue of Odin","statue", "Odin"} 
title "the statue of Odin, the Sky Father" 
descr "A statue of Odin, the Sky Father, stands behind the Altar here." 
 
extra {} 
"Odin, the greatest of the Gods and first of the Aesir. This is the focus point for the whole temple, and the god to which it is dedicated. Odin is the wisest of the gods. He genuinely cares for the well-being of the peoples of the world, and his followers. He has a stern look in his eyes, the burden of wisdom is on his brow, and the kindness of a Father in his eyes. The statue is larger than that of Thor and Tyr, and it has been set higher then them, in mark of respect."

weight 1000

MATERIAL_STONE("Marble")

end /* odin_statue */


				altar_odin 
names {"Altar of Odin","altar"} 
title "the Altar of Odin" 
descr "A great marble altar has been erected here, before the statue." 
 
extra {} 
"This Altar is about three metres long by almost half that in width. It is made from solid marble, which has a pink sheen to it, and it has been placed parrallel to the South wall of the Temple, the Statue of Odin set behind it. Running around all four sides of the Altar, an extract from the legend of how Odin submitted to the severe initiation of near death.
&l

    Veit ec, at hecc vindgameidi a      I know that I hung 
           naetr allar nio,               on the wind-battered tree
    geiri undadr oc gefinn Odni,              nine full nights,
                                        wounded with the spear
          sialfr sialfom mer,             and given to Odin,
    a peim meidi, er mangi veit,              myself to myself,
          hvers hann af rotom renn.     on that tree if which none knows
    Vid hleifi mic saeldo                     whence the roots come.
                                        They did not comfort me with the
          ne vid hornigi,                 loaf
          nysta ec nidr;                  nor with the drinking horn,
    nam ec upp runar, oepandi nam,            I glanced down;
                                        I took up the runes,
          fell ec aptr padan.             crying out their names,
                                              I fell back down from there."
weight 1000

MATERIAL_STONE("Marble")

end /* altar_odin */

                                stone_table
names {"stone table","table"}
title "the Stone Table"
descr "Before you is a great circular stone table, covered in intricate runes."

extra {}
"This table is a wide disk of stone, set on a solid base which comes up through the floor. The stone in the table looks very old and weathered, indicating it was once out in the open. The table was obviously brought here when the Temple was built, a long long time ago. Across the surface, various runes have been carved into its surface."

extra {"runes", "rune"} /* Ruins mean Odin's Table - I hate runemals :) */
"You can't decipher the ruins, but they obviously have great significance:
&l 
  
 /~\  |\ /|   |   \ |         / | \   |\   | \   |\  |\ /|
 \,/  | X |   |     \           |     |\   | <   |   | ' |
 /'\  |/ \|   |     | \         |     |    | /   |   |   |
"

weight 1000

MATERIAL_STONE("Granite")

end /* stone_table */

                                        olayan_heart
names {"olayan heartstone", "heartstone", "stone", "ireheart"}
title "a heartstone"
descr "A perfectly spherical stone has been left here."

extra {}
"This is the heart stone of an Olayan. When Tyr creates a group of Olayans, he gives one of them a heartstone, which allows it to direct the others. Without a heartstone, the group of Olayans are comptletely independent of each other, and can't function as a group."

manipulate {MANIPULATE_TAKE, MANIPULATE_HOLD}

flags {UNIT_FL_MAGIC}

spell 70

weight 1

cost 1 PLATINUM_PIECE

type ITEM_TREASURE

MATERIAL_MAGIC("Heart of stone")

end /* olayan_heart */

                                        hand_dark
names {"statue hand", "hand", "irehand"}
title "a hand made from Black Crystal"
descr "A hand made from Black Crystal lies on the ground here."

extra {}
"This is the broken hand of a statue. The Hand is made from Black crystal. It has twisted fingers with long evil nails protruding from the ends. It is very cold to touch."

manipulate {MANIPULATE_TAKE, MANIPULATE_HOLD}

flags {UNIT_FL_MAGIC}

spell 70

weight 7

cost 2 PLATINUM_PIECE

type ITEM_TREASURE

MATERIAL_STONE("Black Crystal")

end /* hand_dark */


				priest_robes
names {"priests robes", "robes", "robe"}
title "the priest's robes"
descr "A neatly folded set of priest's robes lie here."

extra {}
"These robes are what the priests wear from day-to-day. They are the standard garment of the order, and they bear a runic signature on the left breast. They are long priest's robes, like the habit of a monk, and they have a large hood extending down from the rear of the neck, together with oversized sleeves. The material is like a heavy cotton, and it extends almost down to the feet of the wearer."

extra {"left breast", "breast", "runic signature", "runes", "rune", "signature"}
"The robe bears the mark of Odin on the left breast, signifying that the wearer is a member of the order of Odin.&l

 /~\  |\ /|   |   \ | 
 \,/  | X |   |     \ 
 /'\  |/ \|   |     | \ 
"

extra {"hood"}
"The hood is quite large enough to cover the head and down to the neck if need be."

extra {"sleeves", "sleeve"}
"The sleeves are oversized like those of a monk's habit. You could quite easliy fold your arms inside the sleeves."

manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_ABOUT}

MATERIAL_CLOTH("cotton")

weight 15

cost 100 IRON_PIECE

end /* priest_robes */

				high_robes
names {"high priest's robes", "robes", "robe"}
title "the high priest's robes"
descr "A set of high priest's robes have been placed here."

extra {}
"Only the High priest may wear these vestments, or an officiary at an Odinist rite. They are blue and white, dark navy blue sleeves with a white chest and back piece. There is no hood on them, and these robes seem to be for purely ceremonial purposes, and day-to-day, only by the High Priest himself . The sleeves are very long, like those of the ordinary robes, but the material is a much better quality than the cotton of the normal robes. They bear the same breast emblem of Odin."

extra {"left breast", "breast", "runic signature", "runes", "rune", "signature", "emblem"}
"The robe bears the mark of Odin on the left breast, signifying that the wearer is a member of the order of Odin.&l

 /~\  |\ /|   |   \ | 
 \,/  | X |   |     \ 
 /'\  |/ \|   |     | \ 
"

extra {"sleeves", "sleeve"}
"The sleeves are oversized like those of a monk's habit. You could quite easliy fold your arms inside the sleeves."

manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_ABOUT}
flags {UNIT_FL_MAGIC}

MATERIAL_CLOTH("high quality cotton")

weight 12

cost 20 IRON_PIECE

end /* high_robes */

				sandals /* Priest's sandals */
names {"leather sandals", "sandals", "sandal"}
title "a pair of leather sandals"
descr "Some leather sandals have been left here."

extra {}
"These sandals are very simple in design. They are thonged at the rear and the owner's foot slips into one and a thong goes between the large toe and the next toe beside it. They are pure leather, and the priests wear them for daily use, indoors and out."

manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_FEET}

MATERIAL_LEATHER("Shoe leather")

weight 8

cost 50 IRON_PIECE

end /* sandals */

				priest_mace
names {"a small mace","mace"} 
title "a hand mace" 
descr "A small hand mace lies here." 
 
extra {} 
"This is a small hand mace, used by the priests of the temple when they venture out into the world where not everyone is as good-hearted as they are. The mace is made from a short wooden handle, topped with a round heavy ball of metal. It isn't particularly well crafted, and just serves its basic purpose of defence." 
 
WEAPON_DEF(WPN_MACE,5,0) 
MATERIAL_WOOD("A hard wood") 
MATERIAL_METAL("A blunt metal head") 
 
weight 14
 
manipulate {MANIPULATE_TAKE,MANIPULATE_WIELD,MANIPULATE_HOLD} 
 
cost 70 IRON_PIECE

end /* priest mace */ 

				broom
names {"a long handled broom", "broom"}
title "a long handled broom"
descr "A dusty old broom is here."

extra {}
"A long handled broom used for cleaning up around the Temple."

manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_SPEAR, -5,0 )
MATERIAL_WOOD("A nice wooden handle, probably birch")
weight 8
cost 10 IRON_PIECE

end

				firewood
names {"firewood", "wood"}
title "a piece of firewood"
descr "A piece of firewood lies here."

extra {}
"This is a piece of cut firewood, specially for the Temple. It appears to be part of a birch tree, and from the looks of it, the tree wasn't more than 10 years old when it was felled."

manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}

WEAPON_DEF(WPN_CLUB, -5, 0)
MATERIAL_WOOD("A piece of young birch wood")

weight 6
cost 1 IRON_PIECE

end

				hayfork
names {"hay fork", "fork"}
title "a hay fork"
descr "A long fork is here, for changing hay."

extra {}
"This fork is for cleaning out the stalls and moving hay around the stables. It is quite long, and the head is made from a four pronged piece of metal."

manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD}
WEAPON_DEF(WPN_TRIDENT, -2, 0)
MATERIAL_WOOD("A long birch pole")
MATERIAL_METAL("4 pronged head")

weight 18
cost 5 IRON_PIECE

end

				cooking_pot
names {"cooking pot", "pot"}
title "a cooking pot"
descr "a large black pot rests on the grate here."

extra {}
"This pot has been used an awful lot - it is almost black from constant heating.
 It appears to be made of a strong, but heavy metal, probably hard iron."

manipulate {MANIPULATE_TAKE, MANIPULATE_ENTER}
weight 20
cost 2 IRON_PIECE
CONTAINER_DEF(30)
MATERIAL_METAL("iron")

end

                                kitchen_knife
names {"kitchen knife", "knife"}
title "a knife"
descr "A small table knife has been left here."

extra {}
"This knife would normally be used for eating. The priests' lives may be simple, but they do have manners."

manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD, MANIPULATE_HOLD}
WEAPON_DEF(WPN_DAGGER, 0, 0)
weight 2
cost 1 IRON_PIECE

MATERIAL_METAL("Iron")

end

				kitchen_fork
names {"kitchen fork", "fork"}
title "a fork"
descr "A small table fork has been left here."

extra {}
"This fork would normally be used for eating. The priests' lives may be simple, but they do have manners."

manipulate {MANIPULATE_TAKE, MANIPULATE_WIELD, MANIPULATE_HOLD}
WEAPON_DEF(WPN_DAGGER, 0, 0)
weight 2
cost 1 IRON_PIECE

MATERIAL_METAL("Iron")

end

                                kitchen_plate
names {"kitchen plate", "plate"}
title "a plate"
descr "A circular porcelaine plate has been placed here."

extra {}
"The priests obviously eat from these. They are plain and simple plates."

manipulate {MANIPULATE_TAKE}
weight 4
cost 1 IRON_PIECE

MATERIAL_STONE("Porcelaine")

end

				carrot
names {"carrot"}
title "a carrot"
descr "A long orange carrot lies here."

extra {}
"This is a long orange vegetible. It is good to eat, either raw, or cooked."

manipulate {MANIPULATE_TAKE}
FOOD_DEF(1,0)
weight 1
cost 1 IRON_PIECE
MATERIAL_ORGANIC("Carrot - what more can I say")

end

                                cabbage
names {"cabbage"}
title "a head of cabbage"
descr "A nice head of cabbage has been left here."

extra {}
"A large green vegetable, hated by children, loved by priests."

manipulate {MANIPULATE_TAKE}
FOOD_DEF(2,0)
weight 4
cost 1 IRON_PIECE
MATERIAL_ORGANIC("Cabbage")

end

                                garlic
names {"garlic"}
title "a clove of garlic"
descr "A smelly clove of garlic has been left here."

extra {}
"A nice vampire repellant and useful for adding flavour (and smell) to food."

manipulate {MANIPULATE_TAKE}
FOOD_DEF(1,0)
weight 1
cost 1 IRON_PIECE
MATERIAL_ORGANIC("Garlic")

end

				book_case
names {"book case", "case"}
title "a book case"
descr "A book case runs north-south here."

extra {}
"This is a dusty old bookcase, laden down with ancient texts and stories relating to Odin, the other Aesir, and such subjects as the History of the Valley of Serenity. You can get books from it."

MATERIAL_WOOD("Old hardwood")

weight 500

CONTAINER_DEF(1000)

end /* Book case */

				history
names {"The Book of Remembrance", "remembrance", "history", "book", "tome"}
title "the Book of Remembrance"
descr "An old tome is gathering dust here."

extra {}
"This book is very heavy. It is bound with hard brown leather, gilded in faded gold lettering and edging. Scrawled across the cover in beautiful old elfish, are the words, 'Account of the Ages'. This is the Book of Remembrance, an account of the elves who lived here and their downfall. To read it, 'read chapter one' etc. It has three chapters."

extra {"chapter one", "chapter 1", "one", "1"}
"&nChapter One&n&n&sAeons ago, the elven race was at one with itself, peaceful, simple people, who were only beginning to discover their potential in the world. It was the start of the Golden age of Elfdom. They were by far the most civilized people on the face of the earth, being both peaceful and highly intelligent. &n&n&s Over time they discovered many wonderful things, invented marvels beyond our comprehension and they gradually tamed the lands we know today around Udgaard and Midgaard. Evil knew no place in their hearts. But gradually, as they grew so accustomed to peace, knowledge and intellect, they became bored with it."

extra {"chapter two", "chapter 2", "two", "2"}
"&nChapter Two&n&n&sA time of decadence set in, and a taint overcame some elves, who evolved into what we know today as the Dark elves. Among these dicidants was the greatest sorcerer and inventor of the elven race, Altur. He had given his people so many wonderful inventions and enriched their knowledge of the world, but as the rest of the elves began to realise what was happening to their people, Altur decided to continue and explore the dark ways. He took all those who would follow him, and left the elven kingdoms, never to return."

extra {"chapter three", "chapter 3", "three", "3"}
"&nChapter Three&n&n&sShortly thereafter, the great elf wars began, Elf fighting Dark elf, one to rid his race of the taint of evil that had befallen it, the other to erradicate the good elves so that the Dark elves could embrace the world with the taint of chaos. Altur was a great leader, and for a time, his followers held the mastery over the good elves. Around this time, he had reached the pinacle of his genius. &n&n&s After many years of painstaking research, he discovered how to create a weapon of ultimate power, a weapon that could destroy the good elves."

extra {"chapter four", "chapter 4", "four", "4"}
"&nChapter Four&n&n&sHe named it Manum Altur, Hand of Altur and Slayer of elves. With this weapon of devastating power, he led the dark elves against the good. After many years of conflict, the good elves managed to defeat altur and gain possesion of Manumaltur. Their king knew that he must do away with it, but they couldn't destroy it. So, after the ruin of the dark elves, whose remnants fled into the earth, the good elves utterly destroyed the dark elf city, levelling it to the ground. This place of evil is today known as the plains of desolation, lying south of the Valley of Serenity, where the Good elves once dwelt."

extra {"chapter five", "chapter 5", "five", "5"}
"&nChapter Five&n&n&sThey left that place, for it reminded them of the evil which had befallen them, and they migrated to the far west of the land, west of what is now known as Udgaard. Here they built a new city, and tried to start again, but they never regained their former glory, and are now but a shadow of their forefathers. &n&n&s Many years after their migration, the elven king remembered Manumaltur. It was always on his mind. What could he do with it? It was indestructible as far as he knew, and he did not know of anyone who could keep it from the powers of evil."

extra {"chapter six", "chapter 6", "six", "6"}
"&nChapter Six&n&n&sThe only way to find out would be to ask the oracle of Serenity, in the Valley where the elves used to dwell. So he made the journey to the Oracle and asked it who could guard this evil thing forever. The Oracle replied that there was only one power in the world, that was not a deity and was great enough to keep this weapon from the forces of evil, Zolan, mightiest of Zoats. The King knew not what a zoat was, but he knew he must seek out this mighty creature and ask it to help his people."

extra {"chapter seven", "chapter 7", "seven", "7"}
"&nChapter Seven&n&n&sThis he eventually did, and Zolan listened to him with great sympathy. He said he would keep the weapon, for eternity, or as long as he should live, but he warned that though his people were very ancient, and very powerful, they were dwindling in numbers, and that someday the sword might not have a guardian if he should die. The king accepted this, and thanked Zolan. In return for guarding the weapon, the king gave Zolan and his children the Valley of Serenity as their homeplace. And so they moved their and dwell there to this day, though barely a handful remain, ever elusive to man and beast."

extra {"chapter eight", "chapter 8", "eight", "8"}
"&nChapter Eight&n&n&sAfter the rise of mankind under the watchful eye of Odin, less than a thousand years ago, some priests of the cult of Odin heard of the mighty Zolan and his followers, and the ancient stories of how they came to this part of the Earth. They decided to go to the Valley of Serenity, still uninhabited since the elves left it so long ago, to follow Odin and to learn from Zolan, if he might teach them. &n&n&sTo this day, their coven of druids lives deep in the forest that lies in the Valley. They give cautious welcome to travellers and adventurers alike, but they hold no scruples when battling the forces of evil if they attempt to enter the Valley. &n&n&n&n&s20-THE END "

manipulate {MANIPULATE_TAKE, MANIPULATE_HOLD}

weight 12

cost 1 PLATINUM_PIECE

MATERIAL_ORGANIC("Leather and paper")

end /* The book of remembrance */

				creation
names {"book of creation", "creation", "book", "tome"}
title "the Book of Creation"
descr "A great leather bound book has been left here."

extra {}
"This book looks very old indeed. It has a heavy, leather bound cover, made from fine brown calf's leather. The edges bear the signs of use, and written on the cover in great gold-gilded letters are the words, 'Creation'. This is the norse book of creation. To read it, 'read chapter one' etc. It has three chapters."

extra {"chapter one", "chapter 1", "one", "1"}
"&nChapter One&n&n&sThere was neither earth nor high heaven, neither tree ... nor mountain .... No sun shone, no moon gave light. There was no glorious sea.&n&n&sThere was only Ginnungagap, a great emptiness, filled only with potential. Slowly, out of the nothing, grew the world tree.&n&n&sYggdrasil, the mighty Ash - the center of the universe. So huge its branches reached over the clouds. So strong its roots held together the world. The first root held the realm of the Aesir, the gods of man. The second, the realm of the frost-giants, and the third, the realm of the dead."

extra {"chapter two", "chapter 2", "two", "2"}
"&nChapter Two&n&n&sAt the center were two regions: Brightness and fire to the south; Snow and ice to the north. In the middle, as the heat from the south melted the cold ice, a living creature appeared, called Ymir.&n&n&sYmir was a great giant who gave birth to all the races of the worlds. From his feet came the family of frost-giants, from his left armpit came the first man and woman (explains a lot doesn't it), and from his hands came the three gods, Odin, Vili, and Ve. These three slew Ymir and formed the world of man from his body:&n&n&s6...from his blood the sea and the lakes, from his flesh the earth, and from his bones the mountains; from his teeth and jaws and such bones as were broken they formed the rocks and the pebbles."

extra {"chapter three", "chapter 3", "three", "3"}
"&nChapter Three&n&n&sThis world, called Midgaard, was protected from the giants by a wall, made from the eyebrows of Ymir. The rainbow bridge, bifrost, connected the world of man with the realm of the Aesir.&n&n&sNear the root, in the realm of the Aesir, lay pingvellir valley. There, near the source of the spring of fate, was the Well of Urd, and there the gods gathered daily for their court of law. &n&n&n&n&s20-THE END"

manipulate {MANIPULATE_TAKE, MANIPULATE_HOLD}

weight 7
cost 1 PLATINUM_PIECE
MATERIAL_ORGANIC("Leather and paper")

end /* The book of creation */


/* ====================== QUEST REWARDS ======================= */

				zoat_plate
names {"A Zoat-scale backplate", "Zoat-scale backplate", "zoat backplate", "backplate", "plate"}
title "&cga Zoat-scale backplate&cw"
descr "A reptile-scale backplate is lying on the ground here."

extra {}
"This backplate is made completely from scales. The scales are like those of a dragon, but are slightly smaller, and they look very strange. They are a dark green colour, tinged with maroon. This plate looks like it could repel almost any missile or weapon."

extra {"scales", "scale"}
"The scales are dark green in colour and they are very hard. They are Zoat scales and they are almost indestructible."

extra {"$identify"}
"This backplate has a Craftsmanship modifier of 15 and a Magical Modifier of 9."

extra {"$improved identify"}
"This back plate is the reward for Zolan the Guaridan Zoat's quest. It gives the wearer 2 strength and 2 dexterity."

extra {"$wear_s"}
"As you put the backplate on, you feel a pulse of energy run through your body."

extra {"$wear_o"}
"As $1n puts on $1s backplate, you see $1s eyes glint yellow like those of a reptile."

extra {"$rem_s"}
"As you take off the backplate, you feel the power of Zolan leave your body."

extra {"$rem_o"}
"As $1n removes $1s backplate, $1e seems to grow weaker."

extra {"$get_s"}
"A pulse of power runs through your hand as you pick up the backplate."

extra {"$get_o"}
"A pulse of power suddenly enters $1n's body as $1e picks up the backplate."

manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_BACK, MANIPULATE_HOLD}

weight 15

cost 600 IRON_PIECE

MATERIAL_ORGANIC("Zoat scales")
ARMOUR_PLATE(15,9)

STR_TRANSFER(+2)
DEX_TRANSFER(+2)
flags {UNIT_FL_MAGIC}

dilcopy quest_restrict@function(ZOLAN_QUEST_FINISHED,0,0,"");

end /* End Zolan Backplate */

			earstone
names {"a Serenity earstone","serenity earstone","earstone", "stone", "earring"}
title "&c+ma Serenity earstone&cw"
descr "A tiny earstone lies one the ground here."

extra {}
"This tiny little earstone has been shaped so it can just fit inside a pierced ear. It is about the size of your fingernail and is made from what looks like a tiny marble chip surrounded by a silver metal."

extra {"$identify"}
"This is the quest reward for the Serenity Coven Quest. It gives its wearer strength and charisma."

MATERIAL_STONE("marble")
MATERIAL_METAL("silver")
weight 1
manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_EAR, MANIPULATE_HOLD}
type ITEM_WORN

STR_TRANSFER(+1)
CHA_TRANSFER(+1)
flags {UNIT_FL_MAGIC}

cost 200 IRON_PIECE

dilcopy quest_restrict@function(COVEN_QUEST_FINISHED,0,0,"");

end /* earstone */

/*	THE FOLLOWING OBJECTS ARE RELICS FROM THE OLD LIMITS 
	-as these are no longer loaded, they're just left as a relic and unchanged
*/

				relic
names {"Manum Altur","manum","great sword","sword", "jpcsword"} 
title "&c+bManum Altur&cw" 
descr "A magnificent sword made from black crystal is lying here." 
 
extra {} 
"This sword pulsates with ancient evil. Crafted by the Darkelven Lord Altur at the height of Darkelf civilization, this sword was conceived of evil, wrought of evil, and bound with evil. The double-edged blade seems to be made from a black crystal and it curves slightly along its length. The hilt is made from cold tempered steel, and the the pommel is a perfectly round, faceted crystal, like that in the blade." 
 
extra {"double-edged blade","blade"} 
"The blade is about a metre and a half long and made solely from black crystal which has been endowed with some evil magic which causes it to glow &cbdark blue&cw. One edge is keener than the other, and the light glints off the mirror-like edge. Between the two blades, a long strip of darkelven runes are etched into the crystal." 
 
extra {"hilt"} 
"The hilt is made from cold tempered steel, which has been bound with a black leather-like substance, but it is easier to grip. It takes the two hands of a very strong being to wield this sword effectively. There is engraving running down the hilt." 
 
extra {"pommel"} 
"The crystal that has been set as the pommel appears to be perfect - it is made of the same type of crystal as the blade, but is perfectly spherical. There is a twisting haze suspended in the crystal that seems to pulse in time with the blade." 
 
extra {"$wear_s"} 
"Your soul chills as the evil which courses through &c+bManum Altur&cw becomes one with your being." 
 
extra {"$wear_o"} 
"A &c+bbrilliant blue&cw flame suddenly kindles within $1n's eyes." 
 
extra {"$rem_s"} 
"You manage to let go of &c+bManum Altur&cw and your mind eases slightly." 
 
extra {"$rem_o"} 
"A &c+bbrilliant blue&cw flame flickers in $1n's eyes then grows dim." 
 
extra {"$identify"} 
"This great sword endows any who could wield it with great strength and dexterity, both of which are needed to control it. The sword aids the wielder in fighting with great sword, thus increasing that skill as long as it is in hand. A great power surges within &c+bManum Altur&cw - it pulsates with a lust for the blood of one race and it grants the wielder improved sight. The great power of the sword seems to twist anything it comes into contact with towards evil." 
 
extra {"$improved identify"} 
"&c+bManum Altur&cw has the power to endow its wielder with &c+g+4 strength&cw, &c+g+3 dexterity&cw, and &c+g+5% great sword skill&cw. It has a Craftmanship Modifier of &c+g20&cw and a Magical Modifier of &c+g13&cw. &c+bManum Altur&cw is a race slayer - it slays any of those with elven blood, but not darkelves. Elves may wield it due to the fact that the hilt is not endowed with slaying power. The sword has been known to force the wielder to attack others of its own volition. The wielder is also granted the ability to see those who are invisible. As well as the afore-mentioned powers, the command &c+rFUGO&cw will cause &c+bManum Altur&cw to transport its wielder through another dimension to another point in space. To see how many charges it has left, type &c+rCHARGES&cw while wielding it. If the owner wields the sword and shouts '&c+rI claim the evil for myself!&cw' the sword will bind to them and will not bear to be wielded by another. To see who owns the sword, look engravin!
g' on the hilt."
 
extra {"$no_engrave"}
"This item already has an engraving - look engraving to see it."

WEAPON_DEF(WPN_GREAT_SWORD,20,13) 
MATERIAL_METAL("Black Crystal and Tempered Steel") 
 
weight 40
 
manipulate {MANIPULATE_TAKE,MANIPULATE_WIELD,MANIPULATE_HOLD} 
 
STR_TRANSFER(+4) 
DEX_TRANSFER(+3) 
WEAPON_TRANSFER(WPN_GREAT_SWORD,+5) 
 
flags {UNIT_FL_MAGIC} 
 
CHAR_FLAG_TRANSFER(CHAR_DETECT_INVISIBLE) /* Allows the detect invis */ 
 
WEAPON_SLAYER(RACE_ELF) 
 
spell 60 /* Prevent easy wiz eye */ 
 
cost 1800 IRON_PIECE 
rent 900 IRON_PIECE
 
dilcopy level_restrict@function(50,0,0,"level_act@seren"); 
dilcopy abi_restrict@function(ABIL_STR,105,25,0,"abi_act@seren"); 
dilcopy weap_restrict@function(WPN_GREAT_SWORD,90,0,0,"ex_act@seren"); 

dilcopy pulsate@seren();
dilcopy hilt_desc@seren();
dilcopy claim_dil@seren();
/* dilcopy shock_get@seren(); */
dilcopy sword_charge@seren();
dilcopy fugo@seren();
dilcopy fatality@seren();
dilcopy random_attack@seren();

end /* relic */

/* These boots are no longer loaded and are just present 
   to support previous versions in the game - the current
   version is elf_boots@seren1 */

                         elf_boots /* Elf traveller's boots */
names {"Celerime's boots", "celerimes boots", "boots"}
title "&cgCelerime's boots&cw"
descr "A pair of leaf-green boots rest here, glistening with a light of their own."

extra {}
"These beautiful boots are made of a highly polished green cotton with leather soles. Legend has it that only the old elves knew how to make them. The fact that the boots seem to glisten in an unseen light tells you that these are no ordinary boots. Perhaps the ancient elves imbued them with some of their magic? That's curious, there are no laces."

extra {"$identify"}
"These boots endow the wearer with greater dexterity and intelligence. They can also increase the wearer's overall speed for a short time."

extra {"$improved identify"}
"Celerime's boots are of Craftsmanship/Magical modifiers 15/9. They will give the wearer a boon of +4 dexterity and +2 brain. While worn, if the wearer utters the word 'Quam', the boots will increase the wearer's speed in combat. The boots retain only 3 charges - to see the charges, type 'Fewl' while wearing them."

extra {"$wear_s"}
"As you put on Celerime's boots, you feel them magically hug your feet perfectly so that you don't need to lace them."

extra {"$wear_o"}
"As $1n puts on $1s boots, the boots seem to hug $1s feet perfectly."

extra {"$rem_s"}
"As you take off the boots, they suddenly let go of your feet and come away freely."

extra {"$rem_o"}
"As $1n removes $1s boots, the quickness in his step lessens."

extra {"$get_s"}
"A tingle of magical power runs through your fingers as you pick up the boots."

extra {"$get_o"}
"$1n's hand seems to twitch slightly as $1e picks up Celerime's boots."

rent 330 COPPER_PIECE
cost 660 COPPER_PIECE

BRA_TRANSFER(+2)
DEX_TRANSFER(+4)

MATERIAL_METAL("Elf cotton")
ARMOUR_PLATE(15,9)
type ITEM_WORN

manipulate {MANIPULATE_TAKE, MANIPULATE_WEAR_FEET}

weight 5 

dilcopy level_restrict@function(40,0,0,"");

dilcopy boot_charge@seren();
dilcopy boot_haste@seren();

end /* elf_boots */

/* END OBJECTS */ 
 
/* +++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++   R E S E T   S E C T I O N   ++++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++*/

%reset 
 
/*  
 
       MOBILE RESET SECTION 
 
       This is a reset section. Pretty obvious, huh? 
 
*/ 
 
/* Forest reset */ 
 
load zolan into forest27 zonemax 1 
{ 
equip zolan_mace position WEAR_WIELD 
equip vox_altur position WEAR_HOLD max 3
} 
 
/* Lake reset */ 
 
load darkelf_statue into lake9 zonemax 1 
{
load hand_dark
}
 
load fog_ele into lake2 zonemax 11 
load fog_ele into lake4 zonemax 11 
load fog_ele into lake2 zonemax 11 
load fog_ele into lake4 zonemax 11 
load fog_ele into lake7 zonemax 11 
load fog_ele into lake10 zonemax 11 
load fog_ele into lake15 zonemax 11 
load fog_ele into lake17 zonemax 11 
load fog_ele into lake6 zonemax 11 
load fog_ele into lake3 zonemax 11 
 
/* Field reset */ 
 
load syneen_doe into field3 zonemax 10 
load syneen_doe into field1 zonemax 10 
load syneen_doe into field5 zonemax 10 
load syneen_doe into field7 zonemax 10 
load syneen_doe into field11 zonemax 10 
load syneen_doe into field16 zonemax 10 
load syneen_doe into field12 zonemax 10 
load syneen_doe into field13 zonemax 10 
 
 
load syneen_stag into field2 zonemax 8 
load syneen_stag into field6 zonemax 8 
load syneen_stag into field9 zonemax 8 
load syneen_stag into field11 zonemax 8 
load syneen_stag into field13 zonemax 8 
load syneen_stag into field17 zonemax 8 
load syneen_stag into field15 zonemax 8 
 
load syneen_fawn into field4 zonemax 8 
load syneen_fawn into field18 zonemax 8 
load syneen_fawn into field5 zonemax 8 
load syneen_fawn into field4 zonemax 8 
load syneen_fawn into field12 zonemax 8 
load syneen_fawn into field17 zonemax 8 
load syneen_fawn into field15 zonemax 8 
 
/* Forest reset */ 
 
load grey_elk_stag into forest13 zonemax 1 
 
load grey_elk_hart into forest5 zonemax 11 
load grey_elk_hart into forest8 zonemax 11 
load grey_elk_hart into forest23 zonemax 11 
load grey_elk_hart into forest17 zonemax 11 
load grey_elk_hart into forest11 zonemax 11 
load grey_elk_hart into forest29 zonemax 11 
load grey_elk_hart into forest7 zonemax 11 
load grey_elk_hart into forest3 zonemax 11 
 
load mucin_boar into forest4 zonemax 5 
load mucin_boar into forest22 zonemax 5 
load mucin_boar into forest5 zonemax 5 
load mucin_boar into forest29 zonemax 5 
 
load mucin_sow into forest4 zonemax 7 
load mucin_sow into forest14 zonemax 7 
load mucin_sow into forest11 zonemax 7 
load mucin_sow into forest28 zonemax 7 
load mucin_sow into forest5 zonemax 7 
load mucin_sow into forest14 zonemax 7 


/* Miscellaneous reset */ 
 
load oracle into tower2 zonemax 1 
 
load chani into store1 zonemax 1 
{ 
equip chani_cloak position WEAR_ABOUT 
load dreamstone1 
} 
 
/* END MOB reset */ 
 
/*  
 
        OBJECT RESET 
 
*/ 

/* FOREST Statues */

load zolan_statue into forest26 zonemax 1
load altur_statue into forest26 zonemax 1
load matulin_statue into forest26 zonemax 1

/* DOORS */

/* ------------------------ DOORS ----------------------------------- */

door road1 WEST {EX_OPEN_CLOSE,EX_CLOSED}
door store1 EAST {EX_OPEN_CLOSE,EX_CLOSED}

load god_board@midgaard into glade local 1

load boulder into path3 zonemax 1 
 
load bell into store1 local 1 
 
%end 


